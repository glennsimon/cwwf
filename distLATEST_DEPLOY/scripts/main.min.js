"use strict"; /* !
 * screenfull
 * v3.3.2 - 2017-10-27
 * (c) Sindre Sorhus; MIT License
 */
/* eslint-env es6, browser */
(function () {
  'use strict';

  var document;
  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {
    document = window.document;
  } else {
    document = {};
  }
  var isCommonjs = typeof module !== 'undefined' && module.exports;
  var keyboardAllowed =
  typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;

  var fn = function () {
    var val;

    var fnMap = [
    [
    'requestFullscreen',
    'exitFullscreen',
    'fullscreenElement',
    'fullscreenEnabled',
    'fullscreenchange',
    'fullscreenerror'],

    // New WebKit
    [
    'webkitRequestFullscreen',
    'webkitExitFullscreen',
    'webkitFullscreenElement',
    'webkitFullscreenEnabled',
    'webkitfullscreenchange',
    'webkitfullscreenerror'],


    // Old WebKit (Safari 5.1)
    [
    'webkitRequestFullScreen',
    'webkitCancelFullScreen',
    'webkitCurrentFullScreenElement',
    'webkitCancelFullScreen',
    'webkitfullscreenchange',
    'webkitfullscreenerror'],


    [
    'mozRequestFullScreen',
    'mozCancelFullScreen',
    'mozFullScreenElement',
    'mozFullScreenEnabled',
    'mozfullscreenchange',
    'mozfullscreenerror'],

    [
    'msRequestFullscreen',
    'msExitFullscreen',
    'msFullscreenElement',
    'msFullscreenEnabled',
    'MSFullscreenChange',
    'MSFullscreenError']];



    var i = 0;
    var l = fnMap.length;
    var ret = {};

    for (; i < l; i++) {
      val = fnMap[i];
      if (val && val[1] in document) {
        for (i = 0; i < val.length; i++) {
          ret[fnMap[0][i]] = val[i];
        }
        return ret;
      }
    }

    return false;
  }();

  var eventNameMap = {
    change: fn.fullscreenchange,
    error: fn.fullscreenerror };


  var screenfull = {
    request: function request(elem) {
      var request = fn.requestFullscreen;

      elem = elem || document.documentElement;

      // Work around Safari 5.1 bug: reports support for
      // keyboard in fullscreen even though it doesn't.
      // Browser sniffing, since the alternative with
      // setTimeout is even worse.
      if (/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)) {
        elem[request]();
      } else {
        elem[request](keyboardAllowed && Element.ALLOW_KEYBOARD_INPUT);
      }
    },
    exit: function exit() {
      document[fn.exitFullscreen]();
    },
    toggle: function toggle(elem) {
      if (this.isFullscreen) {
        this.exit();
      } else {
        this.request(elem);
      }
    },
    onchange: function onchange(callback) {
      this.on('change', callback);
    },
    onerror: function onerror(callback) {
      this.on('error', callback);
    },
    on: function on(event, callback) {
      var eventName = eventNameMap[event];
      if (eventName) {
        document.addEventListener(eventName, callback, false);
      }
    },
    off: function off(event, callback) {
      var eventName = eventNameMap[event];
      if (eventName) {
        document.removeEventListener(eventName, callback, false);
      }
    },
    raw: fn };


  if (!fn) {
    if (isCommonjs) {
      module.exports = false;
    } else {
      window.screenfull = false;
    }

    return;
  }

  Object.defineProperties(screenfull, {
    isFullscreen: {
      get: function get() {
        return Boolean(document[fn.fullscreenElement]);
      } },

    element: {
      enumerable: true,
      get: function get() {
        return document[fn.fullscreenElement];
      } },

    enabled: {
      enumerable: true,
      get: function get() {
        // Coerce to boolean in case of old WebKit
        return Boolean(document[fn.fullscreenEnabled]);
      } } });



  if (isCommonjs) {
    module.exports = screenfull;
  } else {
    window.screenfull = screenfull;
  }
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmVlbmZ1bGwuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJ3aW5kb3ciLCJpc0NvbW1vbmpzIiwibW9kdWxlIiwiZXhwb3J0cyIsImtleWJvYXJkQWxsb3dlZCIsIkVsZW1lbnQiLCJmbiIsInZhbCIsImZuTWFwIiwiaSIsImwiLCJsZW5ndGgiLCJyZXQiLCJldmVudE5hbWVNYXAiLCJjaGFuZ2UiLCJmdWxsc2NyZWVuY2hhbmdlIiwiZXJyb3IiLCJmdWxsc2NyZWVuZXJyb3IiLCJzY3JlZW5mdWxsIiwicmVxdWVzdCIsImVsZW0iLCJyZXF1ZXN0RnVsbHNjcmVlbiIsImRvY3VtZW50RWxlbWVudCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJBTExPV19LRVlCT0FSRF9JTlBVVCIsImV4aXQiLCJleGl0RnVsbHNjcmVlbiIsInRvZ2dsZSIsImlzRnVsbHNjcmVlbiIsIm9uY2hhbmdlIiwiY2FsbGJhY2siLCJvbiIsIm9uZXJyb3IiLCJldmVudCIsImV2ZW50TmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvZmYiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmF3IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydGllcyIsImdldCIsIkJvb2xlYW4iLCJmdWxsc2NyZWVuRWxlbWVudCIsImVsZW1lbnQiLCJlbnVtZXJhYmxlIiwiZW5hYmxlZCIsImZ1bGxzY3JlZW5FbmFibGVkIl0sIm1hcHBpbmdzIjoiY0FBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLFlBQVc7QUFDVjs7QUFFQSxNQUFJQSxRQUFKO0FBQ0EsTUFBSSxPQUFPQyxNQUFQLEtBQWtCLFdBQWxCLElBQWlDLE9BQU9BLE1BQU0sQ0FBQ0QsUUFBZCxLQUEyQixXQUFoRSxFQUE2RTtBQUMzRUEsSUFBQUEsUUFBUSxHQUFHQyxNQUFNLENBQUNELFFBQWxCO0FBQ0QsR0FGRCxNQUVPO0FBQ0xBLElBQUFBLFFBQVEsR0FBRyxFQUFYO0FBQ0Q7QUFDRCxNQUFNRSxVQUFV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QUFXO0FBQ2QsZUFBT0MsT0FBTyxDQUFDN0MsUUFBUSxDQUFDTyxFQUFFLENBQUN1QyxpQkFBSixDQUFULENBQWQ7QUFDRCxPQUhXLEVBRG9COztBQU1sQ0MsSUFBQUEsT0FBTyxFQUFFO0FBQ1BDLE1BQUFBLFVBQVUsRUFBRSxJQURMO0FBRVBKLE1BQUFBLEdBQUcsRUFBRSxlQUFXO0FBQ2QsZUFBTzVDLFFBQVEsQ0FBQ08sRUFBRSxDQUFDdUMsaUJBQUosQ0FBZjtBQUNELE9BSk0sRUFOeUI7O0FBWWxDRyxJQUFBQSxPQUFPLEVBQUU7QUFDUEQsTUFBQUEsVUFBVSxFQUFFLElBREw7QUFFUEosTUFBQUEsR0FBRyxFQUFFLGVBQVc7QUFDZDtBQUNBLGVBQU9DLE9BQU8sQ0FBQzdDLFFBQVEsQ0FBQ08sRUFBRSxDQUFDMkMsaUJBQUosQ0FBVCxDQUFkO0FBQ0QsT0FMTSxFQVp5QixFQUFwQzs7OztBQXFCQSxNQUFJaEQsVUFBSixFQUFnQjtBQUNkQyxJQUFBQSxNQUFNLENBQUNDLE9BQVAsR0FBaUJlLFVBQWpCO0FBQ0QsR0FGRCxNQUVPO0FBQ0xsQixJQUFBQSxNQUFNLENBQUNrQixVQUFQLEdBQW9CQSxVQUFwQjtBQUNEO0FBQ0YsQ0F4S0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKiAhXHJcbiAqIHNjcmVlbmZ1bGxcclxuICogdjMuMy4yIC0gMjAxNy0xMC0yN1xyXG4gKiAoYykgU2luZHJlIFNvcmh1czsgTUlUIExpY2Vuc2VcclxuICovXHJcbi8qIGVzbGludC1lbnYgZXM2LCBicm93c2VyICovXHJcbihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIGxldCBkb2N1bWVudDtcclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudCA9IHt9O1xyXG4gIH1cclxuICBjb25zdCBpc0NvbW1vbmpzID0gdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHM7XHJcbiAgY29uc3Qga2V5Ym9hcmRBbGxvd2VkID1cclxuICAgIHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiAnQUxMT1dfS0VZQk9BUkRfSU5QVVQnIGluIEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0IGZuID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IHZhbDtcclxuXHJcbiAgICBjb25zdCBmbk1hcCA9IFtcclxuICAgICAgW1xyXG4gICAgICAgICdyZXF1ZXN0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgJ2V4aXRGdWxsc2NyZWVuJyxcclxuICAgICAgICAnZnVsbHNjcmVlbkVsZW1lbnQnLFxyXG4gICAgICAgICdmdWxsc2NyZWVuRW5hYmxlZCcsXHJcbiAgICAgICAgJ2Z1bGxzY3JlZW5jaGFuZ2UnLFxyXG4gICAgICAgICdmdWxsc2NyZWVuZXJyb3InLFxyXG4gICAgICBdLFxyXG4gICAgICAvLyBOZXcgV2ViS2l0XHJcbiAgICAgIFtcclxuICAgICAgICAnd2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4nLFxyXG4gICAgICAgICd3ZWJraXRFeGl0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgJ3dlYmtpdEZ1bGxzY3JlZW5FbGVtZW50JyxcclxuICAgICAgICAnd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQnLFxyXG4gICAgICAgICd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcclxuICAgICAgICAnd2Via2l0ZnVsbHNjcmVlbmVycm9yJyxcclxuXHJcbiAgICAgIF0sXHJcbiAgICAgIC8vIE9sZCBXZWJLaXQgKFNhZmFyaSA1LjEpXHJcbiAgICAgIFtcclxuICAgICAgICAnd2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4nLFxyXG4gICAgICAgICd3ZWJraXRDYW5jZWxGdWxsU2NyZWVuJyxcclxuICAgICAgICAnd2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50JyxcclxuICAgICAgICAnd2Via2l0Q2FuY2VsRnVsbFNjcmVlbicsXHJcbiAgICAgICAgJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxyXG4gICAgICAgICd3ZWJraXRmdWxsc2NyZWVuZXJyb3InLFxyXG5cclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgICdtb3pSZXF1ZXN0RnVsbFNjcmVlbicsXHJcbiAgICAgICAgJ21vekNhbmNlbEZ1bGxTY3JlZW4nLFxyXG4gICAgICAgICdtb3pGdWxsU2NyZWVuRWxlbWVudCcsXHJcbiAgICAgICAgJ21vekZ1bGxTY3JlZW5FbmFibGVkJyxcclxuICAgICAgICAnbW96ZnVsbHNjcmVlbmNoYW5nZScsXHJcbiAgICAgICAgJ21vemZ1bGxzY3JlZW5lcnJvcicsXHJcbiAgICAgIF0sXHJcbiAgICAgIFtcclxuICAgICAgICAnbXNSZXF1ZXN0RnVsbHNjcmVlbicsXHJcbiAgICAgICAgJ21zRXhpdEZ1bGxzY3JlZW4nLFxyXG4gICAgICAgICdtc0Z1bGxzY3JlZW5FbGVtZW50JyxcclxuICAgICAgICAnbXNGdWxsc2NyZWVuRW5hYmxlZCcsXHJcbiAgICAgICAgJ01TRnVsbHNjcmVlbkNoYW5nZScsXHJcbiAgICAgICAgJ01TRnVsbHNjcmVlbkVycm9yJyxcclxuICAgICAgXSxcclxuICAgIF07XHJcblxyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgY29uc3QgbCA9IGZuTWFwLmxlbmd0aDtcclxuICAgIGNvbnN0IHJldCA9IHt9O1xyXG5cclxuICAgIGZvciAoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgIHZhbCA9IGZuTWFwW2ldO1xyXG4gICAgICBpZiAodmFsICYmIHZhbFsxXSBpbiBkb2N1bWVudCkge1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHJldFtmbk1hcFswXVtpXV0gPSB2YWxbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSkoKTtcclxuXHJcbiAgY29uc3QgZXZlbnROYW1lTWFwID0ge1xyXG4gICAgY2hhbmdlOiBmbi5mdWxsc2NyZWVuY2hhbmdlLFxyXG4gICAgZXJyb3I6IGZuLmZ1bGxzY3JlZW5lcnJvcixcclxuICB9O1xyXG5cclxuICBjb25zdCBzY3JlZW5mdWxsID0ge1xyXG4gICAgcmVxdWVzdDogZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICBjb25zdCByZXF1ZXN0ID0gZm4ucmVxdWVzdEZ1bGxzY3JlZW47XHJcblxyXG4gICAgICBlbGVtID0gZWxlbSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblxyXG4gICAgICAvLyBXb3JrIGFyb3VuZCBTYWZhcmkgNS4xIGJ1ZzogcmVwb3J0cyBzdXBwb3J0IGZvclxyXG4gICAgICAvLyBrZXlib2FyZCBpbiBmdWxsc2NyZWVuIGV2ZW4gdGhvdWdoIGl0IGRvZXNuJ3QuXHJcbiAgICAgIC8vIEJyb3dzZXIgc25pZmZpbmcsIHNpbmNlIHRoZSBhbHRlcm5hdGl2ZSB3aXRoXHJcbiAgICAgIC8vIHNldFRpbWVvdXQgaXMgZXZlbiB3b3JzZS5cclxuICAgICAgaWYgKC8gVmVyc2lvblxcLzVcXC4xKD86XFwuXFxkKyk/IFNhZmFyaVxcLy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xyXG4gICAgICAgIGVsZW1bcmVxdWVzdF0oKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbGVtW3JlcXVlc3RdKGtleWJvYXJkQWxsb3dlZCAmJiBFbGVtZW50LkFMTE9XX0tFWUJPQVJEX0lOUFVUKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGV4aXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBkb2N1bWVudFtmbi5leGl0RnVsbHNjcmVlbl0oKTtcclxuICAgIH0sXHJcbiAgICB0b2dnbGU6IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgICAgaWYgKHRoaXMuaXNGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgdGhpcy5leGl0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0KGVsZW0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgb25jaGFuZ2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgIHRoaXMub24oJ2NoYW5nZScsIGNhbGxiYWNrKTtcclxuICAgIH0sXHJcbiAgICBvbmVycm9yOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICB0aGlzLm9uKCdlcnJvcicsIGNhbGxiYWNrKTtcclxuICAgIH0sXHJcbiAgICBvbjogZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGV2ZW50TmFtZU1hcFtldmVudF07XHJcbiAgICAgIGlmIChldmVudE5hbWUpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9mZjogZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGV2ZW50TmFtZU1hcFtldmVudF07XHJcbiAgICAgIGlmIChldmVudE5hbWUpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHJhdzogZm4sXHJcbiAgfTtcclxuXHJcbiAgaWYgKCFmbikge1xyXG4gICAgaWYgKGlzQ29tbW9uanMpIHtcclxuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdpbmRvdy5zY3JlZW5mdWxsID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2NyZWVuZnVsbCwge1xyXG4gICAgaXNGdWxsc2NyZWVuOiB7XHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oZG9jdW1lbnRbZm4uZnVsbHNjcmVlbkVsZW1lbnRdKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBlbGVtZW50OiB7XHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50W2ZuLmZ1bGxzY3JlZW5FbGVtZW50XTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBlbmFibGVkOiB7XHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy8gQ29lcmNlIHRvIGJvb2xlYW4gaW4gY2FzZSBvZiBvbGQgV2ViS2l0XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oZG9jdW1lbnRbZm4uZnVsbHNjcmVlbkVuYWJsZWRdKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIGlmIChpc0NvbW1vbmpzKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHNjcmVlbmZ1bGw7XHJcbiAgfSBlbHNlIHtcclxuICAgIHdpbmRvdy5zY3JlZW5mdWxsID0gc2NyZWVuZnVsbDtcclxuICB9XHJcbn0pKCk7XHJcbiJdLCJmaWxlIjoic2NyZWVuZnVsbC5qcyJ9

"use strict";function _typeof(obj) {"@babel/helpers - typeof";if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;};}return _typeof(obj);} /* eslint-disable */
(function () {

  // nb. This is for IE10 and lower _only_.
  var supportCustomEvent = window.CustomEvent;
  if (!supportCustomEvent || _typeof(supportCustomEvent) === 'object') {
    supportCustomEvent = function CustomEvent(event, x) {
      x = x || {};
      var ev = document.createEvent('CustomEvent');
      ev.initCustomEvent(event, !!x.bubbles, !!x.cancelable, x.detail || null);
      return ev;
    };
    supportCustomEvent.prototype = window.Event.prototype;
  }

  /**
   * @param {Element} el to check for stacking context
   * @return {boolean} whether this el or its parents creates a stacking context
   */
  function createsStackingContext(el) {
    while (el && el !== document.body) {
      var s = window.getComputedStyle(el);
      var invalid = function invalid(k, ok) {
        return !(s[k] === undefined || s[k] === ok);
      };
      if (s.opacity < 1 ||
      invalid('zIndex', 'auto') ||
      invalid('transform', 'none') ||
      invalid('mixBlendMode', 'normal') ||
      invalid('filter', 'none') ||
      invalid('perspective', 'none') ||
      s['isolation'] === 'isolate' ||
      s.position === 'fixed' ||
      s.webkitOverflowScrolling === 'touch') {
        return true;
      }
      el = el.parentElement;
    }
    return false;
  }

  /**
   * Finds the nearest <dialog> from the passed element.
   *
   * @param {Element} el to search from
   * @return {HTMLDialogElement} dialog found
   */
  function findNearestDialog(el) {
    while (el) {
      if (el.localName === 'dialog') {
        return (/** @type {HTMLDialogElement} */el);
      }
      el = el.parentElement;
    }
    return null;
  }

  /**
   * Blur the specified element, as long as it's not the HTML body element.
   * This works around an IE9/10 bug - blurring the body causes Windows to
   * blur the whole application.
   *
   * @param {Element} el to blur
   */
  function safeBlur(el) {
    if (el && el.blur && el !== document.body) {
      el.blur();
    }
  }

  /**
   * @param {!NodeList} nodeList to search
   * @param {Node} node to find
   * @return {boolean} whether node is inside nodeList
   */
  function inNodeList(nodeList, node) {
    for (var i = 0; i < nodeList.length; ++i) {
      if (nodeList[i] === node) {
        return true;
      }
    }
    return false;
  }

  /**
   * @param {HTMLFormElement} el to check
   * @return {boolean} whether this form has method="dialog"
   */
  function isFormMethodDialog(el) {
    if (!el || !el.hasAttribute('method')) {
      return false;
    }
    return el.getAttribute('method').toLowerCase() === 'dialog';
  }

  /**
   * @param {!HTMLDialogElement} dialog to upgrade
   * @constructor
   */
  function dialogPolyfillInfo(dialog) {
    this.dialog_ = dialog;
    this.replacedStyleTop_ = false;
    this.openAsModal_ = false;

    // Set a11y role. Browsers that support dialog implicitly know this already.
    if (!dialog.hasAttribute('role')) {
      dialog.setAttribute('role', 'dialog');
    }

    dialog.show = this.show.bind(this);
    dialog.showModal = this.showModal.bind(this);
    dialog.close = this.close.bind(this);

    if (!('returnValue' in dialog)) {
      dialog.returnValue = '';
    }

    if ('MutationObserver' in window) {
      var mo = new MutationObserver(this.maybeHideModal.bind(this));
      mo.observe(dialog, { attributes: true, attributeFilter: ['open'] });
    } else {
      // IE10 and below support. Note that DOMNodeRemoved etc fire _before_ removal. They also
      // seem to fire even if the element was removed as part of a parent removal. Use the removed
      // events to force downgrade (useful if removed/immediately added).
      var removed = false;
      var cb = function () {
        removed ? this.downgradeModal() : this.maybeHideModal();
        removed = false;
      }.bind(this);
      var timeout;
      var delayModel = function delayModel(ev) {
        if (ev.target !== dialog) {return;} // not for a child element
        var cand = 'DOMNodeRemoved';
        removed |= ev.type.substr(0, cand.length) === cand;
        window.clearTimeout(timeout);
        timeout = window.setTimeout(cb, 0);
      };
      ['DOMAttrModified', 'DOMNodeRemoved', 'DOMNodeRemovedFromDocument'].forEach(function (name) {
        dialog.addEventListener(name, delayModel);
      });
    }
    // Note that the DOM is observed inside DialogManager while any dialog
    // is being displayed as a modal, to catch modal removal from the DOM.

    Object.defineProperty(dialog, 'open', {
      set: this.setOpen.bind(this),
      get: dialog.hasAttribute.bind(dialog, 'open') });


    this.backdrop_ = document.createElement('div');
    this.backdrop_.className = 'backdrop';
    this.backdrop_.addEventListener('click', this.backdropClick_.bind(this));
  }

  dialogPolyfillInfo.prototype = {

    get dialog() {
      return this.dialog_;
    },

    /**
     * Maybe remove this dialog from the modal top layer. This is called when
     * a modal dialog may no longer be tenable, e.g., when the dialog is no
     * longer open or is no longer part of the DOM.
     */
    maybeHideModal: function maybeHideModal() {
      if (this.dialog_.hasAttribute('open') && document.body.contains(this.dialog_)) {return;}
      this.downgradeModal();
    },

    /**
     * Remove this dialog from the modal top layer, leaving it as a non-modal.
     */
    downgradeModal: function downgradeModal() {
      if (!this.openAsModal_) {return;}
      this.openAsModal_ = false;
      this.dialog_.style.zIndex = '';

      // This won't match the native <dialog> exactly because if the user set top on a centered
      // polyfill dialog, that top gets thrown away when the dialog is closed. Not sure it's
      // possible to polyfill this perfectly.
      if (this.replacedStyleTop_) {
        this.dialog_.style.top = '';
        this.replacedStyleTop_ = false;
      }

      // Clear the backdrop and remove from the manager.
      this.backdrop_.parentNode && this.backdrop_.parentNode.removeChild(this.backdrop_);
      dialogPolyfill.dm.removeDialog(this);
    },

    /**
     * @param {boolean} value whether to open or close this dialog
     */
    setOpen: function setOpen(value) {
      if (value) {
        this.dialog_.hasAttribute('open') || this.dialog_.setAttribute('open', '');
      } else {
        this.dialog_.removeAttribute('open');
        this.maybeHideModal(); // nb. redundant with MutationObserver
      }
    },

    /**
     * Handles clicks on the fake .backdrop element, redirecting them as if
     * they were on the dialog itself.
     *
     * @param {!Event} e to redirect
     */
    backdropClick_: function backdropClick_(e) {
      if (!this.dialog_.hasAttribute('tabindex')) {
        // Clicking on the backdrop should move the implicit cursor, even if dialog cannot be
        // focused. Create a fake thing to focus on. If the backdrop was _before_ the dialog, this
        // would not be needed - clicks would move the implicit cursor there.
        var fake = document.createElement('div');
        this.dialog_.insertBefore(fake, this.dialog_.firstChild);
        fake.tabIndex = -1;
        fake.focus();
        this.dialog_.removeChild(fake);
      } else {
        this.dialog_.focus();
      }

      var redirectedEvent = document.createEvent('MouseEvents');
      redirectedEvent.initMouseEvent(e.type, e.bubbles, e.cancelable, window,
      e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey,
      e.altKey, e.shiftKey, e.metaKey, e.button, e.relatedTarget);
      this.dialog_.dispatchEvent(redirectedEvent);
      e.stopPropagation();
    },

    /**
     * Focuses on the first focusable element within the dialog. This will always blur the current
     * focus, even if nothing within the dialog is found.
     */
    focus_: function focus_() {
      // Find element with `autofocus` attribute, or fall back to the first form/tabindex control.
      var target = this.dialog_.querySelector('[autofocus]:not([disabled])');
      if (!target && this.dialog_.tabIndex >= 0) {
        target = this.dialog_;
      }
      if (!target) {
        // Note that this is 'any focusable area'. This list is probably not exhaustive, but the
        // alternative involves stepping through and trying to focus everything.
        var opts = ['button', 'input', 'keygen', 'select', 'textarea'];
        var query = opts.map(function (el) {
          return el + ':not([disabled])';
        });
        // TODO(samthor): tabindex values that are not numeric are not focusable.
        query.push('[tabindex]:not([disabled]):not([tabindex=""])'); // tabindex != "", not disabled
        target = this.dialog_.querySelector(query.join(', '));
      }
      safeBlur(document.activeElement);
      target && target.focus();
    },

    /**
     * Sets the zIndex for the backdrop and dialog.
     *
     * @param {number} dialogZ
     * @param {number} backdropZ
     */
    updateZIndex: function updateZIndex(dialogZ, backdropZ) {
      if (dialogZ < backdropZ) {
        throw new Error('dialogZ should never be < backdropZ');
      }
      this.dialog_.style.zIndex = dialogZ;
      this.backdrop_.style.zIndex = backdropZ;
    },

    /**
     * Shows the dialog. If the dialog is already open, this does nothing.
     */
    show: function show() {
      if (!this.dialog_.open) {
        this.setOpen(true);
        this.focus_();
      }
    },

    /**
     * Show this dialog modally.
     */
    showModal: function showModal() {
      if (this.dialog_.hasAttribute('open')) {
        throw new Error('Failed to execute \'showModal\' on dialog: The element is already open, and therefore cannot be opened modally.');
      }
      if (!document.body.contains(this.dialog_)) {
        throw new Error('Failed to execute \'showModal\' on dialog: The element is not in a Document.');
      }
      if (!dialogPolyfill.dm.pushDialog(this)) {
        throw new Error('Failed to execute \'showModal\' on dialog: There are too many open modal dialogs.');
      }

      if (createsStackingContext(this.dialog_.parentElement)) {
        console.warn('A dialog is being shown inside a stacking context. ' +
        'This may cause it to be unusable. For more information, see this link: ' +
        'https://github.com/GoogleChrome/dialog-polyfill/#stacking-context');
      }

      this.setOpen(true);
      this.openAsModal_ = true;

      // Optionally center vertically, relative to the current viewport.
      if (dialogPolyfill.needsCentering(this.dialog_)) {
        dialogPolyfill.reposition(this.dialog_);
        this.replacedStyleTop_ = true;
      } else {
        this.replacedStyleTop_ = false;
      }

      // Insert backdrop.
      this.dialog_.parentNode.insertBefore(this.backdrop_, this.dialog_.nextSibling);

      // Focus on whatever inside the dialog.
      this.focus_();
    },

    /**
     * Closes this HTMLDialogElement. This is optional vs clearing the open
     * attribute, however this fires a 'close' event.
     *
     * @param {string=} opt_returnValue to use as the returnValue
     */
    close: function close(opt_returnValue) {
      if (!this.dialog_.hasAttribute('open')) {
        throw new Error('Failed to execute \'close\' on dialog: The element does not have an \'open\' attribute, and therefore cannot be closed.');
      }
      this.setOpen(false);

      // Leave returnValue untouched in case it was set directly on the element
      if (opt_returnValue !== undefined) {
        this.dialog_.returnValue = opt_returnValue;
      }

      // Triggering "close" event for any attached listeners on the <dialog>.
      var closeEvent = new supportCustomEvent('close', {
        bubbles: false,
        cancelable: false });

      this.dialog_.dispatchEvent(closeEvent);
    } };



  var dialogPolyfill = {};

  dialogPolyfill.reposition = function (element) {
    var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
    var topValue = scrollTop + (window.innerHeight - element.offsetHeight) / 2;
    element.style.top = Math.max(scrollTop, topValue) + 'px';
  };

  dialogPolyfill.isInlinePositionSetByStylesheet = function (element) {
    for (var i = 0; i < document.styleSheets.length; ++i) {
      var styleSheet = document.styleSheets[i];
      var cssRules = null;
      // Some browsers throw on cssRules.
      try {
        cssRules = styleSheet.cssRules;
      } catch (e) {}
      if (!cssRules) {continue;}
      for (var j = 0; j < cssRules.length; ++j) {
        var rule = cssRules[j];
        var selectedNodes = null;
        // Ignore errors on invalid selector texts.
        try {
          selectedNodes = document.querySelectorAll(rule.selectorText);
        } catch (e) {}
        if (!selectedNodes || !inNodeList(selectedNodes, element)) {
          continue;
        }
        var cssTop = rule.style.getPropertyValue('top');
        var cssBottom = rule.style.getPropertyValue('bottom');
        if (cssTop && cssTop !== 'auto' || cssBottom && cssBottom !== 'auto') {
          return true;
        }
      }
    }
    return false;
  };

  dialogPolyfill.needsCentering = function (dialog) {
    var computedStyle = window.getComputedStyle(dialog);
    if (computedStyle.position !== 'absolute') {
      return false;
    }

    // We must determine whether the top/bottom specified value is non-auto.  In
    // WebKit/Blink, checking computedStyle.top == 'auto' is sufficient, but
    // Firefox returns the used value. So we do this crazy thing instead: check
    // the inline style and then go through CSS rules.
    if (dialog.style.top !== 'auto' && dialog.style.top !== '' ||
    dialog.style.bottom !== 'auto' && dialog.style.bottom !== '') {
      return false;
    }
    return !dialogPolyfill.isInlinePositionSetByStylesheet(dialog);
  };

  /**
   * @param {!Element} element to force upgrade
   */
  dialogPolyfill.forceRegisterDialog = function (element) {
    if (window.HTMLDialogElement || element.showModal) {
      console.warn('This browser already supports <dialog>, the polyfill ' +
      'may not work correctly', element);
    }
    if (element.localName !== 'dialog') {
      throw new Error('Failed to register dialog: The element is not a dialog.');
    }
    new dialogPolyfillInfo( /** @type {!HTMLDialogElement} */element);
  };

  /**
   * @param {!Element} element to upgrade, if necessary
   */
  dialogPolyfill.registerDialog = function (element) {
    if (!element.showModal) {
      dialogPolyfill.forceRegisterDialog(element);
    }
  };

  /**
   * @constructor
   */
  dialogPolyfill.DialogManager = function () {
    /** @type {!Array<!dialogPolyfillInfo>} */
    this.pendingDialogStack = [];

    var checkDOM = this.checkDOM_.bind(this);

    // The overlay is used to simulate how a modal dialog blocks the document.
    // The blocking dialog is positioned on top of the overlay, and the rest of
    // the dialogs on the pending dialog stack are positioned below it. In the
    // actual implementation, the modal dialog stacking is controlled by the
    // top layer, where z-index has no effect.
    this.overlay = document.createElement('div');
    this.overlay.className = '_dialog_overlay';
    this.overlay.addEventListener('click', function (e) {
      this.forwardTab_ = undefined;
      e.stopPropagation();
      checkDOM([]); // sanity-check DOM
    }.bind(this));

    this.handleKey_ = this.handleKey_.bind(this);
    this.handleFocus_ = this.handleFocus_.bind(this);

    this.zIndexLow_ = 100000;
    this.zIndexHigh_ = 100000 + 150;

    this.forwardTab_ = undefined;

    if ('MutationObserver' in window) {
      this.mo_ = new MutationObserver(function (records) {
        var removed = [];
        records.forEach(function (rec) {
          for (var i = 0, c; c = rec.removedNodes[i]; ++i) {
            if (!(c instanceof Element)) {
              continue;
            } else if (c.localName === 'dialog') {
              removed.push(c);
            }
            removed = removed.concat(c.querySelectorAll('dialog'));
          }
        });
        removed.length && checkDOM(removed);
      });
    }
  };

  /**
   * Called on the first modal dialog being shown. Adds the overlay and related
   * handlers.
   */
  dialogPolyfill.DialogManager.prototype.blockDocument = function () {
    document.documentElement.addEventListener('focus', this.handleFocus_, true);
    document.addEventListener('keydown', this.handleKey_);
    this.mo_ && this.mo_.observe(document, { childList: true, subtree: true });
  };

  /**
   * Called on the first modal dialog being removed, i.e., when no more modal
   * dialogs are visible.
   */
  dialogPolyfill.DialogManager.prototype.unblockDocument = function () {
    document.documentElement.removeEventListener('focus', this.handleFocus_, true);
    document.removeEventListener('keydown', this.handleKey_);
    this.mo_ && this.mo_.disconnect();
  };

  /**
   * Updates the stacking of all known dialogs.
   */
  dialogPolyfill.DialogManager.prototype.updateStacking = function () {
    var zIndex = this.zIndexHigh_;

    for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {
      dpi.updateZIndex(--zIndex, --zIndex);
      if (i === 0) {
        this.overlay.style.zIndex = --zIndex;
      }
    }

    // Make the overlay a sibling of the dialog itself.
    var last = this.pendingDialogStack[0];
    if (last) {
      var p = last.dialog.parentNode || document.body;
      p.appendChild(this.overlay);
    } else if (this.overlay.parentNode) {
      this.overlay.parentNode.removeChild(this.overlay);
    }
  };

  /**
   * @param {Element} candidate to check if contained or is the top-most modal dialog
   * @return {boolean} whether candidate is contained in top dialog
   */
  dialogPolyfill.DialogManager.prototype.containedByTopDialog_ = function (candidate) {
    while (candidate = findNearestDialog(candidate)) {
      for (var i = 0, dpi; dpi = this.pendingDialogStack[i]; ++i) {
        if (dpi.dialog === candidate) {
          return i === 0; // only valid if top-most
        }
      }
      candidate = candidate.parentElement;
    }
    return false;
  };

  dialogPolyfill.DialogManager.prototype.handleFocus_ = function (event) {
    if (this.containedByTopDialog_(event.target)) {return;}

    event.preventDefault();
    event.stopPropagation();
    safeBlur( /** @type {Element} */event.target);

    if (this.forwardTab_ === undefined) {return;} // move focus only from a tab key

    var dpi = this.pendingDialogStack[0];
    var dialog = dpi.dialog;
    var position = dialog.compareDocumentPosition(event.target);
    if (position & Node.DOCUMENT_POSITION_PRECEDING) {
      if (this.forwardTab_) {// forward
        dpi.focus_();
      } else {// backwards
        document.documentElement.focus();
      }
    } else {
      // TODO: Focus after the dialog, is ignored.
    }

    return false;
  };

  dialogPolyfill.DialogManager.prototype.handleKey_ = function (event) {
    this.forwardTab_ = undefined;
    if (event.keyCode === 27) {
      event.preventDefault();
      event.stopPropagation();
      var cancelEvent = new supportCustomEvent('cancel', {
        bubbles: false,
        cancelable: true });

      var dpi = this.pendingDialogStack[0];
      if (dpi && dpi.dialog.dispatchEvent(cancelEvent)) {
        dpi.dialog.close();
      }
    } else if (event.keyCode === 9) {
      this.forwardTab_ = !event.shiftKey;
    }
  };

  /**
   * Finds and downgrades any known modal dialogs that are no longer displayed. Dialogs that are
   * removed and immediately readded don't stay modal, they become normal.
   *
   * @param {!Array<!HTMLDialogElement>} removed that have definitely been removed
   */
  dialogPolyfill.DialogManager.prototype.checkDOM_ = function (removed) {
    // This operates on a clone because it may cause it to change. Each change also calls
    // updateStacking, which only actually needs to happen once. But who removes many modal dialogs
    // at a time?!
    var clone = this.pendingDialogStack.slice();
    clone.forEach(function (dpi) {
      if (removed.indexOf(dpi.dialog) !== -1) {
        dpi.downgradeModal();
      } else {
        dpi.maybeHideModal();
      }
    });
  };

  /**
   * @param {!dialogPolyfillInfo} dpi
   * @return {boolean} whether the dialog was allowed
   */
  dialogPolyfill.DialogManager.prototype.pushDialog = function (dpi) {
    var allowed = (this.zIndexHigh_ - this.zIndexLow_) / 2 - 1;
    if (this.pendingDialogStack.length >= allowed) {
      return false;
    }
    if (this.pendingDialogStack.unshift(dpi) === 1) {
      this.blockDocument();
    }
    this.updateStacking();
    return true;
  };

  /**
   * @param {!dialogPolyfillInfo} dpi
   */
  dialogPolyfill.DialogManager.prototype.removeDialog = function (dpi) {
    var index = this.pendingDialogStack.indexOf(dpi);
    if (index === -1) {return;}

    this.pendingDialogStack.splice(index, 1);
    if (this.pendingDialogStack.length === 0) {
      this.unblockDocument();
    }
    this.updateStacking();
  };

  dialogPolyfill.dm = new dialogPolyfill.DialogManager();
  dialogPolyfill.formSubmitter = null;
  dialogPolyfill.useValue = null;

  /**
   * Installs global handlers, such as click listers and native method overrides. These are needed
   * even if a no dialog is registered, as they deal with <form method="dialog">.
   */
  if (window.HTMLDialogElement === undefined) {var




























































    replacementFormSubmit = function replacementFormSubmit() {
      if (!isFormMethodDialog(this)) {
        return nativeFormSubmit.call(this);
      }
      var dialog = findNearestDialog(this);
      dialog && dialog.close();
    }; /**
     * If HTMLFormElement translates method="DIALOG" into 'get', then replace the descriptor with
     * one that returns the correct value.
     */var testForm = document.createElement('form');testForm.setAttribute('method', 'dialog');if (testForm.method !== 'dialog') {var methodDescriptor = Object.getOwnPropertyDescriptor(HTMLFormElement.prototype, 'method');if (methodDescriptor) {// TODO: older iOS and older PhantomJS fail to return the descriptor here
        var realGet = methodDescriptor.get;methodDescriptor.get = function () {if (isFormMethodDialog(this)) {return 'dialog';}return realGet.call(this);};var realSet = methodDescriptor.set;methodDescriptor.set = function (v) {if (typeof v === 'string' && v.toLowerCase() === 'dialog') {return this.setAttribute('method', v);}return realSet.call(this, v);};Object.defineProperty(HTMLFormElement.prototype, 'method', methodDescriptor);}} /**
     * Global 'click' handler, to capture the <input type="submit"> or <button> element which has
     * submitted a <form method="dialog">. Needed as Safari and others don't report this inside
     * document.activeElement.
     */document.addEventListener('click', function (ev) {dialogPolyfill.formSubmitter = null;dialogPolyfill.useValue = null;if (ev.defaultPrevented) {return;} // e.g. a submit which prevents default submission
      var target = /** @type {Element} */ev.target;if (!target || !isFormMethodDialog(target.form)) {return;}var valid = target.type === 'submit' && ['button', 'input'].indexOf(target.localName) > -1;if (!valid) {if (!(target.localName === 'input' && target.type === 'image')) {return;} // this is a <input type="image">, which can submit forms
        dialogPolyfill.useValue = ev.offsetX + ',' + ev.offsetY;}var dialog = findNearestDialog(target);if (!dialog) {return;}dialogPolyfill.formSubmitter = target;}, false); /**
     * Replace the native HTMLFormElement.submit() method, as it won't fire the
     * submit event and give us a chance to respond.
     */var nativeFormSubmit = HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit = replacementFormSubmit; /**
     * Global form 'dialog' method handler. Closes a dialog correctly on submit
     * and possibly sets its return value.
     */document.addEventListener('submit', function (ev) {var form = /** @type {HTMLFormElement} */ev.target;if (!isFormMethodDialog(form)) {return;}ev.preventDefault();var dialog = findNearestDialog(form);if (!dialog) {return;} // Forms can only be submitted via .submit() or a click (?), but anyway: sanity-check that
      // the submitter is correct before using its value as .returnValue.
      var s = dialogPolyfill.formSubmitter;if (s && s.form === form) {
        dialog.close(dialogPolyfill.useValue || s.value);
      } else {
        dialog.close();
      }
      dialogPolyfill.formSubmitter = null;
    }, true);
  }

  dialogPolyfill['forceRegisterDialog'] = dialogPolyfill.forceRegisterDialog;
  dialogPolyfill['registerDialog'] = dialogPolyfill.registerDialog;

  if (typeof define === 'function' && 'amd' in define) {
    // AMD support
    define(function () {return dialogPolyfill;});
  } else if ((typeof module === "undefined" ? "undefined" : _typeof(module)) === 'object' && _typeof(module['exports']) === 'object') {
    // CommonJS support
    module['exports'] = dialogPolyfill;
  } else {
    // all others
    window['dialogPolyfill'] = dialogPolyfill;
  }
})();
/* eslint-enable */
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy1wb2x5ZmlsbC5qcyJdLCJuYW1lcyI6WyJzdXBwb3J0Q3VzdG9tRXZlbnQiLCJ3aW5kb3ciLCJDdXN0b21FdmVudCIsImV2ZW50IiwieCIsImV2IiwiZG9jdW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiZGV0YWlsIiwicHJvdG90eXBlIiwiRXZlbnQiLCJjcmVhdGVzU3RhY2tpbmdDb250ZXh0IiwiZWwiLCJib2R5IiwicyIsImdldENvbXB1dGVkU3R5bGUiLCJpbnZhbGlkIiwiayIsIm9rIiwidW5kZWZpbmVkIiwib3BhY2l0eSIsInBvc2l0aW9uIiwid2Via2l0T3ZlcmZsb3dTY3JvbGxpbmciLCJwYXJlbnRFbGVtZW50IiwiZmluZE5lYXJlc3REaWFsb2ciLCJsb2NhbE5hbWUiLCJzYWZlQmx1ciIsImJsdXIiLCJpbk5vZGVMaXN0Iiwibm9kZUxpc3QiLCJub2RlIiwiaSIsImxlbmd0aCIsImlzRm9ybU1ldGhvZERpYWxvZyIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsInRvTG93ZXJDYXNlIiwiZGlhbG9nUG9seWZpbGxJbmZvIiwiZGlhbG9nIiwiZGlhbG9nXyIsInJlcGxhY2VkU3R5bGVUb3BfIiwib3BlbkFzTW9kYWxfIiwic2V0QXR0cmlidXRlIiwic2hvdyIsImJpbmQiLCJzaG93TW9kYWwiLCJjbG9zZSIsInJldHVyblZhbHVlIiwibW8iLCJNdXRhdGlvbk9ic2VydmVyIiwibWF5YmVIaWRlTW9kYWwiLCJvYnNlcnZlIiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZUZpbHRlciIsInJlbW92ZWQiLCJjYiIsImRvd25ncmFkZU1vZGFsIiwidGltZW91dCIsImRlbGF5TW9kZWwiLCJ0YXJnZXQiLCJjYW5kIiwidHlwZSIsInN1YnN0ciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwibmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInNldCIsInNldE9wZW4iLCJnZXQiLCJiYWNrZHJvcF8iLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYmFja2Ryb3BDbGlja18iLCJjb250YWlucyIsInN0eWxlIiwiekluZGV4IiwidG9wIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZGlhbG9nUG9seWZpbGwiLCJkbSIsInJlbW92ZURpYWxvZyIsInZhbHVlIiwicmVtb3ZlQXR0cmlidXRlIiwiZSIsImZha2UiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwidGFiSW5kZXgiLCJmb2N1cyIsInJlZGlyZWN0ZWRFdmVudCIsImluaXRNb3VzZUV2ZW50Iiwic2NyZWVuWCIsInNjcmVlblkiLCJjbGllbnRYIiwiY2xpZW50WSIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJidXR0b24iLCJyZWxhdGVkVGFyZ2V0IiwiZGlzcGF0Y2hFdmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImZvY3VzXyIsInF1ZXJ5U2VsZWN0b3IiLCJvcHRzIiwicXVlcnkiLCJtYXAiLCJwdXNoIiwiam9pbiIsImFjdGl2ZUVsZW1lbnQiLCJ1cGRhdGVaSW5kZXgiLCJkaWFsb2daIiwiYmFja2Ryb3BaIiwiRXJyb3IiLCJvcGVuIiwicHVzaERpYWxvZyIsImNvbnNvbGUiLCJ3YXJuIiwibmVlZHNDZW50ZXJpbmciLCJyZXBvc2l0aW9uIiwibmV4dFNpYmxpbmciLCJvcHRfcmV0dXJuVmFsdWUiLCJjbG9zZUV2ZW50IiwiZWxlbWVudCIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInRvcFZhbHVlIiwiaW5uZXJIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJNYXRoIiwibWF4IiwiaXNJbmxpbmVQb3NpdGlvblNldEJ5U3R5bGVzaGVldCIsInN0eWxlU2hlZXRzIiwic3R5bGVTaGVldCIsImNzc1J1bGVzIiwiaiIsInJ1bGUiLCJzZWxlY3RlZE5vZGVzIiwicXVlcnlTZWxlY3RvckFsbCIsInNlbGVjdG9yVGV4dCIsImNzc1RvcCIsImdldFByb3BlcnR5VmFsdWUiLCJjc3NCb3R0b20iLCJjb21wdXRlZFN0eWxlIiwiYm90dG9tIiwiZm9yY2VSZWdpc3RlckRpYWxvZyIsIkhUTUxEaWFsb2dFbGVtZW50IiwicmVnaXN0ZXJEaWFsb2ciLCJEaWFsb2dNYW5hZ2VyIiwicGVuZGluZ0RpYWxvZ1N0YWNrIiwiY2hlY2tET00iLCJjaGVja0RPTV8iLCJvdmVybGF5IiwiZm9yd2FyZFRhYl8iLCJoYW5kbGVLZXlfIiwiaGFuZGxlRm9jdXNfIiwiekluZGV4TG93XyIsInpJbmRleEhpZ2hfIiwibW9fIiwicmVjb3JkcyIsInJlYyIsImMiLCJyZW1vdmVkTm9kZXMiLCJFbGVtZW50IiwiY29uY2F0IiwiYmxvY2tEb2N1bWVudCIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJ1bmJsb2NrRG9jdW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzY29ubmVjdCIsInVwZGF0ZVN0YWNraW5nIiwiZHBpIiwibGFzdCIsInAiLCJhcHBlbmRDaGlsZCIsImNvbnRhaW5lZEJ5VG9wRGlhbG9nXyIsImNhbmRpZGF0ZSIsInByZXZlbnREZWZhdWx0IiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJOb2RlIiwiRE9DVU1FTlRfUE9TSVRJT05fUFJFQ0VESU5HIiwia2V5Q29kZSIsImNhbmNlbEV2ZW50IiwiY2xvbmUiLCJzbGljZSIsImluZGV4T2YiLCJhbGxvd2VkIiwidW5zaGlmdCIsImluZGV4Iiwic3BsaWNlIiwiZm9ybVN1Ym1pdHRlciIsInVzZVZhbHVlIiwicmVwbGFjZW1lbnRGb3JtU3VibWl0IiwibmF0aXZlRm9ybVN1Ym1pdCIsImNhbGwiLCJ0ZXN0Rm9ybSIsIm1ldGhvZCIsIm1ldGhvZERlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJIVE1MRm9ybUVsZW1lbnQiLCJyZWFsR2V0IiwicmVhbFNldCIsInYiLCJkZWZhdWx0UHJldmVudGVkIiwiZm9ybSIsInZhbGlkIiwi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QixDQUNBLElBQUl2TCxDQUFDLElBQUlBLENBQUMsQ0FBQ3FNLElBQUYsS0FBV0EsSUFBcEIsRUFBMEI7QUFDeEI3SyxRQUFBQSxNQUFNLENBQUNRLEtBQVAsQ0FBYXFDLGNBQWMsQ0FBQ21ILFFBQWYsSUFBMkJ4TCxDQUFDLENBQUN3RSxLQUExQztBQUNELE9BRkQsTUFFTztBQUNMaEQsUUFBQUEsTUFBTSxDQUFDUSxLQUFQO0FBQ0Q7QUFDRHFDLE1BQUFBLGNBQWMsQ0FBQ2tILGFBQWYsR0FBK0IsSUFBL0I7QUFDRCxLQWpCRCxFQWlCRyxJQWpCSDtBQWtCRDs7QUFFRGxILEVBQUFBLGNBQWMsQ0FBQyxxQkFBRCxDQUFkLEdBQXdDQSxjQUFjLENBQUNvRSxtQkFBdkQ7QUFDQXBFLEVBQUFBLGNBQWMsQ0FBQyxnQkFBRCxDQUFkLEdBQW1DQSxjQUFjLENBQUNzRSxjQUFsRDs7QUFFQSxNQUFJLE9BQU8rRCxNQUFQLEtBQWtCLFVBQWxCLElBQWdDLFNBQVNBLE1BQTdDLEVBQXFEO0FBQ25EO0FBQ0FBLElBQUFBLE1BQU0sQ0FBQyxZQUFXLENBQUUsT0FBT3JJLGNBQVAsQ0FBd0IsQ0FBdEMsQ0FBTjtBQUNELEdBSEQsTUFHTyxJQUFJLFFBQU9zSSxNQUFQLHlDQUFPQSxNQUFQLE9BQWtCLFFBQWxCLElBQThCLFFBQU9BLE1BQU0sQ0FBQyxTQUFELENBQWIsTUFBNkIsUUFBL0QsRUFBeUU7QUFDOUU7QUFDQUEsSUFBQUEsTUFBTSxDQUFDLFNBQUQsQ0FBTixHQUFvQnRJLGNBQXBCO0FBQ0QsR0FITSxNQUdBO0FBQ0w7QUFDQXJGLElBQUFBLE1BQU0sQ0FBQyxnQkFBRCxDQUFOLEdBQTJCcUYsY0FBM0I7QUFDRDtBQUNGLENBaHVCRDtBQWl1QkEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSAqL1xyXG4oZnVuY3Rpb24oKSB7XHJcblxyXG4gIC8vIG5iLiBUaGlzIGlzIGZvciBJRTEwIGFuZCBsb3dlciBfb25seV8uXHJcbiAgdmFyIHN1cHBvcnRDdXN0b21FdmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDtcclxuICBpZiAoIXN1cHBvcnRDdXN0b21FdmVudCB8fCB0eXBlb2Ygc3VwcG9ydEN1c3RvbUV2ZW50ID09PSAnb2JqZWN0Jykge1xyXG4gICAgc3VwcG9ydEN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnQsIHgpIHtcclxuICAgICAgeCA9IHggfHwge307XHJcbiAgICAgIHZhciBldiA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xyXG4gICAgICBldi5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsICEheC5idWJibGVzLCAhIXguY2FuY2VsYWJsZSwgeC5kZXRhaWwgfHwgbnVsbCk7XHJcbiAgICAgIHJldHVybiBldjtcclxuICAgIH07XHJcbiAgICBzdXBwb3J0Q3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgdG8gY2hlY2sgZm9yIHN0YWNraW5nIGNvbnRleHRcclxuICAgKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIHRoaXMgZWwgb3IgaXRzIHBhcmVudHMgY3JlYXRlcyBhIHN0YWNraW5nIGNvbnRleHRcclxuICAgKi9cclxuICBmdW5jdGlvbiBjcmVhdGVzU3RhY2tpbmdDb250ZXh0KGVsKSB7XHJcbiAgICB3aGlsZSAoZWwgJiYgZWwgIT09IGRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgdmFyIHMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XHJcbiAgICAgIHZhciBpbnZhbGlkID0gZnVuY3Rpb24oaywgb2spIHtcclxuICAgICAgICByZXR1cm4gIShzW2tdID09PSB1bmRlZmluZWQgfHwgc1trXSA9PT0gb2spO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzLm9wYWNpdHkgPCAxIHx8XHJcbiAgICAgICAgICBpbnZhbGlkKCd6SW5kZXgnLCAnYXV0bycpIHx8XHJcbiAgICAgICAgICBpbnZhbGlkKCd0cmFuc2Zvcm0nLCAnbm9uZScpIHx8XHJcbiAgICAgICAgICBpbnZhbGlkKCdtaXhCbGVuZE1vZGUnLCAnbm9ybWFsJykgfHxcclxuICAgICAgICAgIGludmFsaWQoJ2ZpbHRlcicsICdub25lJykgfHxcclxuICAgICAgICAgIGludmFsaWQoJ3BlcnNwZWN0aXZlJywgJ25vbmUnKSB8fFxyXG4gICAgICAgICAgc1snaXNvbGF0aW9uJ10gPT09ICdpc29sYXRlJyB8fFxyXG4gICAgICAgICAgcy5wb3NpdGlvbiA9PT0gJ2ZpeGVkJyB8fFxyXG4gICAgICAgICAgcy53ZWJraXRPdmVyZmxvd1Njcm9sbGluZyA9PT0gJ3RvdWNoJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZpbmRzIHRoZSBuZWFyZXN0IDxkaWFsb2c+IGZyb20gdGhlIHBhc3NlZCBlbGVtZW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbCB0byBzZWFyY2ggZnJvbVxyXG4gICAqIEByZXR1cm4ge0hUTUxEaWFsb2dFbGVtZW50fSBkaWFsb2cgZm91bmRcclxuICAgKi9cclxuICBmdW5jdGlvbiBmaW5kTmVhcmVzdERpYWxvZyhlbCkge1xyXG4gICAgd2hpbGUgKGVsKSB7XHJcbiAgICAgIGlmIChlbC5sb2NhbE5hbWUgPT09ICdkaWFsb2cnKSB7XHJcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTERpYWxvZ0VsZW1lbnR9ICovIChlbCk7XHJcbiAgICAgIH1cclxuICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCbHVyIHRoZSBzcGVjaWZpZWQgZWxlbWVudCwgYXMgbG9uZyBhcyBpdCdzIG5vdCB0aGUgSFRNTCBib2R5IGVsZW1lbnQuXHJcbiAgICogVGhpcyB3b3JrcyBhcm91bmQgYW4gSUU5LzEwIGJ1ZyAtIGJsdXJyaW5nIHRoZSBib2R5IGNhdXNlcyBXaW5kb3dzIHRvXHJcbiAgICogYmx1ciB0aGUgd2hvbGUgYXBwbGljYXRpb24uXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsIHRvIGJsdXJcclxuICAgKi9cclxuICBmdW5jdGlvbiBzYWZlQmx1cihlbCkge1xyXG4gICAgaWYgKGVsICYmIGVsLmJsdXIgJiYgZWwgIT09IGRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgZWwuYmx1cigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHshTm9kZUxpc3R9IG5vZGVMaXN0IHRvIHNlYXJjaFxyXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSB0byBmaW5kXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciBub2RlIGlzIGluc2lkZSBub2RlTGlzdFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGluTm9kZUxpc3Qobm9kZUxpc3QsIG5vZGUpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyArK2kpIHtcclxuICAgICAgaWYgKG5vZGVMaXN0W2ldID09PSBub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7SFRNTEZvcm1FbGVtZW50fSBlbCB0byBjaGVja1xyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgdGhpcyBmb3JtIGhhcyBtZXRob2Q9XCJkaWFsb2dcIlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGlzRm9ybU1ldGhvZERpYWxvZyhlbCkge1xyXG4gICAgaWYgKCFlbCB8fCAhZWwuaGFzQXR0cmlidXRlKCdtZXRob2QnKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKCdtZXRob2QnKS50b0xvd2VyQ2FzZSgpID09PSAnZGlhbG9nJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7IUhUTUxEaWFsb2dFbGVtZW50fSBkaWFsb2cgdG8gdXBncmFkZVxyXG4gICAqIEBjb25zdHJ1Y3RvclxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGRpYWxvZ1BvbHlmaWxsSW5mbyhkaWFsb2cpIHtcclxuICAgIHRoaXMuZGlhbG9nXyA9IGRpYWxvZztcclxuICAgIHRoaXMucmVwbGFjZWRTdHlsZVRvcF8gPSBmYWxzZTtcclxuICAgIHRoaXMub3BlbkFzTW9kYWxfID0gZmFsc2U7XHJcblxyXG4gICAgLy8gU2V0IGExMXkgcm9sZS4gQnJvd3NlcnMgdGhhdCBzdXBwb3J0IGRpYWxvZyBpbXBsaWNpdGx5IGtub3cgdGhpcyBhbHJlYWR5LlxyXG4gICAgaWYgKCFkaWFsb2cuaGFzQXR0cmlidXRlKCdyb2xlJykpIHtcclxuICAgICAgZGlhbG9nLnNldEF0dHJpYnV0ZSgncm9sZScsICdkaWFsb2cnKTtcclxuICAgIH1cclxuXHJcbiAgICBkaWFsb2cuc2hvdyA9IHRoaXMuc2hvdy5iaW5kKHRoaXMpO1xyXG4gICAgZGlhbG9nLnNob3dNb2RhbCA9IHRoaXMuc2hvd01vZGFsLmJpbmQodGhpcyk7XHJcbiAgICBkaWFsb2cuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcblxyXG4gICAgaWYgKCEoJ3JldHVyblZhbHVlJyBpbiBkaWFsb2cpKSB7XHJcbiAgICAgIGRpYWxvZy5yZXR1cm5WYWx1ZSA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgnTXV0YXRpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XHJcbiAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMubWF5YmVIaWRlTW9kYWwuYmluZCh0aGlzKSk7XHJcbiAgICAgIG1vLm9ic2VydmUoZGlhbG9nLCB7YXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ29wZW4nXX0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSUUxMCBhbmQgYmVsb3cgc3VwcG9ydC4gTm90ZSB0aGF0IERPTU5vZGVSZW1vdmVkIGV0YyBmaXJlIF9iZWZvcmVfIHJlbW92YWwuIFRoZXkgYWxzb1xyXG4gICAgICAvLyBzZWVtIHRvIGZpcmUgZXZlbiBpZiB0aGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBhcyBwYXJ0IG9mIGEgcGFyZW50IHJlbW92YWwuIFVzZSB0aGUgcmVtb3ZlZFxyXG4gICAgICAvLyBldmVudHMgdG8gZm9yY2UgZG93bmdyYWRlICh1c2VmdWwgaWYgcmVtb3ZlZC9pbW1lZGlhdGVseSBhZGRlZCkuXHJcbiAgICAgIHZhciByZW1vdmVkID0gZmFsc2U7XHJcbiAgICAgIHZhciBjYiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJlbW92ZWQgPyB0aGlzLmRvd25ncmFkZU1vZGFsKCkgOiB0aGlzLm1heWJlSGlkZU1vZGFsKCk7XHJcbiAgICAgICAgcmVtb3ZlZCA9IGZhbHNlO1xyXG4gICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgIHZhciB0aW1lb3V0O1xyXG4gICAgICB2YXIgZGVsYXlNb2RlbCA9IGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgaWYgKGV2LnRhcmdldCAhPT0gZGlhbG9nKSB7IHJldHVybjsgfSAgLy8gbm90IGZvciBhIGNoaWxkIGVsZW1lbnRcclxuICAgICAgICB2YXIgY2FuZCA9ICdET01Ob2RlUmVtb3ZlZCc7XHJcbiAgICAgICAgcmVtb3ZlZCB8PSAoZXYudHlwZS5zdWJzdHIoMCwgY2FuZC5sZW5ndGgpID09PSBjYW5kKTtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChjYiwgMCk7XHJcbiAgICAgIH07XHJcbiAgICAgIFsnRE9NQXR0ck1vZGlmaWVkJywgJ0RPTU5vZGVSZW1vdmVkJywgJ0RPTU5vZGVSZW1vdmVkRnJvbURvY3VtZW50J10uZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZGVsYXlNb2RlbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gTm90ZSB0aGF0IHRoZSBET00gaXMgb2JzZXJ2ZWQgaW5zaWRlIERpYWxvZ01hbmFnZXIgd2hpbGUgYW55IGRpYWxvZ1xyXG4gICAgLy8gaXMgYmVpbmcgZGlzcGxheWVkIGFzIGEgbW9kYWwsIHRvIGNhdGNoIG1vZGFsIHJlbW92YWwgZnJvbSB0aGUgRE9NLlxyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkaWFsb2csICdvcGVuJywge1xyXG4gICAgICBzZXQ6IHRoaXMuc2V0T3Blbi5iaW5kKHRoaXMpLFxyXG4gICAgICBnZXQ6IGRpYWxvZy5oYXNBdHRyaWJ1dGUuYmluZChkaWFsb2csICdvcGVuJylcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYmFja2Ryb3BfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLmJhY2tkcm9wXy5jbGFzc05hbWUgPSAnYmFja2Ryb3AnO1xyXG4gICAgdGhpcy5iYWNrZHJvcF8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmJhY2tkcm9wQ2xpY2tfLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgZGlhbG9nUG9seWZpbGxJbmZvLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgICBnZXQgZGlhbG9nKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5kaWFsb2dfO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1heWJlIHJlbW92ZSB0aGlzIGRpYWxvZyBmcm9tIHRoZSBtb2RhbCB0b3AgbGF5ZXIuIFRoaXMgaXMgY2FsbGVkIHdoZW5cclxuICAgICAqIGEgbW9kYWwgZGlhbG9nIG1heSBubyBsb25nZXIgYmUgdGVuYWJsZSwgZS5nLiwgd2hlbiB0aGUgZGlhbG9nIGlzIG5vXHJcbiAgICAgKiBsb25nZXIgb3BlbiBvciBpcyBubyBsb25nZXIgcGFydCBvZiB0aGUgRE9NLlxyXG4gICAgICovXHJcbiAgICBtYXliZUhpZGVNb2RhbDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICh0aGlzLmRpYWxvZ18uaGFzQXR0cmlidXRlKCdvcGVuJykgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmRpYWxvZ18pKSB7IHJldHVybjsgfVxyXG4gICAgICB0aGlzLmRvd25ncmFkZU1vZGFsKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIHRoaXMgZGlhbG9nIGZyb20gdGhlIG1vZGFsIHRvcCBsYXllciwgbGVhdmluZyBpdCBhcyBhIG5vbi1tb2RhbC5cclxuICAgICAqL1xyXG4gICAgZG93bmdyYWRlTW9kYWw6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoIXRoaXMub3BlbkFzTW9kYWxfKSB7IHJldHVybjsgfVxyXG4gICAgICB0aGlzLm9wZW5Bc01vZGFsXyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmRpYWxvZ18uc3R5bGUuekluZGV4ID0gJyc7XHJcblxyXG4gICAgICAvLyBUaGlzIHdvbid0IG1hdGNoIHRoZSBuYXRpdmUgPGRpYWxvZz4gZXhhY3RseSBiZWNhdXNlIGlmIHRoZSB1c2VyIHNldCB0b3Agb24gYSBjZW50ZXJlZFxyXG4gICAgICAvLyBwb2x5ZmlsbCBkaWFsb2csIHRoYXQgdG9wIGdldHMgdGhyb3duIGF3YXkgd2hlbiB0aGUgZGlhbG9nIGlzIGNsb3NlZC4gTm90IHN1cmUgaXQnc1xyXG4gICAgICAvLyBwb3NzaWJsZSB0byBwb2x5ZmlsbCB0aGlzIHBlcmZlY3RseS5cclxuICAgICAgaWYgKHRoaXMucmVwbGFjZWRTdHlsZVRvcF8pIHtcclxuICAgICAgICB0aGlzLmRpYWxvZ18uc3R5bGUudG9wID0gJyc7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFN0eWxlVG9wXyA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDbGVhciB0aGUgYmFja2Ryb3AgYW5kIHJlbW92ZSBmcm9tIHRoZSBtYW5hZ2VyLlxyXG4gICAgICB0aGlzLmJhY2tkcm9wXy5wYXJlbnROb2RlICYmIHRoaXMuYmFja2Ryb3BfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5iYWNrZHJvcF8pO1xyXG4gICAgICBkaWFsb2dQb2x5ZmlsbC5kbS5yZW1vdmVEaWFsb2codGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZSB3aGV0aGVyIHRvIG9wZW4gb3IgY2xvc2UgdGhpcyBkaWFsb2dcclxuICAgICAqL1xyXG4gICAgc2V0T3BlbjogZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dfLmhhc0F0dHJpYnV0ZSgnb3BlbicpIHx8IHRoaXMuZGlhbG9nXy5zZXRBdHRyaWJ1dGUoJ29wZW4nLCAnJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dfLnJlbW92ZUF0dHJpYnV0ZSgnb3BlbicpO1xyXG4gICAgICAgIHRoaXMubWF5YmVIaWRlTW9kYWwoKTsgIC8vIG5iLiByZWR1bmRhbnQgd2l0aCBNdXRhdGlvbk9ic2VydmVyXHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIGNsaWNrcyBvbiB0aGUgZmFrZSAuYmFja2Ryb3AgZWxlbWVudCwgcmVkaXJlY3RpbmcgdGhlbSBhcyBpZlxyXG4gICAgICogdGhleSB3ZXJlIG9uIHRoZSBkaWFsb2cgaXRzZWxmLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7IUV2ZW50fSBlIHRvIHJlZGlyZWN0XHJcbiAgICAgKi9cclxuICAgIGJhY2tkcm9wQ2xpY2tfOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmICghdGhpcy5kaWFsb2dfLmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xyXG4gICAgICAgIC8vIENsaWNraW5nIG9uIHRoZSBiYWNrZHJvcCBzaG91bGQgbW92ZSB0aGUgaW1wbGljaXQgY3Vyc29yLCBldmVuIGlmIGRpYWxvZyBjYW5ub3QgYmVcclxuICAgICAgICAvLyBmb2N1c2VkLiBDcmVhdGUgYSBmYWtlIHRoaW5nIHRvIGZvY3VzIG9uLiBJZiB0aGUgYmFja2Ryb3Agd2FzIF9iZWZvcmVfIHRoZSBkaWFsb2csIHRoaXNcclxuICAgICAgICAvLyB3b3VsZCBub3QgYmUgbmVlZGVkIC0gY2xpY2tzIHdvdWxkIG1vdmUgdGhlIGltcGxpY2l0IGN1cnNvciB0aGVyZS5cclxuICAgICAgICB2YXIgZmFrZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nXy5pbnNlcnRCZWZvcmUoZmFrZSwgdGhpcy5kaWFsb2dfLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIGZha2UudGFiSW5kZXggPSAtMTtcclxuICAgICAgICBmYWtlLmZvY3VzKCk7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dfLnJlbW92ZUNoaWxkKGZha2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGlhbG9nXy5mb2N1cygpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgcmVkaXJlY3RlZEV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJyk7XHJcbiAgICAgIHJlZGlyZWN0ZWRFdmVudC5pbml0TW91c2VFdmVudChlLnR5cGUsIGUuYnViYmxlcywgZS5jYW5jZWxhYmxlLCB3aW5kb3csXHJcbiAgICAgICAgICBlLmRldGFpbCwgZS5zY3JlZW5YLCBlLnNjcmVlblksIGUuY2xpZW50WCwgZS5jbGllbnRZLCBlLmN0cmxLZXksXHJcbiAgICAgICAgICBlLmFsdEtleSwgZS5zaGlmdEtleSwgZS5tZXRhS2V5LCBlLmJ1dHRvbiwgZS5yZWxhdGVkVGFyZ2V0KTtcclxuICAgICAgdGhpcy5kaWFsb2dfLmRpc3BhdGNoRXZlbnQocmVkaXJlY3RlZEV2ZW50KTtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb2N1c2VzIG9uIHRoZSBmaXJzdCBmb2N1c2FibGUgZWxlbWVudCB3aXRoaW4gdGhlIGRpYWxvZy4gVGhpcyB3aWxsIGFsd2F5cyBibHVyIHRoZSBjdXJyZW50XHJcbiAgICAgKiBmb2N1cywgZXZlbiBpZiBub3RoaW5nIHdpdGhpbiB0aGUgZGlhbG9nIGlzIGZvdW5kLlxyXG4gICAgICovXHJcbiAgICBmb2N1c186IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBGaW5kIGVsZW1lbnQgd2l0aCBgYXV0b2ZvY3VzYCBhdHRyaWJ1dGUsIG9yIGZhbGwgYmFjayB0byB0aGUgZmlyc3QgZm9ybS90YWJpbmRleCBjb250cm9sLlxyXG4gICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5kaWFsb2dfLnF1ZXJ5U2VsZWN0b3IoJ1thdXRvZm9jdXNdOm5vdChbZGlzYWJsZWRdKScpO1xyXG4gICAgICBpZiAoIXRhcmdldCAmJiB0aGlzLmRpYWxvZ18udGFiSW5kZXggPj0gMCkge1xyXG4gICAgICAgIHRhcmdldCA9IHRoaXMuZGlhbG9nXztcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRhcmdldCkge1xyXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIGlzICdhbnkgZm9jdXNhYmxlIGFyZWEnLiBUaGlzIGxpc3QgaXMgcHJvYmFibHkgbm90IGV4aGF1c3RpdmUsIGJ1dCB0aGVcclxuICAgICAgICAvLyBhbHRlcm5hdGl2ZSBpbnZvbHZlcyBzdGVwcGluZyB0aHJvdWdoIGFuZCB0cnlpbmcgdG8gZm9jdXMgZXZlcnl0aGluZy5cclxuICAgICAgICB2YXIgb3B0cyA9IFsnYnV0dG9uJywgJ2lucHV0JywgJ2tleWdlbicsICdzZWxlY3QnLCAndGV4dGFyZWEnXTtcclxuICAgICAgICB2YXIgcXVlcnkgPSBvcHRzLm1hcChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgcmV0dXJuIGVsICsgJzpub3QoW2Rpc2FibGVkXSknO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFRPRE8oc2FtdGhvcik6IHRhYmluZGV4IHZhbHVlcyB0aGF0IGFyZSBub3QgbnVtZXJpYyBhcmUgbm90IGZvY3VzYWJsZS5cclxuICAgICAgICBxdWVyeS5wdXNoKCdbdGFiaW5kZXhdOm5vdChbZGlzYWJsZWRdKTpub3QoW3RhYmluZGV4PVwiXCJdKScpOyAgLy8gdGFiaW5kZXggIT0gXCJcIiwgbm90IGRpc2FibGVkXHJcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5kaWFsb2dfLnF1ZXJ5U2VsZWN0b3IocXVlcnkuam9pbignLCAnKSk7XHJcbiAgICAgIH1cclxuICAgICAgc2FmZUJsdXIoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XHJcbiAgICAgIHRhcmdldCAmJiB0YXJnZXQuZm9jdXMoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB6SW5kZXggZm9yIHRoZSBiYWNrZHJvcCBhbmQgZGlhbG9nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaWFsb2daXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmFja2Ryb3BaXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVpJbmRleDogZnVuY3Rpb24oZGlhbG9nWiwgYmFja2Ryb3BaKSB7XHJcbiAgICAgIGlmIChkaWFsb2daIDwgYmFja2Ryb3BaKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkaWFsb2daIHNob3VsZCBuZXZlciBiZSA8IGJhY2tkcm9wWicpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGlhbG9nXy5zdHlsZS56SW5kZXggPSBkaWFsb2daO1xyXG4gICAgICB0aGlzLmJhY2tkcm9wXy5zdHlsZS56SW5kZXggPSBiYWNrZHJvcFo7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvd3MgdGhlIGRpYWxvZy4gSWYgdGhlIGRpYWxvZyBpcyBhbHJlYWR5IG9wZW4sIHRoaXMgZG9lcyBub3RoaW5nLlxyXG4gICAgICovXHJcbiAgICBzaG93OiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCF0aGlzLmRpYWxvZ18ub3Blbikge1xyXG4gICAgICAgIHRoaXMuc2V0T3Blbih0cnVlKTtcclxuICAgICAgICB0aGlzLmZvY3VzXygpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyB0aGlzIGRpYWxvZyBtb2RhbGx5LlxyXG4gICAgICovXHJcbiAgICBzaG93TW9kYWw6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAodGhpcy5kaWFsb2dfLmhhc0F0dHJpYnV0ZSgnb3BlbicpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBcXCdzaG93TW9kYWxcXCcgb24gZGlhbG9nOiBUaGUgZWxlbWVudCBpcyBhbHJlYWR5IG9wZW4sIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIG9wZW5lZCBtb2RhbGx5LicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghZG9jdW1lbnQuYm9keS5jb250YWlucyh0aGlzLmRpYWxvZ18pKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBcXCdzaG93TW9kYWxcXCcgb24gZGlhbG9nOiBUaGUgZWxlbWVudCBpcyBub3QgaW4gYSBEb2N1bWVudC4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWRpYWxvZ1BvbHlmaWxsLmRtLnB1c2hEaWFsb2codGhpcykpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIFxcJ3Nob3dNb2RhbFxcJyBvbiBkaWFsb2c6IFRoZXJlIGFyZSB0b28gbWFueSBvcGVuIG1vZGFsIGRpYWxvZ3MuJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChjcmVhdGVzU3RhY2tpbmdDb250ZXh0KHRoaXMuZGlhbG9nXy5wYXJlbnRFbGVtZW50KSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQSBkaWFsb2cgaXMgYmVpbmcgc2hvd24gaW5zaWRlIGEgc3RhY2tpbmcgY29udGV4dC4gJyArXHJcbiAgICAgICAgICAgICdUaGlzIG1heSBjYXVzZSBpdCB0byBiZSB1bnVzYWJsZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGlzIGxpbms6ICcgK1xyXG4gICAgICAgICAgICAnaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNocm9tZS9kaWFsb2ctcG9seWZpbGwvI3N0YWNraW5nLWNvbnRleHQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zZXRPcGVuKHRydWUpO1xyXG4gICAgICB0aGlzLm9wZW5Bc01vZGFsXyA9IHRydWU7XHJcblxyXG4gICAgICAvLyBPcHRpb25hbGx5IGNlbnRlciB2ZXJ0aWNhbGx5LCByZWxhdGl2ZSB0byB0aGUgY3VycmVudCB2aWV3cG9ydC5cclxuICAgICAgaWYgKGRpYWxvZ1BvbHlmaWxsLm5lZWRzQ2VudGVyaW5nKHRoaXMuZGlhbG9nXykpIHtcclxuICAgICAgICBkaWFsb2dQb2x5ZmlsbC5yZXBvc2l0aW9uKHRoaXMuZGlhbG9nXyk7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFN0eWxlVG9wXyA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFN0eWxlVG9wXyA9IGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJbnNlcnQgYmFja2Ryb3AuXHJcbiAgICAgIHRoaXMuZGlhbG9nXy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tkcm9wXywgdGhpcy5kaWFsb2dfLm5leHRTaWJsaW5nKTtcclxuXHJcbiAgICAgIC8vIEZvY3VzIG9uIHdoYXRldmVyIGluc2lkZSB0aGUgZGlhbG9nLlxyXG4gICAgICB0aGlzLmZvY3VzXygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENsb3NlcyB0aGlzIEhUTUxEaWFsb2dFbGVtZW50LiBUaGlzIGlzIG9wdGlvbmFsIHZzIGNsZWFyaW5nIHRoZSBvcGVuXHJcbiAgICAgKiBhdHRyaWJ1dGUsIGhvd2V2ZXIgdGhpcyBmaXJlcyBhICdjbG9zZScgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfcmV0dXJuVmFsdWUgdG8gdXNlIGFzIHRoZSByZXR1cm5WYWx1ZVxyXG4gICAgICovXHJcbiAgICBjbG9zZTogZnVuY3Rpb24ob3B0X3JldHVyblZhbHVlKSB7XHJcbiAgICAgIGlmICghdGhpcy5kaWFsb2dfLmhhc0F0dHJpYnV0ZSgnb3BlbicpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBcXCdjbG9zZVxcJyBvbiBkaWFsb2c6IFRoZSBlbGVtZW50IGRvZXMgbm90IGhhdmUgYW4gXFwnb3BlblxcJyBhdHRyaWJ1dGUsIGFuZCB0aGVyZWZvcmUgY2Fubm90IGJlIGNsb3NlZC4nKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNldE9wZW4oZmFsc2UpO1xyXG5cclxuICAgICAgLy8gTGVhdmUgcmV0dXJuVmFsdWUgdW50b3VjaGVkIGluIGNhc2UgaXQgd2FzIHNldCBkaXJlY3RseSBvbiB0aGUgZWxlbWVudFxyXG4gICAgICBpZiAob3B0X3JldHVyblZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLmRpYWxvZ18ucmV0dXJuVmFsdWUgPSBvcHRfcmV0dXJuVmFsdWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyaWdnZXJpbmcgXCJjbG9zZVwiIGV2ZW50IGZvciBhbnkgYXR0YWNoZWQgbGlzdGVuZXJzIG9uIHRoZSA8ZGlhbG9nPi5cclxuICAgICAgdmFyIGNsb3NlRXZlbnQgPSBuZXcgc3VwcG9ydEN1c3RvbUV2ZW50KCdjbG9zZScsIHtcclxuICAgICAgICBidWJibGVzOiBmYWxzZSxcclxuICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5kaWFsb2dfLmRpc3BhdGNoRXZlbnQoY2xvc2VFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gIH07XHJcblxyXG4gIHZhciBkaWFsb2dQb2x5ZmlsbCA9IHt9O1xyXG5cclxuICBkaWFsb2dQb2x5ZmlsbC5yZXBvc2l0aW9uID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgdmFyIHNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICB2YXIgdG9wVmFsdWUgPSBzY3JvbGxUb3AgKyAod2luZG93LmlubmVySGVpZ2h0IC0gZWxlbWVudC5vZmZzZXRIZWlnaHQpIC8gMjtcclxuICAgIGVsZW1lbnQuc3R5bGUudG9wID0gTWF0aC5tYXgoc2Nyb2xsVG9wLCB0b3BWYWx1ZSkgKyAncHgnO1xyXG4gIH07XHJcblxyXG4gIGRpYWxvZ1BvbHlmaWxsLmlzSW5saW5lUG9zaXRpb25TZXRCeVN0eWxlc2hlZXQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHZhciBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV07XHJcbiAgICAgIHZhciBjc3NSdWxlcyA9IG51bGw7XHJcbiAgICAgIC8vIFNvbWUgYnJvd3NlcnMgdGhyb3cgb24gY3NzUnVsZXMuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY3NzUnVsZXMgPSBzdHlsZVNoZWV0LmNzc1J1bGVzO1xyXG4gICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgICBpZiAoIWNzc1J1bGVzKSB7IGNvbnRpbnVlOyB9XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3NzUnVsZXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICB2YXIgcnVsZSA9IGNzc1J1bGVzW2pdO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZE5vZGVzID0gbnVsbDtcclxuICAgICAgICAvLyBJZ25vcmUgZXJyb3JzIG9uIGludmFsaWQgc2VsZWN0b3IgdGV4dHMuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHNlbGVjdGVkTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHJ1bGUuc2VsZWN0b3JUZXh0KTtcclxuICAgICAgICB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZE5vZGVzIHx8ICFpbk5vZGVMaXN0KHNlbGVjdGVkTm9kZXMsIGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNzc1RvcCA9IHJ1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndG9wJyk7XHJcbiAgICAgICAgdmFyIGNzc0JvdHRvbSA9IHJ1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYm90dG9tJyk7XHJcbiAgICAgICAgaWYgKChjc3NUb3AgJiYgY3NzVG9wICE9PSAnYXV0bycpIHx8IChjc3NCb3R0b20gJiYgY3NzQm90dG9tICE9PSAnYXV0bycpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9O1xyXG5cclxuICBkaWFsb2dQb2x5ZmlsbC5uZWVkc0NlbnRlcmluZyA9IGZ1bmN0aW9uKGRpYWxvZykge1xyXG4gICAgdmFyIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkaWFsb2cpO1xyXG4gICAgaWYgKGNvbXB1dGVkU3R5bGUucG9zaXRpb24gIT09ICdhYnNvbHV0ZScpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFdlIG11c3QgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHRvcC9ib3R0b20gc3BlY2lmaWVkIHZhbHVlIGlzIG5vbi1hdXRvLiAgSW5cclxuICAgIC8vIFdlYktpdC9CbGluaywgY2hlY2tpbmcgY29tcHV0ZWRTdHlsZS50b3AgPT0gJ2F1dG8nIGlzIHN1ZmZpY2llbnQsIGJ1dFxyXG4gICAgLy8gRmlyZWZveCByZXR1cm5zIHRoZSB1c2VkIHZhbHVlLiBTbyB3ZSBkbyB0aGlzIGNyYXp5IHRoaW5nIGluc3RlYWQ6IGNoZWNrXHJcbiAgICAvLyB0aGUgaW5saW5lIHN0eWxlIGFuZCB0aGVuIGdvIHRocm91Z2ggQ1NTIHJ1bGVzLlxyXG4gICAgaWYgKChkaWFsb2cuc3R5bGUudG9wICE9PSAnYXV0bycgJiYgZGlhbG9nLnN0eWxlLnRvcCAhPT0gJycpIHx8XHJcbiAgICAgICAgKGRpYWxvZy5zdHlsZS5ib3R0b20gIT09ICdhdXRvJyAmJiBkaWFsb2cuc3R5bGUuYm90dG9tICE9PSAnJykpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICFkaWFsb2dQb2x5ZmlsbC5pc0lubGluZVBvc2l0aW9uU2V0QnlTdHlsZXNoZWV0KGRpYWxvZyk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCB0byBmb3JjZSB1cGdyYWRlXHJcbiAgICovXHJcbiAgZGlhbG9nUG9seWZpbGwuZm9yY2VSZWdpc3RlckRpYWxvZyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIGlmICh3aW5kb3cuSFRNTERpYWxvZ0VsZW1lbnQgfHwgZWxlbWVudC5zaG93TW9kYWwpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdUaGlzIGJyb3dzZXIgYWxyZWFkeSBzdXBwb3J0cyA8ZGlhbG9nPiwgdGhlIHBvbHlmaWxsICcgK1xyXG4gICAgICAgICAgJ21heSBub3Qgd29yayBjb3JyZWN0bHknLCBlbGVtZW50KTtcclxuICAgIH1cclxuICAgIGlmIChlbGVtZW50LmxvY2FsTmFtZSAhPT0gJ2RpYWxvZycpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcmVnaXN0ZXIgZGlhbG9nOiBUaGUgZWxlbWVudCBpcyBub3QgYSBkaWFsb2cuJyk7XHJcbiAgICB9XHJcbiAgICBuZXcgZGlhbG9nUG9seWZpbGxJbmZvKC8qKiBAdHlwZSB7IUhUTUxEaWFsb2dFbGVtZW50fSAqLyAoZWxlbWVudCkpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnQgdG8gdXBncmFkZSwgaWYgbmVjZXNzYXJ5XHJcbiAgICovXHJcbiAgZGlhbG9nUG9seWZpbGwucmVnaXN0ZXJEaWFsb2cgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICBpZiAoIWVsZW1lbnQuc2hvd01vZGFsKSB7XHJcbiAgICAgIGRpYWxvZ1BvbHlmaWxsLmZvcmNlUmVnaXN0ZXJEaWFsb2coZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICovXHJcbiAgZGlhbG9nUG9seWZpbGwuRGlhbG9nTWFuYWdlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLyoqIEB0eXBlIHshQXJyYXk8IWRpYWxvZ1BvbHlmaWxsSW5mbz59ICovXHJcbiAgICB0aGlzLnBlbmRpbmdEaWFsb2dTdGFjayA9IFtdO1xyXG5cclxuICAgIHZhciBjaGVja0RPTSA9IHRoaXMuY2hlY2tET01fLmJpbmQodGhpcyk7XHJcblxyXG4gICAgLy8gVGhlIG92ZXJsYXkgaXMgdXNlZCB0byBzaW11bGF0ZSBob3cgYSBtb2RhbCBkaWFsb2cgYmxvY2tzIHRoZSBkb2N1bWVudC5cclxuICAgIC8vIFRoZSBibG9ja2luZyBkaWFsb2cgaXMgcG9zaXRpb25lZCBvbiB0b3Agb2YgdGhlIG92ZXJsYXksIGFuZCB0aGUgcmVzdCBvZlxyXG4gICAgLy8gdGhlIGRpYWxvZ3Mgb24gdGhlIHBlbmRpbmcgZGlhbG9nIHN0YWNrIGFyZSBwb3NpdGlvbmVkIGJlbG93IGl0LiBJbiB0aGVcclxuICAgIC8vIGFjdHVhbCBpbXBsZW1lbnRhdGlvbiwgdGhlIG1vZGFsIGRpYWxvZyBzdGFja2luZyBpcyBjb250cm9sbGVkIGJ5IHRoZVxyXG4gICAgLy8gdG9wIGxheWVyLCB3aGVyZSB6LWluZGV4IGhhcyBubyBlZmZlY3QuXHJcbiAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMub3ZlcmxheS5jbGFzc05hbWUgPSAnX2RpYWxvZ19vdmVybGF5JztcclxuICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdGhpcy5mb3J3YXJkVGFiXyA9IHVuZGVmaW5lZDtcclxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgY2hlY2tET00oW10pOyAgLy8gc2FuaXR5LWNoZWNrIERPTVxyXG4gICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZUtleV8gPSB0aGlzLmhhbmRsZUtleV8uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaGFuZGxlRm9jdXNfID0gdGhpcy5oYW5kbGVGb2N1c18uYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLnpJbmRleExvd18gPSAxMDAwMDA7XHJcbiAgICB0aGlzLnpJbmRleEhpZ2hfID0gMTAwMDAwICsgMTUwO1xyXG5cclxuICAgIHRoaXMuZm9yd2FyZFRhYl8gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgaWYgKCdNdXRhdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcclxuICAgICAgdGhpcy5tb18gPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihyZWNvcmRzKSB7XHJcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBbXTtcclxuICAgICAgICByZWNvcmRzLmZvckVhY2goZnVuY3Rpb24ocmVjKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYzsgYyA9IHJlYy5yZW1vdmVkTm9kZXNbaV07ICsraSkge1xyXG4gICAgICAgICAgICBpZiAoIShjIGluc3RhbmNlb2YgRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjLmxvY2FsTmFtZSA9PT0gJ2RpYWxvZycpIHtcclxuICAgICAgICAgICAgICByZW1vdmVkLnB1c2goYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVtb3ZlZCA9IHJlbW92ZWQuY29uY2F0KGMucXVlcnlTZWxlY3RvckFsbCgnZGlhbG9nJykpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlbW92ZWQubGVuZ3RoICYmIGNoZWNrRE9NKHJlbW92ZWQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgb24gdGhlIGZpcnN0IG1vZGFsIGRpYWxvZyBiZWluZyBzaG93bi4gQWRkcyB0aGUgb3ZlcmxheSBhbmQgcmVsYXRlZFxyXG4gICAqIGhhbmRsZXJzLlxyXG4gICAqL1xyXG4gIGRpYWxvZ1BvbHlmaWxsLkRpYWxvZ01hbmFnZXIucHJvdG90eXBlLmJsb2NrRG9jdW1lbnQgPSBmdW5jdGlvbigpIHtcclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuaGFuZGxlRm9jdXNfLCB0cnVlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleV8pO1xyXG4gICAgdGhpcy5tb18gJiYgdGhpcy5tb18ub2JzZXJ2ZShkb2N1bWVudCwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCBvbiB0aGUgZmlyc3QgbW9kYWwgZGlhbG9nIGJlaW5nIHJlbW92ZWQsIGkuZS4sIHdoZW4gbm8gbW9yZSBtb2RhbFxyXG4gICAqIGRpYWxvZ3MgYXJlIHZpc2libGUuXHJcbiAgICovXHJcbiAgZGlhbG9nUG9seWZpbGwuRGlhbG9nTWFuYWdlci5wcm90b3R5cGUudW5ibG9ja0RvY3VtZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzXywgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlfKTtcclxuICAgIHRoaXMubW9fICYmIHRoaXMubW9fLmRpc2Nvbm5lY3QoKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGVzIHRoZSBzdGFja2luZyBvZiBhbGwga25vd24gZGlhbG9ncy5cclxuICAgKi9cclxuICBkaWFsb2dQb2x5ZmlsbC5EaWFsb2dNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVTdGFja2luZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHpJbmRleCA9IHRoaXMuekluZGV4SGlnaF87XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGRwaTsgZHBpID0gdGhpcy5wZW5kaW5nRGlhbG9nU3RhY2tbaV07ICsraSkge1xyXG4gICAgICBkcGkudXBkYXRlWkluZGV4KC0tekluZGV4LCAtLXpJbmRleCk7XHJcbiAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5vdmVybGF5LnN0eWxlLnpJbmRleCA9IC0tekluZGV4O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFrZSB0aGUgb3ZlcmxheSBhIHNpYmxpbmcgb2YgdGhlIGRpYWxvZyBpdHNlbGYuXHJcbiAgICB2YXIgbGFzdCA9IHRoaXMucGVuZGluZ0RpYWxvZ1N0YWNrWzBdO1xyXG4gICAgaWYgKGxhc3QpIHtcclxuICAgICAgdmFyIHAgPSBsYXN0LmRpYWxvZy5wYXJlbnROb2RlIHx8IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgIHAuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5vdmVybGF5LnBhcmVudE5vZGUpIHtcclxuICAgICAgdGhpcy5vdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5vdmVybGF5KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNhbmRpZGF0ZSB0byBjaGVjayBpZiBjb250YWluZWQgb3IgaXMgdGhlIHRvcC1tb3N0IG1vZGFsIGRpYWxvZ1xyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgY2FuZGlkYXRlIGlzIGNvbnRhaW5lZCBpbiB0b3AgZGlhbG9nXHJcbiAgICovXHJcbiAgZGlhbG9nUG9seWZpbGwuRGlhbG9nTWFuYWdlci5wcm90b3R5cGUuY29udGFpbmVkQnlUb3BEaWFsb2dfID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XHJcbiAgICB3aGlsZSAoY2FuZGlkYXRlID0gZmluZE5lYXJlc3REaWFsb2coY2FuZGlkYXRlKSkge1xyXG4gICAgICBmb3IgKHZhciBpID0gMCwgZHBpOyBkcGkgPSB0aGlzLnBlbmRpbmdEaWFsb2dTdGFja1tpXTsgKytpKSB7XHJcbiAgICAgICAgaWYgKGRwaS5kaWFsb2cgPT09IGNhbmRpZGF0ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIGkgPT09IDA7ICAvLyBvbmx5IHZhbGlkIGlmIHRvcC1tb3N0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGNhbmRpZGF0ZSA9IGNhbmRpZGF0ZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGRpYWxvZ1BvbHlmaWxsLkRpYWxvZ01hbmFnZXIucHJvdG90eXBlLmhhbmRsZUZvY3VzXyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5jb250YWluZWRCeVRvcERpYWxvZ18oZXZlbnQudGFyZ2V0KSkgeyByZXR1cm47IH1cclxuXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBzYWZlQmx1cigvKiogQHR5cGUge0VsZW1lbnR9ICovIChldmVudC50YXJnZXQpKTtcclxuXHJcbiAgICBpZiAodGhpcy5mb3J3YXJkVGFiXyA9PT0gdW5kZWZpbmVkKSB7IHJldHVybjsgfSAgLy8gbW92ZSBmb2N1cyBvbmx5IGZyb20gYSB0YWIga2V5XHJcblxyXG4gICAgdmFyIGRwaSA9IHRoaXMucGVuZGluZ0RpYWxvZ1N0YWNrWzBdO1xyXG4gICAgdmFyIGRpYWxvZyA9IGRwaS5kaWFsb2c7XHJcbiAgICB2YXIgcG9zaXRpb24gPSBkaWFsb2cuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZXZlbnQudGFyZ2V0KTtcclxuICAgIGlmIChwb3NpdGlvbiAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fUFJFQ0VESU5HKSB7XHJcbiAgICAgIGlmICh0aGlzLmZvcndhcmRUYWJfKSB7ICAvLyBmb3J3YXJkXHJcbiAgICAgICAgZHBpLmZvY3VzXygpO1xyXG4gICAgICB9IGVsc2UgeyAgLy8gYmFja3dhcmRzXHJcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFRPRE86IEZvY3VzIGFmdGVyIHRoZSBkaWFsb2csIGlzIGlnbm9yZWQuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH07XHJcblxyXG4gIGRpYWxvZ1BvbHlmaWxsLkRpYWxvZ01hbmFnZXIucHJvdG90eXBlLmhhbmRsZUtleV8gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgdGhpcy5mb3J3YXJkVGFiXyA9IHVuZGVmaW5lZDtcclxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAyNykge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgdmFyIGNhbmNlbEV2ZW50ID0gbmV3IHN1cHBvcnRDdXN0b21FdmVudCgnY2FuY2VsJywge1xyXG4gICAgICAgIGJ1YmJsZXM6IGZhbHNlLFxyXG4gICAgICAgIGNhbmNlbGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICAgIHZhciBkcGkgPSB0aGlzLnBlbmRpbmdEaWFsb2dTdGFja1swXTtcclxuICAgICAgaWYgKGRwaSAmJiBkcGkuZGlhbG9nLmRpc3BhdGNoRXZlbnQoY2FuY2VsRXZlbnQpKSB7XHJcbiAgICAgICAgZHBpLmRpYWxvZy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDkpIHtcclxuICAgICAgdGhpcy5mb3J3YXJkVGFiXyA9ICFldmVudC5zaGlmdEtleTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBGaW5kcyBhbmQgZG93bmdyYWRlcyBhbnkga25vd24gbW9kYWwgZGlhbG9ncyB0aGF0IGFyZSBubyBsb25nZXIgZGlzcGxheWVkLiBEaWFsb2dzIHRoYXQgYXJlXHJcbiAgICogcmVtb3ZlZCBhbmQgaW1tZWRpYXRlbHkgcmVhZGRlZCBkb24ndCBzdGF5IG1vZGFsLCB0aGV5IGJlY29tZSBub3JtYWwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0geyFBcnJheTwhSFRNTERpYWxvZ0VsZW1lbnQ+fSByZW1vdmVkIHRoYXQgaGF2ZSBkZWZpbml0ZWx5IGJlZW4gcmVtb3ZlZFxyXG4gICAqL1xyXG4gIGRpYWxvZ1BvbHlmaWxsLkRpYWxvZ01hbmFnZXIucHJvdG90eXBlLmNoZWNrRE9NXyA9IGZ1bmN0aW9uKHJlbW92ZWQpIHtcclxuICAgIC8vIFRoaXMgb3BlcmF0ZXMgb24gYSBjbG9uZSBiZWNhdXNlIGl0IG1heSBjYXVzZSBpdCB0byBjaGFuZ2UuIEVhY2ggY2hhbmdlIGFsc28gY2FsbHNcclxuICAgIC8vIHVwZGF0ZVN0YWNraW5nLCB3aGljaCBvbmx5IGFjdHVhbGx5IG5lZWRzIHRvIGhhcHBlbiBvbmNlLiBCdXQgd2hvIHJlbW92ZXMgbWFueSBtb2RhbCBkaWFsb2dzXHJcbiAgICAvLyBhdCBhIHRpbWU/IVxyXG4gICAgdmFyIGNsb25lID0gdGhpcy5wZW5kaW5nRGlhbG9nU3RhY2suc2xpY2UoKTtcclxuICAgIGNsb25lLmZvckVhY2goZnVuY3Rpb24oZHBpKSB7XHJcbiAgICAgIGlmIChyZW1vdmVkLmluZGV4T2YoZHBpLmRpYWxvZykgIT09IC0xKSB7XHJcbiAgICAgICAgZHBpLmRvd25ncmFkZU1vZGFsKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZHBpLm1heWJlSGlkZU1vZGFsKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7IWRpYWxvZ1BvbHlmaWxsSW5mb30gZHBpXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciB0aGUgZGlhbG9nIHdhcyBhbGxvd2VkXHJcbiAgICovXHJcbiAgZGlhbG9nUG9seWZpbGwuRGlhbG9nTWFuYWdlci5wcm90b3R5cGUucHVzaERpYWxvZyA9IGZ1bmN0aW9uKGRwaSkge1xyXG4gICAgdmFyIGFsbG93ZWQgPSAodGhpcy56SW5kZXhIaWdoXyAtIHRoaXMuekluZGV4TG93XykgLyAyIC0gMTtcclxuICAgIGlmICh0aGlzLnBlbmRpbmdEaWFsb2dTdGFjay5sZW5ndGggPj0gYWxsb3dlZCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wZW5kaW5nRGlhbG9nU3RhY2sudW5zaGlmdChkcGkpID09PSAxKSB7XHJcbiAgICAgIHRoaXMuYmxvY2tEb2N1bWVudCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVTdGFja2luZygpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHshZGlhbG9nUG9seWZpbGxJbmZvfSBkcGlcclxuICAgKi9cclxuICBkaWFsb2dQb2x5ZmlsbC5EaWFsb2dNYW5hZ2VyLnByb3RvdHlwZS5yZW1vdmVEaWFsb2cgPSBmdW5jdGlvbihkcGkpIHtcclxuICAgIHZhciBpbmRleCA9IHRoaXMucGVuZGluZ0RpYWxvZ1N0YWNrLmluZGV4T2YoZHBpKTtcclxuICAgIGlmIChpbmRleCA9PT0gLTEpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgdGhpcy5wZW5kaW5nRGlhbG9nU3RhY2suc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIGlmICh0aGlzLnBlbmRpbmdEaWFsb2dTdGFjay5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy51bmJsb2NrRG9jdW1lbnQoKTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlU3RhY2tpbmcoKTtcclxuICB9O1xyXG5cclxuICBkaWFsb2dQb2x5ZmlsbC5kbSA9IG5ldyBkaWFsb2dQb2x5ZmlsbC5EaWFsb2dNYW5hZ2VyKCk7XHJcbiAgZGlhbG9nUG9seWZpbGwuZm9ybVN1Ym1pdHRlciA9IG51bGw7XHJcbiAgZGlhbG9nUG9seWZpbGwudXNlVmFsdWUgPSBudWxsO1xyXG5cclxuICAvKipcclxuICAgKiBJbnN0YWxscyBnbG9iYWwgaGFuZGxlcnMsIHN1Y2ggYXMgY2xpY2sgbGlzdGVycyBhbmQgbmF0aXZlIG1ldGhvZCBvdmVycmlkZXMuIFRoZXNlIGFyZSBuZWVkZWRcclxuICAgKiBldmVuIGlmIGEgbm8gZGlhbG9nIGlzIHJlZ2lzdGVyZWQsIGFzIHRoZXkgZGVhbCB3aXRoIDxmb3JtIG1ldGhvZD1cImRpYWxvZ1wiPi5cclxuICAgKi9cclxuICBpZiAod2luZG93LkhUTUxEaWFsb2dFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIEhUTUxGb3JtRWxlbWVudCB0cmFuc2xhdGVzIG1ldGhvZD1cIkRJQUxPR1wiIGludG8gJ2dldCcsIHRoZW4gcmVwbGFjZSB0aGUgZGVzY3JpcHRvciB3aXRoXHJcbiAgICAgKiBvbmUgdGhhdCByZXR1cm5zIHRoZSBjb3JyZWN0IHZhbHVlLlxyXG4gICAgICovXHJcbiAgICB2YXIgdGVzdEZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XHJcbiAgICB0ZXN0Rm9ybS5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdkaWFsb2cnKTtcclxuICAgIGlmICh0ZXN0Rm9ybS5tZXRob2QgIT09ICdkaWFsb2cnKSB7XHJcbiAgICAgIHZhciBtZXRob2REZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLCAnbWV0aG9kJyk7XHJcbiAgICAgIGlmIChtZXRob2REZXNjcmlwdG9yKSB7XHJcbiAgICAgICAgLy8gVE9ETzogb2xkZXIgaU9TIGFuZCBvbGRlciBQaGFudG9tSlMgZmFpbCB0byByZXR1cm4gdGhlIGRlc2NyaXB0b3IgaGVyZVxyXG4gICAgICAgIHZhciByZWFsR2V0ID0gbWV0aG9kRGVzY3JpcHRvci5nZXQ7XHJcbiAgICAgICAgbWV0aG9kRGVzY3JpcHRvci5nZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChpc0Zvcm1NZXRob2REaWFsb2codGhpcykpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdkaWFsb2cnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHJlYWxHZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciByZWFsU2V0ID0gbWV0aG9kRGVzY3JpcHRvci5zZXQ7XHJcbiAgICAgICAgbWV0aG9kRGVzY3JpcHRvci5zZXQgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIHYudG9Mb3dlckNhc2UoKSA9PT0gJ2RpYWxvZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0QXR0cmlidXRlKCdtZXRob2QnLCB2KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZWFsU2V0LmNhbGwodGhpcywgdik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZSwgJ21ldGhvZCcsIG1ldGhvZERlc2NyaXB0b3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHbG9iYWwgJ2NsaWNrJyBoYW5kbGVyLCB0byBjYXB0dXJlIHRoZSA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiPiBvciA8YnV0dG9uPiBlbGVtZW50IHdoaWNoIGhhc1xyXG4gICAgICogc3VibWl0dGVkIGEgPGZvcm0gbWV0aG9kPVwiZGlhbG9nXCI+LiBOZWVkZWQgYXMgU2FmYXJpIGFuZCBvdGhlcnMgZG9uJ3QgcmVwb3J0IHRoaXMgaW5zaWRlXHJcbiAgICAgKiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LlxyXG4gICAgICovXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgIGRpYWxvZ1BvbHlmaWxsLmZvcm1TdWJtaXR0ZXIgPSBudWxsO1xyXG4gICAgICBkaWFsb2dQb2x5ZmlsbC51c2VWYWx1ZSA9IG51bGw7XHJcbiAgICAgIGlmIChldi5kZWZhdWx0UHJldmVudGVkKSB7IHJldHVybjsgfSAgLy8gZS5nLiBhIHN1Ym1pdCB3aGljaCBwcmV2ZW50cyBkZWZhdWx0IHN1Ym1pc3Npb25cclxuXHJcbiAgICAgIHZhciB0YXJnZXQgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChldi50YXJnZXQpO1xyXG4gICAgICBpZiAoIXRhcmdldCB8fCAhaXNGb3JtTWV0aG9kRGlhbG9nKHRhcmdldC5mb3JtKSkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgIHZhciB2YWxpZCA9ICh0YXJnZXQudHlwZSA9PT0gJ3N1Ym1pdCcgJiYgWydidXR0b24nLCAnaW5wdXQnXS5pbmRleE9mKHRhcmdldC5sb2NhbE5hbWUpID4gLTEpO1xyXG4gICAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgICAgaWYgKCEodGFyZ2V0LmxvY2FsTmFtZSA9PT0gJ2lucHV0JyAmJiB0YXJnZXQudHlwZSA9PT0gJ2ltYWdlJykpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgLy8gdGhpcyBpcyBhIDxpbnB1dCB0eXBlPVwiaW1hZ2VcIj4sIHdoaWNoIGNhbiBzdWJtaXQgZm9ybXNcclxuICAgICAgICBkaWFsb2dQb2x5ZmlsbC51c2VWYWx1ZSA9IGV2Lm9mZnNldFggKyAnLCcgKyBldi5vZmZzZXRZO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgZGlhbG9nID0gZmluZE5lYXJlc3REaWFsb2codGFyZ2V0KTtcclxuICAgICAgaWYgKCFkaWFsb2cpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICBkaWFsb2dQb2x5ZmlsbC5mb3JtU3VibWl0dGVyID0gdGFyZ2V0O1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZSB0aGUgbmF0aXZlIEhUTUxGb3JtRWxlbWVudC5zdWJtaXQoKSBtZXRob2QsIGFzIGl0IHdvbid0IGZpcmUgdGhlXHJcbiAgICAgKiBzdWJtaXQgZXZlbnQgYW5kIGdpdmUgdXMgYSBjaGFuY2UgdG8gcmVzcG9uZC5cclxuICAgICAqL1xyXG4gICAgdmFyIG5hdGl2ZUZvcm1TdWJtaXQgPSBIVE1MRm9ybUVsZW1lbnQucHJvdG90eXBlLnN1Ym1pdDtcclxuICAgIGZ1bmN0aW9uIHJlcGxhY2VtZW50Rm9ybVN1Ym1pdCgpIHtcclxuICAgICAgaWYgKCFpc0Zvcm1NZXRob2REaWFsb2codGhpcykpIHtcclxuICAgICAgICByZXR1cm4gbmF0aXZlRm9ybVN1Ym1pdC5jYWxsKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBkaWFsb2cgPSBmaW5kTmVhcmVzdERpYWxvZyh0aGlzKTtcclxuICAgICAgZGlhbG9nICYmIGRpYWxvZy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgSFRNTEZvcm1FbGVtZW50LnByb3RvdHlwZS5zdWJtaXQgPSByZXBsYWNlbWVudEZvcm1TdWJtaXQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHbG9iYWwgZm9ybSAnZGlhbG9nJyBtZXRob2QgaGFuZGxlci4gQ2xvc2VzIGEgZGlhbG9nIGNvcnJlY3RseSBvbiBzdWJtaXRcclxuICAgICAqIGFuZCBwb3NzaWJseSBzZXRzIGl0cyByZXR1cm4gdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgIHZhciBmb3JtID0gLyoqIEB0eXBlIHtIVE1MRm9ybUVsZW1lbnR9ICovIChldi50YXJnZXQpO1xyXG4gICAgICBpZiAoIWlzRm9ybU1ldGhvZERpYWxvZyhmb3JtKSkgeyByZXR1cm47IH1cclxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIHZhciBkaWFsb2cgPSBmaW5kTmVhcmVzdERpYWxvZyhmb3JtKTtcclxuICAgICAgaWYgKCFkaWFsb2cpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICAvLyBGb3JtcyBjYW4gb25seSBiZSBzdWJtaXR0ZWQgdmlhIC5zdWJtaXQoKSBvciBhIGNsaWNrICg/KSwgYnV0IGFueXdheTogc2FuaXR5LWNoZWNrIHRoYXRcclxuICAgICAgLy8gdGhlIHN1Ym1pdHRlciBpcyBjb3JyZWN0IGJlZm9yZSB1c2luZyBpdHMgdmFsdWUgYXMgLnJldHVyblZhbHVlLlxyXG4gICAgICB2YXIgcyA9IGRpYWxvZ1BvbHlmaWxsLmZvcm1TdWJtaXR0ZXI7XHJcbiAgICAgIGlmIChzICYmIHMuZm9ybSA9PT0gZm9ybSkge1xyXG4gICAgICAgIGRpYWxvZy5jbG9zZShkaWFsb2dQb2x5ZmlsbC51c2VWYWx1ZSB8fCBzLnZhbHVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBkaWFsb2dQb2x5ZmlsbC5mb3JtU3VibWl0dGVyID0gbnVsbDtcclxuICAgIH0sIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZGlhbG9nUG9seWZpbGxbJ2ZvcmNlUmVnaXN0ZXJEaWFsb2cnXSA9IGRpYWxvZ1BvbHlmaWxsLmZvcmNlUmVnaXN0ZXJEaWFsb2c7XHJcbiAgZGlhbG9nUG9seWZpbGxbJ3JlZ2lzdGVyRGlhbG9nJ10gPSBkaWFsb2dQb2x5ZmlsbC5yZWdpc3RlckRpYWxvZztcclxuXHJcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgJ2FtZCcgaW4gZGVmaW5lKSB7XHJcbiAgICAvLyBBTUQgc3VwcG9ydFxyXG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gZGlhbG9nUG9seWZpbGw7IH0pO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZVsnZXhwb3J0cyddID09PSAnb2JqZWN0Jykge1xyXG4gICAgLy8gQ29tbW9uSlMgc3VwcG9ydFxyXG4gICAgbW9kdWxlWydleHBvcnRzJ10gPSBkaWFsb2dQb2x5ZmlsbDtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gYWxsIG90aGVyc1xyXG4gICAgd2luZG93WydkaWFsb2dQb2x5ZmlsbCddID0gZGlhbG9nUG9seWZpbGw7XHJcbiAgfVxyXG59KSgpO1xyXG4vKiBlc2xpbnQtZW5hYmxlICovXHJcbiJdLCJmaWxlIjoiZGlhbG9nLXBvbHlmaWxsLmpzIn0=

"use strict";function _createForOfIteratorHelper(o, allowArrayLike) {var it;if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {if (it) o = it;var i = 0;var F = function F() {};return { s: F, n: function n() {if (i >= o.length) return { done: true };return { done: false, value: o[i++] };}, e: function e(_e) {throw _e;}, f: F };}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion = true,didErr = false,err;return { s: function s() {it = o[Symbol.iterator]();}, n: function n() {var step = it.next();normalCompletion = step.done;return step;}, e: function e(_e2) {didErr = true;err = _e2;}, f: function f() {try {if (!normalCompletion && it["return"] != null) it["return"]();} finally {if (didErr) throw err;}} };}function _unsupportedIterableToArray(o, minLen) {if (!o) return;if (typeof o === "string") return _arrayLikeToArray(o, minLen);var n = Object.prototype.toString.call(o).slice(8, -1);if (n === "Object" && o.constructor) n = o.constructor.name;if (n === "Map" || n === "Set") return Array.from(o);if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);}function _arrayLikeToArray(arr, len) {if (len == null || len > arr.length) len = arr.length;for (var i = 0, arr2 = new Array(len); i < len; i++) {arr2[i] = arr[i];}return arr2;} /* eslint-env es6, browser */
var puzzleWorker = function () {
  'use strict';

  // Check to make sure service workers are supported in the current browser,
  // and that the current page is accessed from a secure origin. Using a
  // service worker from an insecure origin will trigger JS console errors. See
  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features
  var isLocalhost = Boolean(
  window.location.hostname === 'localhost' ||
  // [::1] is the IPv6 localhost address.
  window.location.hostname === '[::1]' ||
  // 127.0.0.1/8 is considered localhost for IPv4.
  window.location.hostname.match(
  /^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));



  if (
  'serviceWorker' in navigator && (
  window.location.protocol === 'https:' || isLocalhost))
  {
    navigator.serviceWorker.
    register('service-worker.js').
    then(function (registration) {
      // updatefound is fired if service-worker.js changes.
      registration.onupdatefound = function () {
        // updatefound is also fired the very first time the SW is
        // installed, and there's no need to prompt for a reload at
        // that point.
        // So check here to see if the page is already controlled,
        // i.e. whether there's an existing service worker.
        if (navigator.serviceWorker.controller) {
          // The updatefound event implies that registration.installing is
          // set:
          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event
          var installingWorker = registration.installing;

          installingWorker.onstatechange = function () {
            switch (installingWorker.state) {
              case 'installed':
                // At this point, the old content will have been purged
                // and the fresh content will have been added to the
                // cache. It's the perfect time to display a "New
                // content is available; please refresh." message in
                // the page's interface.
                break;

              case 'redundant':
                throw new Error(
                'The installing service worker became redundant.');


              default:
              // Ignore
            }
          };
        }
      };
    })["catch"](
    function (e) {
      console.error('Error during service worker registration:', e);
    });
  }

  // const yearPicker = document.getElementById('pickYear');
  // const monthPicker = document.getElementById('pickMonth');
  // const dayPicker = document.getElementById('pickDay');
  var puzTitle = document.getElementById('puzTitle');
  var puzTable = document.getElementById('puzTable');
  var puzAuthor = document.getElementById('puzAuthor');
  var puzCopy = document.getElementById('puzCopy');
  var puzNotepad = document.getElementById('puzNotepad');
  var clueContainer = document.getElementById('clueContainer');
  var acrossClues = document.getElementById('acrossClues');
  var downClues = document.getElementById('downClues');
  var singleClue = document.getElementById('singleClue');
  var keyboard = document.getElementById('kbContainer');
  var screenToggle = document.getElementById('screenToggle');
  var splash = document.getElementById('splash');
  var scores = document.getElementById('scores');
  var myName = document.getElementById('myName');
  var oppName = document.getElementById('oppName');
  var myScore = document.getElementById('myScore');
  var oppScore = document.getElementById('oppScore');
  var logo = document.getElementById('logo');
  var concessionBtn = document.getElementById('concessionBtn');
  var firebase = window.firebase;
  var db = firebase.firestore();
  var messaging = firebase.messaging.isSupported() ?
  firebase.messaging() : null;
  var scoreValues = {
    A: 1, B: 4, C: 4, D: 2, E: 1, F: 4, G: 3, H: 4, I: 1, J: 10, K: 5, L: 2,
    M: 4, N: 2, O: 1, P: 4, Q: 10, R: 1, S: 1, T: 1, U: 2, V: 5, W: 4, X: 8,
    Y: 4, Z: 10 };


  var currentUser = firebase.auth().currentUser;
  var myOpponentUid = null;
  var currentCell = null;
  var acrossWord = true;
  var game = null;
  var columns = null;
  var currentClue = null;
  var idxArray = [];
  var puzzleId = null;
  var myTurn = null;
  var clueNumIndices = {};

  if (messaging) {
    messaging.onMessage(function (payload) {
      console.log('onMessage: ', payload);
    });
  }

  firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
      currentUser = user;
      if (messaging) {
        sendTokenToServer();
      }
    }
  });

  /**
   * Send cloud messaging token to server
   * @param {string} token Cloud messaging token
   */
  function sendTokenToServer() {
    messaging.requestPermission().
    then(function () {
      return messaging.getToken();
    }).
    then(function (token) {
      console.log('Permission granted. Token: ', token);
      var userStatusFirestoreRef = firebase.
      firestore().
      doc("/users/".concat(currentUser.uid));
      userStatusFirestoreRef.set({ msgToken: token }, { merge: true });
    })["catch"](
    function (err) {
      console.log('User denied messaging', err);
    });
  }

  logo.addEventListener('click', function () {
    location.hash = '#games';
  });

  puzTitle.innerText = 'No puzzle loaded';

  /**
   * This function takes the puzzle object returned from the fetch and displays
   * a grid and clues. The HTML table element is a placeholder and the rows and
   * cells are created on the fly. The fetched puzzle is stored as an object in
   * the variable "game".
   */
  function showPuzzle() {
    // clear previous puzzle if it exists
    if (puzTable.children) {
      clearPuzzle();
    }
    idxArray = [];
    clueNumIndices = {};
    // initial estimate of element size used to determine
    // cellDim -> tableDim -> puzzle size
    if (game.puzzle.notepad) {
      // puzNotepad.style.width = '300px';
      puzNotepad.innerHTML = "<b>Notepad:</b>".concat(game.puzzle.notepad);
      puzNotepad.classList.remove('displayNone');
    }
    puzTitle.innerText = game.puzzle.title ? game.puzzle.title : 'Untitled';
    puzAuthor.innerText = "by ".concat(
    game.puzzle.author ? game.puzzle.author : 'Anonymous');

    puzCopy.innerHTML = game.puzzle.copyright ? "&copy; ".concat(
    game.puzzle.copyright) :
    '';

    var cellDim = getCellDim();
    var tableDim = cellDim * game.puzzle.rows;
    var gridIndex = 0;
    for (var rowIndex = 0; rowIndex < game.puzzle.rows; rowIndex += 1) {
      var row = puzTable.insertRow(rowIndex);
      row.style.width = "".concat(tableDim, "px");
      for (var colIndex = 0; colIndex < game.puzzle.cols; colIndex += 1) {
        var clueNumber = game.puzzle.grid[gridIndex].clueNum;
        var cell = row.insertCell(colIndex);
        var blackCell = game.puzzle.grid[gridIndex].black;

        cell.style.width = "".concat(cellDim, "px");
        cell.style.height = "".concat(cellDim, "px");
        cell.addEventListener('click', cellClicked);
        if (blackCell) {
          cell.className = 'black';
        } else {
          cell.classList.add('cursorPointer');
          var squareDiv = document.createElement('div');
          var letterDiv = document.createElement('div');
          squareDiv.classList.add('square');
          letterDiv.classList.add('marginAuto');
          if (game.puzzle.grid[gridIndex].status === 'locked') {
            cell.classList.add(game.puzzle.grid[gridIndex].bgColor);
          }
          var guess = game.puzzle.grid[gridIndex].guess;
          letterDiv.innerText = guess ? guess : '';
          squareDiv.appendChild(letterDiv);
          cell.appendChild(squareDiv);
          if (clueNumber !== '') {
            clueNumIndices[clueNumber.toString()] = gridIndex;
            var clueNumDiv = document.createElement('div');
            clueNumDiv.classList.add('clueNumber');
            clueNumDiv.appendChild(document.createTextNode(clueNumber));
            cell.appendChild(clueNumDiv);
          }
          if (game.puzzle.grid[gridIndex].circle) {
            cell.children[0].classList.add('circle');
          }
        }
        gridIndex += 1;
      }
    }

    keyboard.classList.remove('displayNone');
    keyboard.classList.add('displayFlex');
    clueContainer.classList.remove('displayNone');
    splash.classList.add('displayNone');

    if (!game.puzzle.completedClues) {
      game.puzzle.completedClues = {};
      game.puzzle.completedClues.across = [];
      game.puzzle.completedClues.down = [];
    }

    // create contents for across clues div
    var _iterator = _createForOfIteratorHelper(game.puzzle.clues.across),_step;try {for (_iterator.s(); !(_step = _iterator.n()).done;) {var clue = _step.value;
        var parsedClue = clue.split('.');
        var _clueNumber = parseInt(parsedClue[0], 10);
        var clueRef = parsedClue[0] + '.';
        var clueText = parsedClue.slice(1).join('.');
        var clueDiv = document.createElement('div');
        clueDiv.classList.add('displayFlex', 'cursorPointer');
        clueDiv.id = 'across' + _clueNumber;
        if (game.puzzle.completedClues.across.includes(_clueNumber)) {
          clueDiv.classList.add('colorLightGray');
        }

        var numDiv = document.createElement('div');
        numDiv.appendChild(document.createTextNode(clueRef));
        numDiv.classList.add('padRight', 'cursorPointer');

        var textDiv = document.createElement('div');
        textDiv.appendChild(document.createTextNode(clueText));
        textDiv.classList.add('cursorPointer');
        clueDiv.appendChild(numDiv);
        clueDiv.appendChild(textDiv);
        // clueDiv.addEventListener('click', acrossClueClick);
        acrossClues.appendChild(clueDiv);
      }

      // create contents for down clues div
    } catch (err) {_iterator.e(err);} finally {_iterator.f();}var _iterator2 = _createForOfIteratorHelper(game.puzzle.clues.down),_step2;try {for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {var _clue = _step2.value;
        var _parsedClue = _clue.split('.');
        var _clueNumber2 = parseInt(_parsedClue[0], 10);
        var _clueRef = _parsedClue[0] + '.';
        var _clueText = _parsedClue.slice(1).join('.');
        var _clueDiv = document.createElement('div');
        _clueDiv.classList.add('displayFlex', 'cursorPointer');
        _clueDiv.id = 'down' + _clueNumber2;
        if (game.puzzle.completedClues.down.includes(_clueNumber2)) {
          _clueDiv.classList.add('colorLightGray');
        }

        var _numDiv = document.createElement('div');
        _numDiv.appendChild(document.createTextNode(_clueRef));
        _numDiv.classList.add('padRight', 'cursorPointer');

        var _textDiv = document.createElement('div');
        _textDiv.appendChild(document.createTextNode(_clueText));
        _textDiv.classList.add('cursorPointer');
        _clueDiv.appendChild(_numDiv);
        _clueDiv.appendChild(_textDiv);
        downClues.appendChild(_clueDiv);
      }} catch (err) {_iterator2.e(err);} finally {_iterator2.f();}

    acrossClues.addEventListener('click', function (event) {
      if (event.target.innerText !== '') {
        clueClicked(event, 'across');
      }
    });

    downClues.addEventListener('click', function (event) {
      if (event.target.innerText !== '') {
        clueClicked(event, 'down');
      }
    });

    scores.classList.remove('displayNone');
    scores.classList.add('displayFlex');
    var me = currentUser.uid === game.initiator.uid ?
    'initiator' : 'opponent';
    var they = me === 'initiator' ? 'opponent' : 'initiator';
    var myNickname = game[me].displayName;
    var oppNickname = game[they].displayName;

    myNickname =
    myNickname.indexOf(' ') === -1 ?
    myNickname :
    myNickname.slice(0, myNickname.indexOf(' '));
    myNickname = myNickname.length > 8 ? myNickname.slice(0, 8) : myNickname;
    myName.innerText = myNickname;
    oppNickname =
    oppNickname.indexOf(' ') === -1 ?
    oppNickname :
    oppNickname.slice(0, oppNickname.indexOf(' '));
    oppNickname =
    oppNickname.length > 8 ? oppNickname.slice(0, 8) : oppNickname;
    oppName.innerText = oppNickname;
    myScore.innerText = game[me].score;
    oppScore.innerText = game[they].score;
    myName.classList.add(game[me].bgColor.replace('bg', 'font'));
    oppName.classList.add(game[they].bgColor.replace('bg', 'font'));
    updateScoreHighlighting();
    if (game.emptySquares === 0) {
      var result = 'YOU WON!!';
      if (game[me].score > game[they].score) {
        game.winner = game[me].uid;
      } else {
        game.winner = game[they].uid;
        result = 'You lost';
      }
      game.status = 'finished';
      window.puzzleGames.showReplayDialog(game, result);
      savePuzzle();
    }
  }

  /**
   * When clue is clicked, this event fires
   * @param {Event} event Mouse click or screen touch event
   * @param {string} direction Clue direction (across or down)
   */
  function clueClicked(event, direction) {
    var clueNumberText = event.target.parentElement.firstChild.innerText;
    clueNumberText = clueNumberText.slice(0, clueNumberText.indexOf('.'));
    var cellIndex = clueNumIndices[clueNumberText];
    var row = Math.floor(cellIndex / columns);
    var col = cellIndex - row * columns;
    var cell = puzTable.firstChild.children[row].children[col];
    if (direction === 'across') {
      selectAcross(cell);
    } else {
      selectDown(cell);
    }
  }

  /**
   * Calculates width/height dimension of single cell in px
   * @return {number} dimension
   */
  function getCellDim() {
    var puzTableWidth = puzTable.offsetWidth;
    return Math.floor(puzTableWidth / game.puzzle.rows);
  }

  /**
   * Sets the variable currentCell to the cell the user clicked in
   * @param {Event} event Mouse click or screen touch event
   */
  function cellClicked(event) {
    var cell = event.target;
    var row = cell.parentElement.rowIndex;
    var col = cell.cellIndex;
    var index = row * columns + col;
    // console.log(cell.cellIndex);
    // console.log(cell.parentElement.rowIndex);
    // console.log(event);

    if (cell.className === 'black') {
      return;
    }
    if (!idxArray.includes(index)) {
      clearLetters();
    }
    if (currentCell && currentCell === cell) {
      clearLetters();
      acrossWord = !acrossWord;
    }
    idxArray = [];
    currentCell = cell;
    if (acrossWord) {
      selectAcross(cell);
    } else {
      selectDown(cell);
    }
  }

  /** Clears letters when user changes to a different clue */
  function clearLetters() {var _iterator3 = _createForOfIteratorHelper(
    idxArray),_step3;try {for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {var index = _step3.value;
        if (game.puzzle.grid[index].status === 'locked') continue;
        game.puzzle.grid[index].guess = '';
        var row = Math.floor(index / columns);
        var col = index - row * columns;
        puzTable.firstChild.children[row].children[
        col].
        firstChild.firstChild.innerText = '';
      }} catch (err) {_iterator3.e(err);} finally {_iterator3.f();}
  }

  /**
   * Returns an array of indices of cells that make up a word block in
   * the current puzzle.
   * @param {Object} cell Cell in puzzle
   * @param {string} direction Direction (across or down)
   * @return {array} Array of indices that make up a word block
   */
  function getWordBlock(cell, direction) {
    var row = cell.parentElement.rowIndex;
    var col = cell.cellIndex;
    var index = row * columns + col;
    var indexArray = [];
    if (direction === 'across') {
      while (index > row * columns && !game.puzzle.grid[index - 1].black) {
        index--;
      }
      while (index < (row + 1) * columns && !game.puzzle.grid[index].black) {
        indexArray.push(index);
        index++;
      }
    } else {
      while (index >= columns && !game.puzzle.grid[index - columns].black) {
        index -= columns;
      }
      while (
      index < game.puzzle.rows * columns &&
      !game.puzzle.grid[index].black)
      {
        indexArray.push(index);
        index += columns;
      }
    }
    return indexArray;
  }

  /**
   * Highlights an across clue and location in puzzle based on which cell
   * the user clicks
   * @param {Object} cell Cell the user clicked
   */
  function selectAcross(cell) {
    var row = cell.parentElement.rowIndex;
    var col = cell.cellIndex;
    var rowOffset = row * columns;
    var index = row * columns + col;

    clearHighlights();
    idxArray = getWordBlock(cell, 'across');
    currentClue = game.puzzle.grid[idxArray[0]].clueNum;var _iterator4 = _createForOfIteratorHelper(
    acrossClues.children),_step4;try {for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {var clue = _step4.value;
        var clueNumStr = clue.children[0].textContent.split('.')[0];
        if (clueNumStr === currentClue.toString()) {
          clue.classList.add('rangeHighlight', 'cluePop');
          acrossClues.scrollBy({
            top: clue.offsetTop - 100 - acrossClues.scrollTop,
            left: 0,
            behavior: 'smooth' });

          singleClue.innerText = clue.children[1].textContent;
          break;
        }
      }} catch (err) {_iterator4.e(err);} finally {_iterator4.f();}
    var currentCol = index - rowOffset;
    var currentCell = cell.parentElement.children[currentCol];
    cell.parentElement.children[idxArray[0] - rowOffset].classList.add(
    'border2pxLeft');var _iterator5 = _createForOfIteratorHelper(

    idxArray),_step5;try {for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {var idx = _step5.value;
        currentCol = idx - rowOffset;
        currentCell = cell.parentElement.children[currentCol];
        currentCell.classList.add('border2pxTop', 'border2pxBottom');
        currentCell.classList.add(
        currentCol === col ? 'currCellHighlight' : 'rangeHighlight');

      }} catch (err) {_iterator5.e(err);} finally {_iterator5.f();}
    cell.parentElement.children[
    idxArray[idxArray.length - 1] - rowOffset].
    classList.add('border2pxRight');
  }

  /**
   * Highlights a down clue and location in puzzle based on which cell
   * the user clicks
   * @param {Object} cell Cell the user clicked
   */
  function selectDown(cell) {
    var row = cell.parentElement.rowIndex;
    var col = cell.cellIndex;
    var index = row * columns + col;

    clearHighlights();
    idxArray = getWordBlock(cell, 'down');
    // get the number of the clue number
    currentClue = game.puzzle.grid[idxArray[0]].clueNum;var _iterator6 = _createForOfIteratorHelper(
    downClues.children),_step6;try {for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {var clue = _step6.value;
        var clueNumStr = clue.children[0].textContent.split('.')[0];
        if (clueNumStr === currentClue.toString()) {
          clue.classList.add('rangeHighlight', 'cluePop');
          downClues.scrollBy({
            top: clue.offsetTop - 100 - downClues.scrollTop,
            left: 0,
            behavior: 'smooth' });

          singleClue.innerText = clue.children[1].textContent;
        }
      }} catch (err) {_iterator6.e(err);} finally {_iterator6.f();}
    var currentRow = Math.floor(index / columns);
    var currentCell = puzTable.children[0].children[currentRow].children[col];
    puzTable.children[0].children[Math.floor(idxArray[0] / columns)].children[
    col].
    classList.add('border2pxTop');var _iterator7 = _createForOfIteratorHelper(
    idxArray),_step7;try {for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {var idx = _step7.value;
        currentRow = Math.floor(idx / columns);
        currentCell = puzTable.children[0].children[currentRow].children[col];
        currentCell.classList.add('border2pxLeft', 'border2pxRight');
        currentCell.classList.add(
        currentRow === row ? 'currCellHighlight' : 'rangeHighlight');

      }} catch (err) {_iterator7.e(err);} finally {_iterator7.f();}
    puzTable.children[0].children[
    Math.floor(idxArray[idxArray.length - 1] / columns)].
    children[col].classList.add('border2pxBottom');
  }

  /** Removes clue cell highlighting from all cells */
  function clearHighlights() {
    // console.log(puzTable.children[0]);
    var rowArray = puzTable.children[0].children;var _iterator8 = _createForOfIteratorHelper(

    rowArray),_step8;try {for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {var row = _step8.value;var _iterator11 = _createForOfIteratorHelper(
        row.children),_step11;try {for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {var cell = _step11.value;
            if (cell.className !== 'black') {
              cell.classList.remove(
              'rangeHighlight',
              'currCellHighlight',
              'border2pxBottom',
              'border2pxRight',
              'border2pxLeft',
              'border2pxTop');

            }
          }} catch (err) {_iterator11.e(err);} finally {_iterator11.f();}
      }} catch (err) {_iterator8.e(err);} finally {_iterator8.f();}var _iterator9 = _createForOfIteratorHelper(
    acrossClues.children),_step9;try {for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {var clue = _step9.value;
        clue.classList.remove('rangeHighlight', 'cluePop');
      }} catch (err) {_iterator9.e(err);} finally {_iterator9.f();}var _iterator10 = _createForOfIteratorHelper(
    downClues.children),_step10;try {for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {var _clue2 = _step10.value;
        _clue2.classList.remove('rangeHighlight', 'cluePop');
      }} catch (err) {_iterator10.e(err);} finally {_iterator10.f();}
  }

  /**
   * This function fetches a puzzle based on the user's selection and then
   * calls functions to format and display the puzzle
   * @param {Object} paramObject Object with competitors and puzzle difficulty
   */
  function loadPuzzle(paramObject) {
    document.getElementById('puzTitle').innerText = 'Fetching data...';

    var difficulty = paramObject.difficulty;

    var directory = 'puzDirMed.json';
    var year = '1976';
    var month = '01';
    var day = '01';

    // Stop listening for previous puzzle changes
    if (puzzleId) {
      db.collection('games').
      doc(puzzleId).
      onSnapshot(function () {});
    }

    if (difficulty === 'hard') {
      directory = 'puzDirHard.json';
    } else if (difficulty === 'easy') {
      directory = 'puzDirEasy.json';
    }

    fetch(directory).
    then(function (response) {
      return response.json();
    }).
    then(function (dir) {
      var years = Object.getOwnPropertyNames(dir);
      year = years[Math.floor(Math.random() * years.length)];
      var months = Object.getOwnPropertyNames(dir[year]);
      month = months[Math.floor(Math.random() * months.length)];
      var days = dir[year][month];
      day = days[Math.floor(Math.random() * days.length)];
    }).
    then(function () {
      var baseUrl =
      'https://raw.githubusercontent.com/doshea/nyt_crosswords/master';
      var url = "".concat(baseUrl, "/").concat(year, "/").concat(month, "/").concat(day);
      fetch(url).
      then(function (response) {
        return response.json();
      }).
      then(function (obj) {
        parsePuzzle(obj);
        saveNewPuzzle(paramObject);
        showPuzzle();
        location.hash = '#puzzle';
      })["catch"](
      function (error) {
        console.error('Error fetching puzzle: ', error);
      });
    })["catch"](
    function (error) {
      console.error('Error fetching puzzle date: ', error);
    });
  }

  /**
   * This function fetches an active puzzle based on the user's selection
   * and then calls functions to format and display the puzzle
   * @param {String} newPuzzleId Firestore game (puzzle) id
   */
  function fetchPuzzle(newPuzzleId) {
    document.getElementById('puzTitle').innerText = 'Fetching data...';

    var db = window.firebase.firestore();
    var docRef = db.collection('games').doc(newPuzzleId);

    // Stop listening for previous puzzle changes
    if (puzzleId) {
      db.collection('games').
      doc(puzzleId).
      onSnapshot(function () {});
    }

    docRef.onSnapshot(
    function (doc) {
      game = doc.data();
      if (game.status === 'started') {
        myOpponentUid =
        game.initiator.uid === currentUser.uid ?
        game.opponent.uid :
        game.initiator.uid;
        columns = game.puzzle.cols;
        myTurn = game.nextTurn !== myOpponentUid;
        updateScoreHighlighting();
      }
      puzzleId = newPuzzleId;
      showPuzzle();
      location.hash = '#puzzle';
    },
    function (error) {
      console.error('Error getting puzzle: ', error);
    });

  }

  /** Utility function to update score display */
  function updateScoreHighlighting() {
    scores.children[0].classList.remove(
    myTurn ? 'bgColorTransWhite' : 'bgColorTransGold');

    scores.children[0].classList.add(
    myTurn ? 'bgColorTransGold' : 'bgColorTransWhite');

    scores.children[2].classList.remove(
    myTurn ? 'bgColorTransGold' : 'bgColorTransWhite');

    scores.children[2].classList.add(
    myTurn ? 'bgColorTransWhite' : 'bgColorTransGold');

  }

  /**
   * Parse the fetched puzzle into a more compact form
   * @param {Object} puzzle Puzzle object returned from fetch
   */
  function parsePuzzle(puzzle) {
    var rows = puzzle.size.rows;
    var cols = puzzle.size.cols;
    game = {};
    game.emptySquares = rows * cols;
    game.puzzle = {};
    game.puzzle.cols = cols;
    game.puzzle.rows = rows;
    game.puzzle.author = puzzle.author;
    game.puzzle.clues = puzzle.clues;
    game.puzzle.copyright = puzzle.copyright;
    game.puzzle.date = puzzle.date;
    game.puzzle.dow = puzzle.dow;
    game.puzzle.editor = puzzle.editor;
    game.puzzle.notepad = puzzle.notepad;
    game.puzzle.title = puzzle.title;
    game.puzzle.completedClues = {};
    game.puzzle.completedClues.across = [];
    game.puzzle.completedClues.down = [];
    game.puzzle.grid = [];
    for (var i = 0; i < puzzle.grid.length; i++) {
      game.puzzle.grid[i] = {};
      if (puzzle.grid[i] === '.') {
        game.puzzle.grid[i].black = true;
        game.emptySquares--;
      } else {
        game.puzzle.grid[i].black = false;
        game.puzzle.grid[i].value = puzzle.grid[i];
        game.puzzle.grid[i].clueNum =
        puzzle.gridnums[i] === 0 ? '' : puzzle.gridnums[i];
        game.puzzle.grid[i].status = 'free';
        game.puzzle.grid[i].circle = puzzle.circles && puzzle.circles[i] === 1;
      }
    }
    columns = cols;
    console.log(game.puzzle);
  }

  /** Saves new puzzle to firebase
   * @param {Object} paramObject Id and difficulty object passed to loadPuzzle
   * from games.js
   */
  function saveNewPuzzle(paramObject) {
    var initiatorUid = paramObject.initiator.uid;
    var iDisplayName = paramObject.initiator.displayName;
    myOpponentUid = paramObject.opponent.uid;
    var oDisplayName = paramObject.opponent.displayName;

    myTurn = true;
    game.initiator = {};
    game.initiator.uid = initiatorUid;
    game.initiator.displayName = iDisplayName;
    game.initiator.bgColor = 'bgTransRed';
    game.initiator.score = 0;
    game.initiator.squaresWon = [];
    game.initiator.errors = 0;
    game.opponent = {};
    game.opponent.uid = myOpponentUid;
    game.opponent.displayName = oDisplayName;
    game.opponent.bgColor = 'bgTransBlue';
    game.opponent.score = 0;
    game.opponent.squaresWon = [];
    game.opponent.errors = 0;
    game.difficulty = paramObject.difficulty;
    game.start = firebase.firestore.FieldValue.serverTimestamp();
    game.status = 'started';
    game.winner = null;
    game.nextTurn = initiatorUid;
    db.collection('games').
    add(game).
    then(function (docRef) {
      console.log('game written to firestore with docRef: ', docRef);
      puzzleId = docRef.id;
      db.collection('games').
      doc(puzzleId).
      onSnapshot(
      function (doc) {
        game = doc.data();
        myTurn = game.nextTurn !== myOpponentUid;
        showPuzzle();
      },
      function (error) {
        console.error('Error getting puzzle: ', error);
      });

    })["catch"](
    function (error) {
      console.error('Error writing file to firestore: ', error);
    });
  }

  /** Saves puzzle to firebase */
  function savePuzzle() {
    db.collection('games').
    doc(puzzleId).
    set(game, { merge: true })["catch"](
    function (error) {
      console.error('Error saving to firebase: ', error);
    });
  }

  /** Removes puzzle from DOM */
  function clearPuzzle() {
    puzTitle.innerText = 'Puzzle info will appear here';
    // clear out old puzzle and clues
    puzTable.innerHTML = '';
    puzAuthor.innerText = '';
    puzNotepad.classList.add('displayNone');
    puzCopy.innerHTML = '';
    clueContainer.classList.add('displayNone');
    splash.classList.remove('displayNone');
    acrossClues.innerHTML = '';
    downClues.innerHTML = '';
    singleClue.innerText = 'Select in the puzzle to reveal clue';
  }

  /** Resizes puzzle based on available space */
  function resizePuzzle() {
    if (puzTable.children.length === 0) return;
    // console.log(puzTable.children[0]);
    var cellDim = getCellDim();
    var tableDim = cellDim * game.puzzle.rows;
    var rowArray = puzTable.children[0].children;var _iterator12 = _createForOfIteratorHelper(

    rowArray),_step12;try {for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {var row = _step12.value;
        row.style.width = tableDim + 'px';
        var cellArray = row.children;var _iterator13 = _createForOfIteratorHelper(
        cellArray),_step13;try {for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {var cell = _step13.value;
            cell.style.width = cellDim + 'px';
            cell.style.height = cellDim + 'px';
          }} catch (err) {_iterator13.e(err);} finally {_iterator13.f();}
      }} catch (err) {_iterator12.e(err);} finally {_iterator12.f();}
    if (currentCell) {
      if (acrossWord) {
        selectAcross(currentCell);
      } else {
        selectDown(currentCell);
      }
    }
  }

  /** Helper function for toggling drawer */
  function toggleDrawer() {
    document.querySelector('.mdl-layout').MaterialLayout.toggleDrawer();
  }

  /**
   * Play currentUser's turn. Executed when the player clicks the enter
   * button
   */
  function playWord() {
    if (location.hash === '#puzzle' && !myTurn) {
      alert('Your opponent hasn\'t played their turn yet!');
      return;
    }
    if (incomplete()) return;
    if (correctAnswer()) {
      var direction = acrossWord ? 'across' : 'down';
      var clueNumber = game.puzzle.grid[idxArray[0]].clueNum;
      game.puzzle.completedClues[direction].push(clueNumber);
      document.
      getElementById(direction + clueNumber).
      classList.add('colorLightGray');var _iterator14 = _createForOfIteratorHelper(
      idxArray),_step14;try {for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {var index = _step14.value;
          var gridElement = game.puzzle.grid[index];
          game.puzzle.grid[index] = setCellStatus(index, gridElement);
        }} catch (err) {_iterator14.e(err);} finally {_iterator14.f();}
    }
    game.nextTurn = myOpponentUid;
    myTurn = !myTurn;
    savePuzzle();
  }

  /**
   * Checks if array of cells has a letter in each square
   * @return {boolean} true if word is incomplete, false otherwise
   */
  function incomplete() {var _iterator15 = _createForOfIteratorHelper(
    idxArray),_step15;try {for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {var i = _step15.value;
        if (!game.puzzle.grid[i].guess || game.puzzle.grid[i].guess === '') {
          return true;
        }
      }} catch (err) {_iterator15.e(err);} finally {_iterator15.f();}
    return false;
  }

  /**
   * Checks if array of cells is filled in correctly
   * @return {boolean} true if correct, false otherwise
   */
  function correctAnswer() {var _iterator16 = _createForOfIteratorHelper(
    idxArray),_step16;try {for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {var index = _step16.value;
        var gridElement = game.puzzle.grid[index];
        if (gridElement.guess !== gridElement.value) {
          return false;
        }
      }} catch (err) {_iterator16.e(err);} finally {_iterator16.f();}
    return true;
  }

  /**
   * Sets values for gridElement based on currentUser play
   * @param {number} index index of cell
   * @param {Object} gridElement game.puzzle grid array object
   * @return {Object} Updated grid element object
   */
  function setCellStatus(index, gridElement) {
    var player =
    game.initiator.uid === currentUser.uid ? 'initiator' : 'opponent';
    if (gridElement.status === 'locked') {
      game[player].score += scoreValues[gridElement.value];
      return gridElement;
    }
    game[player].score += scoreCell(index);
    game[player].squaresWon.push(index);
    game.emptySquares--;
    gridElement.bgColor = game[player].bgColor;
    gridElement.status = 'locked';
    return gridElement;
  }

  /**
   * Adds to score if orthogonal word is completed by this play
   * @param {number} index index of cell
   * @return {number} additional score due to completion of orthogonal word
   */
  function scoreCell(index) {
    var row = Math.floor(index / columns);
    var col = index - row * columns;
    var cell = puzTable.children[0].children[row].children[col];
    var direction = acrossWord ? 'down' : 'across';
    var wordBlock = getWordBlock(cell, direction);
    var addedScore = 0;var _iterator17 = _createForOfIteratorHelper(

    wordBlock),_step17;try {for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {var idx = _step17.value;
        if (idx === index) {
          addedScore += 2 * scoreValues[game.puzzle.grid[idx].value];
        } else if (game.puzzle.grid[idx].status === 'locked') {
          addedScore += scoreValues[game.puzzle.grid[idx].value];
        } else {
          return scoreValues[game.puzzle.grid[index].value];
        }
      }} catch (err) {_iterator17.e(err);} finally {_iterator17.f();}
    var clueNumber = game.puzzle.grid[wordBlock[0]].clueNum;
    game.puzzle.completedClues[direction].push(clueNumber);
    return addedScore;
  }

  /**
   * Adds a letter to the puzzle from physical or virtual keyboard event and
   * moves forward one space
   * @param {Event} event Keyboard or touch event from physical or virtual
   * keyboard
   */
  function enterLetter(event) {
    if (event.keyCode === 13) {
      playWord();
      return;
    }
    var letter;
    if (event.key) {
      letter = event.key;
    } else {
      var node = event.target;
      while (node.classList[0] !== 'kbButton') {
        node = node.parentNode;
      }
      letter = node.childNodes[0].childNodes[0].data;
    }
    if (letter && letter.toLowerCase() === 'backspace') {
      undoEntry();
      return;
    }
    // if (letter && letter.toLowerCase() === 'enter') {
    //   playWord();
    //   return;
    // }
    if (!letter || !letter.match(/^[a-zA-Z]$/)) return;
    if (currentCell) {
      var row = currentCell.parentElement.rowIndex;
      var col = currentCell.cellIndex;
      var index = row * columns + col;
      var nextCellIndex = idxArray.indexOf(index) + 1;
      var localIdxArray = idxArray.
      slice(nextCellIndex).
      concat(idxArray.slice(0, nextCellIndex));
      var letterDiv = document.createElement('div');
      // console.log(idxArray);
      // console.log(localIdxArray);

      if (game.puzzle.grid[index].status === 'locked') {
        // alert('Sorry, that square is locked by a previous answer');
        return;
      }
      game.puzzle.grid[index].guess = letter.toUpperCase();
      letterDiv.appendChild(document.createTextNode(letter.toUpperCase()));
      letterDiv.classList.add('marginAuto');
      currentCell.children[0].replaceChild(
      letterDiv,
      currentCell.children[0].children[0]);

      currentCell.classList.remove('currCellHighlight');
      currentCell.classList.add('rangeHighlight');var _iterator18 = _createForOfIteratorHelper(
      localIdxArray),_step18;try {for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {var idx = _step18.value;
          if (game.puzzle.grid[idx].status !== 'locked') {
            row = Math.floor(idx / columns);
            col = idx - row * columns;
            currentCell = puzTable.children[0].children[row].children[col];
            currentCell.classList.remove('rangeHighlight');
            currentCell.classList.add('currCellHighlight');
            break;
          }
        }} catch (err) {_iterator18.e(err);} finally {_iterator18.f();}
    }
  }

  /**
   * Removes letter (if present) from current cell and moves
   * backward one space
   */
  function undoEntry() {
    if (currentCell) {
      var row = currentCell.parentElement.rowIndex;
      var col = currentCell.cellIndex;
      var index = row * columns + col;
      // reverse copy idxArray so we go backwards instead of forwards
      var localIdxArray = [];
      for (var i = 0, j = idxArray.length; i < idxArray.length; i++, j--) {
        localIdxArray[i] = idxArray[j - 1];
      }
      var nextCellIndex = localIdxArray.indexOf(index) + 1;
      localIdxArray = localIdxArray.
      slice(nextCellIndex).
      concat(localIdxArray.slice(0, nextCellIndex));
      var letterDiv = document.createElement('div');
      // console.log(idxArray);
      // console.log(localIdxArray);

      if (game.puzzle.grid[index].status === 'locked') {
        // alert('Sorry, that square is locked by a previous answer');
        return;
      }
      letterDiv.appendChild(document.createTextNode(''));
      letterDiv.classList.add('marginAuto');
      currentCell.children[0].replaceChild(
      letterDiv,
      currentCell.children[0].children[0]);

      currentCell.classList.remove('currCellHighlight');
      currentCell.classList.add('rangeHighlight');var _iterator19 = _createForOfIteratorHelper(
      localIdxArray),_step19;try {for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {var idx = _step19.value;
          if (game.puzzle.grid[idx].status !== 'locked') {
            row = Math.floor(idx / columns);
            col = idx - row * columns;
            currentCell = puzTable.children[0].children[row].children[col];
            currentCell.classList.remove('rangeHighlight');
            currentCell.classList.add('currCellHighlight');
            break;
          }
        }} catch (err) {_iterator19.e(err);} finally {_iterator19.f();}
    }
  }

  /** Concede the game immediately */
  function concede() {
    var me = currentUser.uid === game.initiator.uid ?
    'initiator' : 'opponent';
    var they = me === 'initiator' ? 'opponent' : 'initiator';

    game.emptySquares = 0;var _iterator20 = _createForOfIteratorHelper(
    game.puzzle.grid),_step20;try {for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {var square = _step20.value;
        if (square.status && square.status === 'free') {
          square.status = 'locked';
          square.guess = square.value;
          square.bgColor = game[they].bgColor;
          game[they].score += 1;
        }
      }} catch (err) {_iterator20.e(err);} finally {_iterator20.f();}
    savePuzzle();
  }

  concessionBtn.addEventListener('click', concede);
  document.addEventListener('keyup', enterLetter);
  window.addEventListener('resize', resizePuzzle);
  var keyList = keyboard.getElementsByClassName('kbButton');var _iterator21 = _createForOfIteratorHelper(
  keyList),_step21;try {for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {var node = _step21.value;
      node.addEventListener('click', enterLetter);
    }} catch (err) {_iterator21.e(err);} finally {_iterator21.f();}
  document.getElementById('backspace').addEventListener('click', undoEntry);
  document.getElementById('enter').addEventListener('click', playWord);
  document.
  getElementById('closeDrawer').
  addEventListener('click', toggleDrawer);
  screenToggle.addEventListener('click', toggleScreen);

  /** Toggle between window and full screen */
  function toggleScreen() {
    if (window.screenfull.enabled) {
      window.screenfull.toggle();
    }
  }

  if (window.screenfull.enabled) {
    window.screenfull.on('change', function () {
      screenToggle.innerText = window.screenfull.isFullscreen ?
      'fullscreen_exit' :
      'fullscreen';
    });
  }

  /** Init in case we need it */
  function init() {
    console.log('The dude abides!');
  }

  return {
    // initPicker: initPicker,
    init: init,
    loadPuzzle: loadPuzzle,
    fetchPuzzle: fetchPuzzle,
    clearPuzzle: clearPuzzle };

}();

puzzleWorker.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicHV6emxlV29ya2VyIiwiaXNMb2NhbGhvc3QiLCJCb29sZWFuIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm1hdGNoIiwibmF2aWdhdG9yIiwicHJvdG9jb2wiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIiwicmVnaXN0cmF0aW9uIiwib251cGRhdGVmb3VuZCIsImNvbnRyb2xsZXIiLCJpbnN0YWxsaW5nV29ya2VyIiwiaW5zdGFsbGluZyIsIm9uc3RhdGVjaGFuZ2UiLCJzdGF0ZSIsIkVycm9yIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsInB1elRpdGxlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInB1elRhYmxlIiwicHV6QXV0aG9yIiwicHV6Q29weSIsInB1ek5vdGVwYWQiLCJjbHVlQ29udGFpbmVyIiwiYWNyb3NzQ2x1ZXMiLCJkb3duQ2x1ZXMiLCJzaW5nbGVDbHVlIiwia2V5Ym9hcmQiLCJzY3JlZW5Ub2dnbGUiLCJzcGxhc2giLCJzY29yZXMiLCJteU5hbWUiLCJvcHBOYW1lIiwibXlTY29yZSIsIm9wcFNjb3JlIiwibG9nbyIsImNvbmNlc3Npb25CdG4iLCJmaXJlYmFzZSIsImRiIiwiZmlyZXN0b3JlIiwibWVzc2FnaW5nIiwiaXNTdXBwb3J0ZWQiLCJzY29yZVZhbHVlcyIsIkEiLCJCIiwiQyIsIkQiLCJFIiwiRiIsIkciLCJIIiwiSSIsIkoiLCJLIiwiTCIsIk0iLCJOIiwiTyIsIlAiLCJRIiwiUiIsIlMiLCJUIiwiVSIsIlYiLCJXIiwiWCIsIlkiLCJaIiwiY3VycmVudFVzZXIiLCJhdXRoIiwibXlPcHBvbmVudFVpZCIsImN1cnJlbnRDZWxsIiwiYWNyb3NzV29yZCIsImdhbWUiLCJjb2x1bW5zIiwiY3VycmVudENsdWUiLCJpZHhBcnJheSIsInB1enpsZUlkIiwibXlUdXJuIiwiY2x1ZU51bUluZGljZXMiLCJvbk1lc3NhZ2UiLCJwYXlsb2FkIiwibG9nIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwidXNlciIsInNlbmRUb2tlblRvU2VydmVyIiwicmVxdWVzdFBlcm1pc3Npb24iLCJnZXRUb2tlbiIsInRva2VuIiwidXNlclN0YXR1c0ZpcmVzdG9yZVJlZiIsImRvYyIsInVpZCIsInNldCIsIm1zZ1Rva2VuIiwibWVyZ2UiLCJlcnIiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFzaCIsImlubmVyVGV4dCIsInNob3dQdXp6bGUiLCJjaGlsZHJlbiIsImNsZWFyUHV6emxlIiwicHV6emxlIiwibm90ZXBhZCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRpdGxlIiwiYXV0aG9yIiwiY29weXJpZ2h0IiwiY2VsbERpbSIsImdldENlbGxEaW0iLCJ0YWJsZURpbSIsInJvd3MiLCJncmlkSW5kZXgiLCJyb3dJbmRleCIsInJvdyIsImluc2VydFJvdyIsInN0eWxlIiwid2lkdGgiLCJjb2xJbmRleCIsImNvbHMiLCJjbHVlTnVtYmVyIiwiZ3JpZCIsImNsdWVOdW0iLCJjZWxsIiwiaW5zZXJ0Q2VsbCIsImJsYWNrQ2VsbCIsImJsYWNrIiwiaGVpZ2h0IiwiY2VsbENsaWNrZWQiLCJjbGFzc05hbWUiLCJhZGQiLCJzcXVhcmVEaXYiLCJjcmVhdGVFbGVtZW50IiwibGV0dGVyRGl2Iiwic3RhdHVzIiwiYmdDb2xvciIsImd1ZXNzIiwiYXBwZW5kQ2hpbGQiLCJ0b1N0cmluZyIsImNsdWVOdW1EaXYiLCJjcmVhdGVUZXh0Tm9kZSIsImNpcmNsZSIsImNvbXBsZXRlZENsdWVzIiwiYWNyb3NzIiwiZG93biIsImNsdWVzIiwiY2x1ZSIsInBhcnNlZENsdWUiLCJzcGxpdCIsInBhcnNlSW50IiwiY2x1ZVJlZiIsImNsdWVUZXh0Iiwic2xpY2UiLCJqb2luIiwiY2x1ZURpdiIsImlkIiwiaW5jbHVkZXMiLCJudW1EaXYiLCJ0ZXh0RGl2IiwiZXZlbnQiLCJ0YXJnZXQiLCJjbHVlQ2xpY2tlZCIsIm1lIiwiaW5pdGlhdG9yIiwidGhleSIsIm15Tmlja25hbWUiLCJkaXNwbGF5TmFtZSIsIm9wcE5pY2tuYW1lIiwiaW5kZXhPZiIsImxlbmd0aCIsInNjb3JlIiwicmVwbGFjZSIsInVwZGF0ZVNjb3JlSGlnaGxpZ2h0aW5nIiwiZW1wdHlTcXVhcmVzIiwicmVzdWx0Iiwid2lubmVyIiwicHV6emxlR2FtZXMiLCJzaG93UmVwbGF5RGlhbG9nIiwic2F2ZVB1enpsZSIsImRpcmVjdGlvbiIsImNsdWVOdW1iZXJUZXh0IiwicGFyZW50RWxlbWVudCIsImZpcnN0Q2hpbGQiLCJjZWxsSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJjb2wiLCJzZWxlY3RBY3Jvc3MiLCJzZWxlY3REb3duIiwicHV6VGFibGVXaWR0aCIsIm9mZnNldFdpZHRoIiwiaW5kZXgiLCJjbGVhckxldHRlcnMiLCJnZXRXb3JkQmxvY2siLCJpbmRleEFycmF5IiwicHVzaCIsInJvd09mZnNldCIsImNsZWFySGlnaGxpZ2h0cyIsImNsdWVOdW1TdHIiLCJ0ZXh0Q29udGVudCIsInNjcm9sbEJ5IiwidG9wIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG9wIiwibGVmdCIsImJlaGF2aW9yIiwiY3VycmVudENvbCIsImlkeCIsImN1cnJlbnRSb3ciLCJyb3dBcnJheSIsImxvYWRQdXp6bGUiLCJwYXJhbU9iamVjdCIsImRpZmZpY3VsdHkiLCJkaXJlY3RvcnkiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJjb2xsZWN0aW9uIiwib25TbmFwc2hvdCIsImZldGNoIiwicmVzcG9uc2UiLCJqc29uIiwiZGlyIiwieWVhcnMiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicmFuZG9tIiwibW9udGhzIiwiZGF5cyIsImJhc2VVcmwiLCJ1cmwiLCJvYmoiLCJwYXJzZVB1enpsZSIsInNhdmVOZXdQdXp6bGUiLCJmZXRjaFB1enpsZSIsIm5ld1B1enpsZUlkIiwiZG9jUmVmIiwiZGF0YSIsIm9wcG9uZW50IiwibmV4dFR1cm4iLCJzaXplIiwiZGF0ZSIsImRvdyIsImVkaXRvciIsImkiLCJ2YWx1ZSIsImdyaWRudW1zIiwiY2lyY2xlcyIsImluaXRpYXRvclVpZCIsImlEaXNwbGF5TmFtZSIsIm9EaXNwbGF5TmFtZSIsInNxdWFyZXNXb24iLCJlcnJvcnMiLCJzdGFydCIsIkZpZWxkVmFsdWUiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJyZXNpemVQdXp6bGUiLCJjZWxsQXJyYXkiLCJ0b2dnbGVEcmF3ZXIiLCJxdWVyeVNlbGVjdG9yIiwiTWF0ZXJpYWxMYXlvdXQiLCJwbGF5V29yZCIsImFsZXJ0IiwiaW5jb21wbGV0ZSIsImNvcnJlY3RBbnN3ZXIiLCJncmlkRWxlbWVudCIsInNldENlbGxTdGF0dXMiLCJwbGF5ZXIiLCJzY29yZUNlbGwiLCJ3b3JkQmxvY2siLCJhZGRlZFNjb3JlIiwiZW50ZXJMZXR0ZXIiLCJrZXlDb2RlIiwibGV0dGVyIiwia2V5Iiwibm9kZSIsInBhcmVudE5vZGUiLCJjaGlsZE5vZGVzIiwidG9Mb3dlckNhc2UiLCJ1bmRvRW50cnkiLCJuZXh0Q2VsbEluZGV4IiwibG9jYWxJZHhBcnJheSIsImNvbmNhdCIsInRvVXBwZXJDYXNlIiwicmVwbGFjZUNoaWxkIiwiaiIsImNvbmNlZGUiLCJzcXVhcmUiLCJrZXlMaXN0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInRvZ2dsZVNjcmVlbiIsInNjcmVlbmZ1bGwiLCJlbmFibGVkIiwidG9nZ2xlIiwib24iLCJpc0Z1bGxzY3JlZW4iLCJpbml0Il0sIm1hcHBpbmdzIjoiMGhEQUFBO0FBQ0EsSUFBTUEsWUFBWSxHQUFJLFlBQVc7QUFDL0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxXQUFXLEdBQUdDLE9BQU87QUFDdkJDLEVBQUFBLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQkMsUUFBaEIsS0FBNkIsV0FBN0I7QUFDQTtBQUNBRixFQUFBQSxNQUFNLENBQUNDLFFBQVAsQ0FBZ0JDLFFBQWhCLEtBQTZCLE9BRjdCO0FBR0E7QUFDQUYsRUFBQUEsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxRQUFoQixDQUF5QkMsS0FBekI7QUFDSSwwREFESixDQUx1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a0JBQVo7QUFDRDs7QUFFRCxTQUFPO0FBQ0w7QUFDQXdOLElBQUFBLElBQUksRUFBRUEsSUFGRDtBQUdMdEYsSUFBQUEsVUFBVSxFQUFFQSxVQUhQO0FBSUx3QixJQUFBQSxXQUFXLEVBQUVBLFdBSlI7QUFLTHZJLElBQUFBLFdBQVcsRUFBRUEsV0FMUixFQUFQOztBQU9ELENBamxDb0IsRUFBckI7O0FBbWxDQTdHLFlBQVksQ0FBQ2tULElBQWIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZW52IGVzNiwgYnJvd3NlciAqL1xyXG5jb25zdCBwdXp6bGVXb3JrZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAvLyBDaGVjayB0byBtYWtlIHN1cmUgc2VydmljZSB3b3JrZXJzIGFyZSBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgYnJvd3NlcixcclxuICAvLyBhbmQgdGhhdCB0aGUgY3VycmVudCBwYWdlIGlzIGFjY2Vzc2VkIGZyb20gYSBzZWN1cmUgb3JpZ2luLiBVc2luZyBhXHJcbiAgLy8gc2VydmljZSB3b3JrZXIgZnJvbSBhbiBpbnNlY3VyZSBvcmlnaW4gd2lsbCB0cmlnZ2VyIEpTIGNvbnNvbGUgZXJyb3JzLiBTZWVcclxuICAvLyBodHRwOi8vd3d3LmNocm9taXVtLm9yZy9Ib21lL2Nocm9taXVtLXNlY3VyaXR5L3ByZWZlci1zZWN1cmUtb3JpZ2lucy1mb3ItcG93ZXJmdWwtbmV3LWZlYXR1cmVzXHJcbiAgY29uc3QgaXNMb2NhbGhvc3QgPSBCb29sZWFuKFxyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8XHJcbiAgICAgIC8vIFs6OjFdIGlzIHRoZSBJUHY2IGxvY2FsaG9zdCBhZGRyZXNzLlxyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdbOjoxXScgfHxcclxuICAgICAgLy8gMTI3LjAuMC4xLzggaXMgY29uc2lkZXJlZCBsb2NhbGhvc3QgZm9yIElQdjQuXHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5tYXRjaChcclxuICAgICAgICAgIC9eMTI3KD86XFwuKD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KSl7M30kL1xyXG4gICAgICApXHJcbiAgKTtcclxuXHJcbiAgaWYgKFxyXG4gICAgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxyXG4gICAgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgfHwgaXNMb2NhbGhvc3QpXHJcbiAgKSB7XHJcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlclxyXG4gICAgICAgIC5yZWdpc3Rlcignc2VydmljZS13b3JrZXIuanMnKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgICAgLy8gdXBkYXRlZm91bmQgaXMgZmlyZWQgaWYgc2VydmljZS13b3JrZXIuanMgY2hhbmdlcy5cclxuICAgICAgICAgIHJlZ2lzdHJhdGlvbi5vbnVwZGF0ZWZvdW5kID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZWZvdW5kIGlzIGFsc28gZmlyZWQgdGhlIHZlcnkgZmlyc3QgdGltZSB0aGUgU1cgaXNcclxuICAgICAgICAgICAgLy8gaW5zdGFsbGVkLCBhbmQgdGhlcmUncyBubyBuZWVkIHRvIHByb21wdCBmb3IgYSByZWxvYWQgYXRcclxuICAgICAgICAgICAgLy8gdGhhdCBwb2ludC5cclxuICAgICAgICAgICAgLy8gU28gY2hlY2sgaGVyZSB0byBzZWUgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSBjb250cm9sbGVkLFxyXG4gICAgICAgICAgICAvLyBpLmUuIHdoZXRoZXIgdGhlcmUncyBhbiBleGlzdGluZyBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAvLyBUaGUgdXBkYXRlZm91bmQgZXZlbnQgaW1wbGllcyB0aGF0IHJlZ2lzdHJhdGlvbi5pbnN0YWxsaW5nIGlzXHJcbiAgICAgICAgICAgICAgLy8gc2V0OlxyXG4gICAgICAgICAgICAgIC8vIGh0dHBzOi8vc2xpZ2h0bHlvZmYuZ2l0aHViLmlvL1NlcnZpY2VXb3JrZXIvc3BlYy9zZXJ2aWNlX3dvcmtlci9pbmRleC5odG1sI3NlcnZpY2Utd29ya2VyLWNvbnRhaW5lci11cGRhdGVmb3VuZC1ldmVudFxyXG4gICAgICAgICAgICAgIGNvbnN0IGluc3RhbGxpbmdXb3JrZXIgPSByZWdpc3RyYXRpb24uaW5zdGFsbGluZztcclxuXHJcbiAgICAgICAgICAgICAgaW5zdGFsbGluZ1dvcmtlci5vbnN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGluc3RhbGxpbmdXb3JrZXIuc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFsbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB0aGUgb2xkIGNvbnRlbnQgd2lsbCBoYXZlIGJlZW4gcHVyZ2VkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRoZSBmcmVzaCBjb250ZW50IHdpbGwgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlLiBJdCdzIHRoZSBwZXJmZWN0IHRpbWUgdG8gZGlzcGxheSBhIFwiTmV3XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGVudCBpcyBhdmFpbGFibGU7IHBsZWFzZSByZWZyZXNoLlwiIG1lc3NhZ2UgaW5cclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcGFnZSdzIGludGVyZmFjZS5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlZHVuZGFudCc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnVGhlIGluc3RhbGxpbmcgc2VydmljZSB3b3JrZXIgYmVjYW1lIHJlZHVuZGFudC4nXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uOicsIGUpO1xyXG4gICAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gY29uc3QgeWVhclBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWNrWWVhcicpO1xyXG4gIC8vIGNvbnN0IG1vbnRoUGlja2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BpY2tNb250aCcpO1xyXG4gIC8vIGNvbnN0IGRheVBpY2tlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWNrRGF5Jyk7XHJcbiAgY29uc3QgcHV6VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHV6VGl0bGUnKTtcclxuICBjb25zdCBwdXpUYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdXpUYWJsZScpO1xyXG4gIGNvbnN0IHB1ekF1dGhvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdXpBdXRob3InKTtcclxuICBjb25zdCBwdXpDb3B5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1ekNvcHknKTtcclxuICBjb25zdCBwdXpOb3RlcGFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1ek5vdGVwYWQnKTtcclxuICBjb25zdCBjbHVlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsdWVDb250YWluZXInKTtcclxuICBjb25zdCBhY3Jvc3NDbHVlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3Jvc3NDbHVlcycpO1xyXG4gIGNvbnN0IGRvd25DbHVlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3duQ2x1ZXMnKTtcclxuICBjb25zdCBzaW5nbGVDbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbmdsZUNsdWUnKTtcclxuICBjb25zdCBrZXlib2FyZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYkNvbnRhaW5lcicpO1xyXG4gIGNvbnN0IHNjcmVlblRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW5Ub2dnbGUnKTtcclxuICBjb25zdCBzcGxhc2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BsYXNoJyk7XHJcbiAgY29uc3Qgc2NvcmVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njb3JlcycpO1xyXG4gIGNvbnN0IG15TmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU5hbWUnKTtcclxuICBjb25zdCBvcHBOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wcE5hbWUnKTtcclxuICBjb25zdCBteVNjb3JlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215U2NvcmUnKTtcclxuICBjb25zdCBvcHBTY29yZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcHBTY29yZScpO1xyXG4gIGNvbnN0IGxvZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nbycpO1xyXG4gIGNvbnN0IGNvbmNlc3Npb25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uY2Vzc2lvbkJ0bicpO1xyXG4gIGNvbnN0IGZpcmViYXNlID0gd2luZG93LmZpcmViYXNlO1xyXG4gIGNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7XHJcbiAgY29uc3QgbWVzc2FnaW5nID0gZmlyZWJhc2UubWVzc2FnaW5nLmlzU3VwcG9ydGVkKCkgP1xyXG4gICAgICBmaXJlYmFzZS5tZXNzYWdpbmcoKSA6IG51bGw7XHJcbiAgY29uc3Qgc2NvcmVWYWx1ZXMgPSB7XHJcbiAgICBBOiAxLCBCOiA0LCBDOiA0LCBEOiAyLCBFOiAxLCBGOiA0LCBHOiAzLCBIOiA0LCBJOiAxLCBKOiAxMCwgSzogNSwgTDogMixcclxuICAgIE06IDQsIE46IDIsIE86IDEsIFA6IDQsIFE6IDEwLCBSOiAxLCBTOiAxLCBUOiAxLCBVOiAyLCBWOiA1LCBXOiA0LCBYOiA4LFxyXG4gICAgWTogNCwgWjogMTAsXHJcbiAgfTtcclxuXHJcbiAgbGV0IGN1cnJlbnRVc2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyO1xyXG4gIGxldCBteU9wcG9uZW50VWlkID0gbnVsbDtcclxuICBsZXQgY3VycmVudENlbGwgPSBudWxsO1xyXG4gIGxldCBhY3Jvc3NXb3JkID0gdHJ1ZTtcclxuICBsZXQgZ2FtZSA9IG51bGw7XHJcbiAgbGV0IGNvbHVtbnMgPSBudWxsO1xyXG4gIGxldCBjdXJyZW50Q2x1ZSA9IG51bGw7XHJcbiAgbGV0IGlkeEFycmF5ID0gW107XHJcbiAgbGV0IHB1enpsZUlkID0gbnVsbDtcclxuICBsZXQgbXlUdXJuID0gbnVsbDtcclxuICBsZXQgY2x1ZU51bUluZGljZXMgPSB7fTtcclxuXHJcbiAgaWYgKG1lc3NhZ2luZykge1xyXG4gICAgbWVzc2FnaW5nLm9uTWVzc2FnZSgocGF5bG9hZCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnb25NZXNzYWdlOiAnLCBwYXlsb2FkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcikgPT4ge1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gICAgICBpZiAobWVzc2FnaW5nKSB7XHJcbiAgICAgICAgc2VuZFRva2VuVG9TZXJ2ZXIoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvKipcclxuICAgKiBTZW5kIGNsb3VkIG1lc3NhZ2luZyB0b2tlbiB0byBzZXJ2ZXJcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gQ2xvdWQgbWVzc2FnaW5nIHRva2VuXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gc2VuZFRva2VuVG9TZXJ2ZXIoKSB7XHJcbiAgICBtZXNzYWdpbmcucmVxdWVzdFBlcm1pc3Npb24oKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJldHVybiBtZXNzYWdpbmcuZ2V0VG9rZW4oKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKCh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1Blcm1pc3Npb24gZ3JhbnRlZC4gVG9rZW46ICcsIHRva2VuKTtcclxuICAgICAgICAgIGNvbnN0IHVzZXJTdGF0dXNGaXJlc3RvcmVSZWYgPSBmaXJlYmFzZVxyXG4gICAgICAgICAgICAgIC5maXJlc3RvcmUoKVxyXG4gICAgICAgICAgICAgIC5kb2MoYC91c2Vycy8ke2N1cnJlbnRVc2VyLnVpZH1gKTtcclxuICAgICAgICAgIHVzZXJTdGF0dXNGaXJlc3RvcmVSZWYuc2V0KHttc2dUb2tlbjogdG9rZW59LCB7bWVyZ2U6IHRydWV9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVXNlciBkZW5pZWQgbWVzc2FnaW5nJywgZXJyKTtcclxuICAgICAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvZ28uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBsb2NhdGlvbi5oYXNoID0gJyNnYW1lcyc7XHJcbiAgfSk7XHJcblxyXG4gIHB1elRpdGxlLmlubmVyVGV4dCA9ICdObyBwdXp6bGUgbG9hZGVkJztcclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBmdW5jdGlvbiB0YWtlcyB0aGUgcHV6emxlIG9iamVjdCByZXR1cm5lZCBmcm9tIHRoZSBmZXRjaCBhbmQgZGlzcGxheXNcclxuICAgKiBhIGdyaWQgYW5kIGNsdWVzLiBUaGUgSFRNTCB0YWJsZSBlbGVtZW50IGlzIGEgcGxhY2Vob2xkZXIgYW5kIHRoZSByb3dzIGFuZFxyXG4gICAqIGNlbGxzIGFyZSBjcmVhdGVkIG9uIHRoZSBmbHkuIFRoZSBmZXRjaGVkIHB1enpsZSBpcyBzdG9yZWQgYXMgYW4gb2JqZWN0IGluXHJcbiAgICogdGhlIHZhcmlhYmxlIFwiZ2FtZVwiLlxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNob3dQdXp6bGUoKSB7XHJcbiAgICAvLyBjbGVhciBwcmV2aW91cyBwdXp6bGUgaWYgaXQgZXhpc3RzXHJcbiAgICBpZiAocHV6VGFibGUuY2hpbGRyZW4pIHtcclxuICAgICAgY2xlYXJQdXp6bGUoKTtcclxuICAgIH1cclxuICAgIGlkeEFycmF5ID0gW107XHJcbiAgICBjbHVlTnVtSW5kaWNlcyA9IHt9O1xyXG4gICAgLy8gaW5pdGlhbCBlc3RpbWF0ZSBvZiBlbGVtZW50IHNpemUgdXNlZCB0byBkZXRlcm1pbmVcclxuICAgIC8vIGNlbGxEaW0gLT4gdGFibGVEaW0gLT4gcHV6emxlIHNpemVcclxuICAgIGlmIChnYW1lLnB1enpsZS5ub3RlcGFkKSB7XHJcbiAgICAgIC8vIHB1ek5vdGVwYWQuc3R5bGUud2lkdGggPSAnMzAwcHgnO1xyXG4gICAgICBwdXpOb3RlcGFkLmlubmVySFRNTCA9IGA8Yj5Ob3RlcGFkOjwvYj4ke2dhbWUucHV6emxlLm5vdGVwYWR9YDtcclxuICAgICAgcHV6Tm90ZXBhZC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgfVxyXG4gICAgcHV6VGl0bGUuaW5uZXJUZXh0ID0gZ2FtZS5wdXp6bGUudGl0bGUgPyBnYW1lLnB1enpsZS50aXRsZSA6ICdVbnRpdGxlZCc7XHJcbiAgICBwdXpBdXRob3IuaW5uZXJUZXh0ID0gYGJ5ICR7XHJcbiAgICAgIGdhbWUucHV6emxlLmF1dGhvciA/IGdhbWUucHV6emxlLmF1dGhvciA6ICdBbm9ueW1vdXMnXHJcbiAgICB9YDtcclxuICAgIHB1ekNvcHkuaW5uZXJIVE1MID0gZ2FtZS5wdXp6bGUuY29weXJpZ2h0ID9cclxuICAgICAgYCZjb3B5OyAke2dhbWUucHV6emxlLmNvcHlyaWdodH1gIDpcclxuICAgICAgJyc7XHJcblxyXG4gICAgY29uc3QgY2VsbERpbSA9IGdldENlbGxEaW0oKTtcclxuICAgIGNvbnN0IHRhYmxlRGltID0gY2VsbERpbSAqIGdhbWUucHV6emxlLnJvd3M7XHJcbiAgICBsZXQgZ3JpZEluZGV4ID0gMDtcclxuICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCBnYW1lLnB1enpsZS5yb3dzOyByb3dJbmRleCArPSAxKSB7XHJcbiAgICAgIGNvbnN0IHJvdyA9IHB1elRhYmxlLmluc2VydFJvdyhyb3dJbmRleCk7XHJcbiAgICAgIHJvdy5zdHlsZS53aWR0aCA9IGAke3RhYmxlRGltfXB4YDtcclxuICAgICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IGdhbWUucHV6emxlLmNvbHM7IGNvbEluZGV4ICs9IDEpIHtcclxuICAgICAgICBjb25zdCBjbHVlTnVtYmVyID0gZ2FtZS5wdXp6bGUuZ3JpZFtncmlkSW5kZXhdLmNsdWVOdW07XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHJvdy5pbnNlcnRDZWxsKGNvbEluZGV4KTtcclxuICAgICAgICBjb25zdCBibGFja0NlbGwgPSBnYW1lLnB1enpsZS5ncmlkW2dyaWRJbmRleF0uYmxhY2s7XHJcblxyXG4gICAgICAgIGNlbGwuc3R5bGUud2lkdGggPSBgJHtjZWxsRGltfXB4YDtcclxuICAgICAgICBjZWxsLnN0eWxlLmhlaWdodCA9IGAke2NlbGxEaW19cHhgO1xyXG4gICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjZWxsQ2xpY2tlZCk7XHJcbiAgICAgICAgaWYgKGJsYWNrQ2VsbCkge1xyXG4gICAgICAgICAgY2VsbC5jbGFzc05hbWUgPSAnYmxhY2snO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2N1cnNvclBvaW50ZXInKTtcclxuICAgICAgICAgIGNvbnN0IHNxdWFyZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgY29uc3QgbGV0dGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBzcXVhcmVEaXYuY2xhc3NMaXN0LmFkZCgnc3F1YXJlJyk7XHJcbiAgICAgICAgICBsZXR0ZXJEaXYuY2xhc3NMaXN0LmFkZCgnbWFyZ2luQXV0bycpO1xyXG4gICAgICAgICAgaWYgKGdhbWUucHV6emxlLmdyaWRbZ3JpZEluZGV4XS5zdGF0dXMgPT09ICdsb2NrZWQnKSB7XHJcbiAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChnYW1lLnB1enpsZS5ncmlkW2dyaWRJbmRleF0uYmdDb2xvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBndWVzcyA9IGdhbWUucHV6emxlLmdyaWRbZ3JpZEluZGV4XS5ndWVzcztcclxuICAgICAgICAgIGxldHRlckRpdi5pbm5lclRleHQgPSBndWVzcyA/IGd1ZXNzIDogJyc7XHJcbiAgICAgICAgICBzcXVhcmVEaXYuYXBwZW5kQ2hpbGQobGV0dGVyRGl2KTtcclxuICAgICAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoc3F1YXJlRGl2KTtcclxuICAgICAgICAgIGlmIChjbHVlTnVtYmVyICE9PSAnJykge1xyXG4gICAgICAgICAgICBjbHVlTnVtSW5kaWNlc1tjbHVlTnVtYmVyLnRvU3RyaW5nKCldID0gZ3JpZEluZGV4O1xyXG4gICAgICAgICAgICBjb25zdCBjbHVlTnVtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNsdWVOdW1EaXYuY2xhc3NMaXN0LmFkZCgnY2x1ZU51bWJlcicpO1xyXG4gICAgICAgICAgICBjbHVlTnVtRGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNsdWVOdW1iZXIpKTtcclxuICAgICAgICAgICAgY2VsbC5hcHBlbmRDaGlsZChjbHVlTnVtRGl2KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChnYW1lLnB1enpsZS5ncmlkW2dyaWRJbmRleF0uY2lyY2xlKSB7XHJcbiAgICAgICAgICAgIGNlbGwuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnY2lyY2xlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdyaWRJbmRleCArPSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAga2V5Ym9hcmQuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKTtcclxuICAgIGtleWJvYXJkLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlGbGV4Jyk7XHJcbiAgICBjbHVlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICBzcGxhc2guY2xhc3NMaXN0LmFkZCgnZGlzcGxheU5vbmUnKTtcclxuXHJcbiAgICBpZiAoIWdhbWUucHV6emxlLmNvbXBsZXRlZENsdWVzKSB7XHJcbiAgICAgIGdhbWUucHV6emxlLmNvbXBsZXRlZENsdWVzID0ge307XHJcbiAgICAgIGdhbWUucHV6emxlLmNvbXBsZXRlZENsdWVzLmFjcm9zcyA9IFtdO1xyXG4gICAgICBnYW1lLnB1enpsZS5jb21wbGV0ZWRDbHVlcy5kb3duID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY3JlYXRlIGNvbnRlbnRzIGZvciBhY3Jvc3MgY2x1ZXMgZGl2XHJcbiAgICBmb3IgKGNvbnN0IGNsdWUgb2YgZ2FtZS5wdXp6bGUuY2x1ZXMuYWNyb3NzKSB7XHJcbiAgICAgIGNvbnN0IHBhcnNlZENsdWUgPSBjbHVlLnNwbGl0KCcuJyk7XHJcbiAgICAgIGNvbnN0IGNsdWVOdW1iZXIgPSBwYXJzZUludChwYXJzZWRDbHVlWzBdLCAxMCk7XHJcbiAgICAgIGNvbnN0IGNsdWVSZWYgPSBwYXJzZWRDbHVlWzBdICsgJy4nO1xyXG4gICAgICBjb25zdCBjbHVlVGV4dCA9IHBhcnNlZENsdWUuc2xpY2UoMSkuam9pbignLicpO1xyXG4gICAgICBjb25zdCBjbHVlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGNsdWVEaXYuY2xhc3NMaXN0LmFkZCgnZGlzcGxheUZsZXgnLCAnY3Vyc29yUG9pbnRlcicpO1xyXG4gICAgICBjbHVlRGl2LmlkID0gJ2Fjcm9zcycgKyBjbHVlTnVtYmVyO1xyXG4gICAgICBpZiAoZ2FtZS5wdXp6bGUuY29tcGxldGVkQ2x1ZXMuYWNyb3NzLmluY2x1ZGVzKGNsdWVOdW1iZXIpKSB7XHJcbiAgICAgICAgY2x1ZURpdi5jbGFzc0xpc3QuYWRkKCdjb2xvckxpZ2h0R3JheScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBudW1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgbnVtRGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNsdWVSZWYpKTtcclxuICAgICAgbnVtRGl2LmNsYXNzTGlzdC5hZGQoJ3BhZFJpZ2h0JywgJ2N1cnNvclBvaW50ZXInKTtcclxuXHJcbiAgICAgIGNvbnN0IHRleHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgdGV4dERpdi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjbHVlVGV4dCkpO1xyXG4gICAgICB0ZXh0RGl2LmNsYXNzTGlzdC5hZGQoJ2N1cnNvclBvaW50ZXInKTtcclxuICAgICAgY2x1ZURpdi5hcHBlbmRDaGlsZChudW1EaXYpO1xyXG4gICAgICBjbHVlRGl2LmFwcGVuZENoaWxkKHRleHREaXYpO1xyXG4gICAgICAvLyBjbHVlRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWNyb3NzQ2x1ZUNsaWNrKTtcclxuICAgICAgYWNyb3NzQ2x1ZXMuYXBwZW5kQ2hpbGQoY2x1ZURpdik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY3JlYXRlIGNvbnRlbnRzIGZvciBkb3duIGNsdWVzIGRpdlxyXG4gICAgZm9yIChjb25zdCBjbHVlIG9mIGdhbWUucHV6emxlLmNsdWVzLmRvd24pIHtcclxuICAgICAgY29uc3QgcGFyc2VkQ2x1ZSA9IGNsdWUuc3BsaXQoJy4nKTtcclxuICAgICAgY29uc3QgY2x1ZU51bWJlciA9IHBhcnNlSW50KHBhcnNlZENsdWVbMF0sIDEwKTtcclxuICAgICAgY29uc3QgY2x1ZVJlZiA9IHBhcnNlZENsdWVbMF0gKyAnLic7XHJcbiAgICAgIGNvbnN0IGNsdWVUZXh0ID0gcGFyc2VkQ2x1ZS5zbGljZSgxKS5qb2luKCcuJyk7XHJcbiAgICAgIGNvbnN0IGNsdWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgY2x1ZURpdi5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5RmxleCcsICdjdXJzb3JQb2ludGVyJyk7XHJcbiAgICAgIGNsdWVEaXYuaWQgPSAnZG93bicgKyBjbHVlTnVtYmVyO1xyXG4gICAgICBpZiAoZ2FtZS5wdXp6bGUuY29tcGxldGVkQ2x1ZXMuZG93bi5pbmNsdWRlcyhjbHVlTnVtYmVyKSkge1xyXG4gICAgICAgIGNsdWVEaXYuY2xhc3NMaXN0LmFkZCgnY29sb3JMaWdodEdyYXknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbnVtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIG51bURpdi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjbHVlUmVmKSk7XHJcbiAgICAgIG51bURpdi5jbGFzc0xpc3QuYWRkKCdwYWRSaWdodCcsICdjdXJzb3JQb2ludGVyJyk7XHJcblxyXG4gICAgICBjb25zdCB0ZXh0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHRleHREaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2x1ZVRleHQpKTtcclxuICAgICAgdGV4dERpdi5jbGFzc0xpc3QuYWRkKCdjdXJzb3JQb2ludGVyJyk7XHJcbiAgICAgIGNsdWVEaXYuYXBwZW5kQ2hpbGQobnVtRGl2KTtcclxuICAgICAgY2x1ZURpdi5hcHBlbmRDaGlsZCh0ZXh0RGl2KTtcclxuICAgICAgZG93bkNsdWVzLmFwcGVuZENoaWxkKGNsdWVEaXYpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjcm9zc0NsdWVzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuaW5uZXJUZXh0ICE9PSAnJykge1xyXG4gICAgICAgIGNsdWVDbGlja2VkKGV2ZW50LCAnYWNyb3NzJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRvd25DbHVlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmlubmVyVGV4dCAhPT0gJycpIHtcclxuICAgICAgICBjbHVlQ2xpY2tlZChldmVudCwgJ2Rvd24nKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2NvcmVzLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICBzY29yZXMuY2xhc3NMaXN0LmFkZCgnZGlzcGxheUZsZXgnKTtcclxuICAgIGNvbnN0IG1lID0gY3VycmVudFVzZXIudWlkID09PSBnYW1lLmluaXRpYXRvci51aWQgP1xyXG4gICAgICAgICdpbml0aWF0b3InIDogJ29wcG9uZW50JztcclxuICAgIGNvbnN0IHRoZXkgPSBtZSA9PT0gJ2luaXRpYXRvcicgPyAnb3Bwb25lbnQnIDogJ2luaXRpYXRvcic7XHJcbiAgICBsZXQgbXlOaWNrbmFtZSA9IGdhbWVbbWVdLmRpc3BsYXlOYW1lO1xyXG4gICAgbGV0IG9wcE5pY2tuYW1lID0gZ2FtZVt0aGV5XS5kaXNwbGF5TmFtZTtcclxuXHJcbiAgICBteU5pY2tuYW1lID1cclxuICAgICAgbXlOaWNrbmFtZS5pbmRleE9mKCcgJykgPT09IC0xID9cclxuICAgICAgbXlOaWNrbmFtZSA6XHJcbiAgICAgIG15Tmlja25hbWUuc2xpY2UoMCwgbXlOaWNrbmFtZS5pbmRleE9mKCcgJykpO1xyXG4gICAgbXlOaWNrbmFtZSA9IG15Tmlja25hbWUubGVuZ3RoID4gOCA/IG15Tmlja25hbWUuc2xpY2UoMCwgOCkgOiBteU5pY2tuYW1lO1xyXG4gICAgbXlOYW1lLmlubmVyVGV4dCA9IG15Tmlja25hbWU7XHJcbiAgICBvcHBOaWNrbmFtZSA9XHJcbiAgICAgIG9wcE5pY2tuYW1lLmluZGV4T2YoJyAnKSA9PT0gLTEgP1xyXG4gICAgICBvcHBOaWNrbmFtZSA6XHJcbiAgICAgIG9wcE5pY2tuYW1lLnNsaWNlKDAsIG9wcE5pY2tuYW1lLmluZGV4T2YoJyAnKSk7XHJcbiAgICBvcHBOaWNrbmFtZSA9XHJcbiAgICAgIG9wcE5pY2tuYW1lLmxlbmd0aCA+IDggPyBvcHBOaWNrbmFtZS5zbGljZSgwLCA4KSA6IG9wcE5pY2tuYW1lO1xyXG4gICAgb3BwTmFtZS5pbm5lclRleHQgPSBvcHBOaWNrbmFtZTtcclxuICAgIG15U2NvcmUuaW5uZXJUZXh0ID0gZ2FtZVttZV0uc2NvcmU7XHJcbiAgICBvcHBTY29yZS5pbm5lclRleHQgPSBnYW1lW3RoZXldLnNjb3JlO1xyXG4gICAgbXlOYW1lLmNsYXNzTGlzdC5hZGQoZ2FtZVttZV0uYmdDb2xvci5yZXBsYWNlKCdiZycsICdmb250JykpO1xyXG4gICAgb3BwTmFtZS5jbGFzc0xpc3QuYWRkKGdhbWVbdGhleV0uYmdDb2xvci5yZXBsYWNlKCdiZycsICdmb250JykpO1xyXG4gICAgdXBkYXRlU2NvcmVIaWdobGlnaHRpbmcoKTtcclxuICAgIGlmIChnYW1lLmVtcHR5U3F1YXJlcyA9PT0gMCkge1xyXG4gICAgICBsZXQgcmVzdWx0ID0gJ1lPVSBXT04hISc7XHJcbiAgICAgIGlmIChnYW1lW21lXS5zY29yZSA+IGdhbWVbdGhleV0uc2NvcmUpIHtcclxuICAgICAgICBnYW1lLndpbm5lciA9IGdhbWVbbWVdLnVpZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBnYW1lLndpbm5lciA9IGdhbWVbdGhleV0udWlkO1xyXG4gICAgICAgIHJlc3VsdCA9ICdZb3UgbG9zdCc7XHJcbiAgICAgIH1cclxuICAgICAgZ2FtZS5zdGF0dXMgPSAnZmluaXNoZWQnO1xyXG4gICAgICB3aW5kb3cucHV6emxlR2FtZXMuc2hvd1JlcGxheURpYWxvZyhnYW1lLCByZXN1bHQpO1xyXG4gICAgICBzYXZlUHV6emxlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGVuIGNsdWUgaXMgY2xpY2tlZCwgdGhpcyBldmVudCBmaXJlc1xyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IE1vdXNlIGNsaWNrIG9yIHNjcmVlbiB0b3VjaCBldmVudFxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkaXJlY3Rpb24gQ2x1ZSBkaXJlY3Rpb24gKGFjcm9zcyBvciBkb3duKVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGNsdWVDbGlja2VkKGV2ZW50LCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBjbHVlTnVtYmVyVGV4dCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmZpcnN0Q2hpbGQuaW5uZXJUZXh0O1xyXG4gICAgY2x1ZU51bWJlclRleHQgPSBjbHVlTnVtYmVyVGV4dC5zbGljZSgwLCBjbHVlTnVtYmVyVGV4dC5pbmRleE9mKCcuJykpO1xyXG4gICAgY29uc3QgY2VsbEluZGV4ID0gY2x1ZU51bUluZGljZXNbY2x1ZU51bWJlclRleHRdO1xyXG4gICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihjZWxsSW5kZXggLyBjb2x1bW5zKTtcclxuICAgIGNvbnN0IGNvbCA9IGNlbGxJbmRleCAtIHJvdyAqIGNvbHVtbnM7XHJcbiAgICBjb25zdCBjZWxsID0gcHV6VGFibGUuZmlyc3RDaGlsZC5jaGlsZHJlbltyb3ddLmNoaWxkcmVuW2NvbF07XHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSAnYWNyb3NzJykge1xyXG4gICAgICBzZWxlY3RBY3Jvc3MoY2VsbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxlY3REb3duKGNlbGwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsY3VsYXRlcyB3aWR0aC9oZWlnaHQgZGltZW5zaW9uIG9mIHNpbmdsZSBjZWxsIGluIHB4XHJcbiAgICogQHJldHVybiB7bnVtYmVyfSBkaW1lbnNpb25cclxuICAgKi9cclxuICBmdW5jdGlvbiBnZXRDZWxsRGltKCkge1xyXG4gICAgY29uc3QgcHV6VGFibGVXaWR0aCA9IHB1elRhYmxlLm9mZnNldFdpZHRoO1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IocHV6VGFibGVXaWR0aCAvIGdhbWUucHV6emxlLnJvd3MpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgdmFyaWFibGUgY3VycmVudENlbGwgdG8gdGhlIGNlbGwgdGhlIHVzZXIgY2xpY2tlZCBpblxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IE1vdXNlIGNsaWNrIG9yIHNjcmVlbiB0b3VjaCBldmVudFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGNlbGxDbGlja2VkKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjZWxsID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgY29uc3Qgcm93ID0gY2VsbC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xyXG4gICAgY29uc3QgY29sID0gY2VsbC5jZWxsSW5kZXg7XHJcbiAgICBjb25zdCBpbmRleCA9IHJvdyAqIGNvbHVtbnMgKyBjb2w7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhjZWxsLmNlbGxJbmRleCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhjZWxsLnBhcmVudEVsZW1lbnQucm93SW5kZXgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xyXG5cclxuICAgIGlmIChjZWxsLmNsYXNzTmFtZSA9PT0gJ2JsYWNrJykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIWlkeEFycmF5LmluY2x1ZGVzKGluZGV4KSkge1xyXG4gICAgICBjbGVhckxldHRlcnMoKTtcclxuICAgIH1cclxuICAgIGlmIChjdXJyZW50Q2VsbCAmJiBjdXJyZW50Q2VsbCA9PT0gY2VsbCkge1xyXG4gICAgICBjbGVhckxldHRlcnMoKTtcclxuICAgICAgYWNyb3NzV29yZCA9ICFhY3Jvc3NXb3JkO1xyXG4gICAgfVxyXG4gICAgaWR4QXJyYXkgPSBbXTtcclxuICAgIGN1cnJlbnRDZWxsID0gY2VsbDtcclxuICAgIGlmIChhY3Jvc3NXb3JkKSB7XHJcbiAgICAgIHNlbGVjdEFjcm9zcyhjZWxsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGVjdERvd24oY2VsbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQ2xlYXJzIGxldHRlcnMgd2hlbiB1c2VyIGNoYW5nZXMgdG8gYSBkaWZmZXJlbnQgY2x1ZSAqL1xyXG4gIGZ1bmN0aW9uIGNsZWFyTGV0dGVycygpIHtcclxuICAgIGZvciAoY29uc3QgaW5kZXggb2YgaWR4QXJyYXkpIHtcclxuICAgICAgaWYgKGdhbWUucHV6emxlLmdyaWRbaW5kZXhdLnN0YXR1cyA9PT0gJ2xvY2tlZCcpIGNvbnRpbnVlO1xyXG4gICAgICBnYW1lLnB1enpsZS5ncmlkW2luZGV4XS5ndWVzcyA9ICcnO1xyXG4gICAgICBjb25zdCByb3cgPSBNYXRoLmZsb29yKGluZGV4IC8gY29sdW1ucyk7XHJcbiAgICAgIGNvbnN0IGNvbCA9IGluZGV4IC0gcm93ICogY29sdW1ucztcclxuICAgICAgcHV6VGFibGUuZmlyc3RDaGlsZC5jaGlsZHJlbltyb3ddLmNoaWxkcmVuW1xyXG4gICAgICAgICAgY29sXHJcbiAgICAgIF0uZmlyc3RDaGlsZC5maXJzdENoaWxkLmlubmVyVGV4dCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBpbmRpY2VzIG9mIGNlbGxzIHRoYXQgbWFrZSB1cCBhIHdvcmQgYmxvY2sgaW5cclxuICAgKiB0aGUgY3VycmVudCBwdXp6bGUuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGNlbGwgQ2VsbCBpbiBwdXp6bGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyZWN0aW9uIERpcmVjdGlvbiAoYWNyb3NzIG9yIGRvd24pXHJcbiAgICogQHJldHVybiB7YXJyYXl9IEFycmF5IG9mIGluZGljZXMgdGhhdCBtYWtlIHVwIGEgd29yZCBibG9ja1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGdldFdvcmRCbG9jayhjZWxsLCBkaXJlY3Rpb24pIHtcclxuICAgIGNvbnN0IHJvdyA9IGNlbGwucGFyZW50RWxlbWVudC5yb3dJbmRleDtcclxuICAgIGNvbnN0IGNvbCA9IGNlbGwuY2VsbEluZGV4O1xyXG4gICAgbGV0IGluZGV4ID0gcm93ICogY29sdW1ucyArIGNvbDtcclxuICAgIGNvbnN0IGluZGV4QXJyYXkgPSBbXTtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdhY3Jvc3MnKSB7XHJcbiAgICAgIHdoaWxlIChpbmRleCA+IHJvdyAqIGNvbHVtbnMgJiYgIWdhbWUucHV6emxlLmdyaWRbaW5kZXggLSAxXS5ibGFjaykge1xyXG4gICAgICAgIGluZGV4LS07XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGluZGV4IDwgKHJvdyArIDEpICogY29sdW1ucyAmJiAhZ2FtZS5wdXp6bGUuZ3JpZFtpbmRleF0uYmxhY2spIHtcclxuICAgICAgICBpbmRleEFycmF5LnB1c2goaW5kZXgpO1xyXG4gICAgICAgIGluZGV4Kys7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdoaWxlIChpbmRleCA+PSBjb2x1bW5zICYmICFnYW1lLnB1enpsZS5ncmlkW2luZGV4IC0gY29sdW1uc10uYmxhY2spIHtcclxuICAgICAgICBpbmRleCAtPSBjb2x1bW5zO1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChcclxuICAgICAgICBpbmRleCA8IGdhbWUucHV6emxlLnJvd3MgKiBjb2x1bW5zICYmXHJcbiAgICAgICAgIWdhbWUucHV6emxlLmdyaWRbaW5kZXhdLmJsYWNrXHJcbiAgICAgICkge1xyXG4gICAgICAgIGluZGV4QXJyYXkucHVzaChpbmRleCk7XHJcbiAgICAgICAgaW5kZXggKz0gY29sdW1ucztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluZGV4QXJyYXk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIaWdobGlnaHRzIGFuIGFjcm9zcyBjbHVlIGFuZCBsb2NhdGlvbiBpbiBwdXp6bGUgYmFzZWQgb24gd2hpY2ggY2VsbFxyXG4gICAqIHRoZSB1c2VyIGNsaWNrc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjZWxsIENlbGwgdGhlIHVzZXIgY2xpY2tlZFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNlbGVjdEFjcm9zcyhjZWxsKSB7XHJcbiAgICBjb25zdCByb3cgPSBjZWxsLnBhcmVudEVsZW1lbnQucm93SW5kZXg7XHJcbiAgICBjb25zdCBjb2wgPSBjZWxsLmNlbGxJbmRleDtcclxuICAgIGNvbnN0IHJvd09mZnNldCA9IHJvdyAqIGNvbHVtbnM7XHJcbiAgICBjb25zdCBpbmRleCA9IHJvdyAqIGNvbHVtbnMgKyBjb2w7XHJcblxyXG4gICAgY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICBpZHhBcnJheSA9IGdldFdvcmRCbG9jayhjZWxsLCAnYWNyb3NzJyk7XHJcbiAgICBjdXJyZW50Q2x1ZSA9IGdhbWUucHV6emxlLmdyaWRbaWR4QXJyYXlbMF1dLmNsdWVOdW07XHJcbiAgICBmb3IgKGNvbnN0IGNsdWUgb2YgYWNyb3NzQ2x1ZXMuY2hpbGRyZW4pIHtcclxuICAgICAgY29uc3QgY2x1ZU51bVN0ciA9IGNsdWUuY2hpbGRyZW5bMF0udGV4dENvbnRlbnQuc3BsaXQoJy4nKVswXTtcclxuICAgICAgaWYgKGNsdWVOdW1TdHIgPT09IGN1cnJlbnRDbHVlLnRvU3RyaW5nKCkpIHtcclxuICAgICAgICBjbHVlLmNsYXNzTGlzdC5hZGQoJ3JhbmdlSGlnaGxpZ2h0JywgJ2NsdWVQb3AnKTtcclxuICAgICAgICBhY3Jvc3NDbHVlcy5zY3JvbGxCeSh7XHJcbiAgICAgICAgICB0b3A6IGNsdWUub2Zmc2V0VG9wIC0gMTAwIC0gYWNyb3NzQ2x1ZXMuc2Nyb2xsVG9wLFxyXG4gICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICAgICAgICB9KTtcclxuICAgICAgICBzaW5nbGVDbHVlLmlubmVyVGV4dCA9IGNsdWUuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBjdXJyZW50Q29sID0gaW5kZXggLSByb3dPZmZzZXQ7XHJcbiAgICBsZXQgY3VycmVudENlbGwgPSBjZWxsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bY3VycmVudENvbF07XHJcbiAgICBjZWxsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW5baWR4QXJyYXlbMF0gLSByb3dPZmZzZXRdLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgJ2JvcmRlcjJweExlZnQnXHJcbiAgICApO1xyXG4gICAgZm9yIChjb25zdCBpZHggb2YgaWR4QXJyYXkpIHtcclxuICAgICAgY3VycmVudENvbCA9IGlkeCAtIHJvd09mZnNldDtcclxuICAgICAgY3VycmVudENlbGwgPSBjZWxsLnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bY3VycmVudENvbF07XHJcbiAgICAgIGN1cnJlbnRDZWxsLmNsYXNzTGlzdC5hZGQoJ2JvcmRlcjJweFRvcCcsICdib3JkZXIycHhCb3R0b20nKTtcclxuICAgICAgY3VycmVudENlbGwuY2xhc3NMaXN0LmFkZChcclxuICAgICAgICBjdXJyZW50Q29sID09PSBjb2wgPyAnY3VyckNlbGxIaWdobGlnaHQnIDogJ3JhbmdlSGlnaGxpZ2h0J1xyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgY2VsbC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuW1xyXG4gICAgICAgIGlkeEFycmF5W2lkeEFycmF5Lmxlbmd0aCAtIDFdIC0gcm93T2Zmc2V0XHJcbiAgICBdLmNsYXNzTGlzdC5hZGQoJ2JvcmRlcjJweFJpZ2h0Jyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIaWdobGlnaHRzIGEgZG93biBjbHVlIGFuZCBsb2NhdGlvbiBpbiBwdXp6bGUgYmFzZWQgb24gd2hpY2ggY2VsbFxyXG4gICAqIHRoZSB1c2VyIGNsaWNrc1xyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjZWxsIENlbGwgdGhlIHVzZXIgY2xpY2tlZFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNlbGVjdERvd24oY2VsbCkge1xyXG4gICAgY29uc3Qgcm93ID0gY2VsbC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xyXG4gICAgY29uc3QgY29sID0gY2VsbC5jZWxsSW5kZXg7XHJcbiAgICBjb25zdCBpbmRleCA9IHJvdyAqIGNvbHVtbnMgKyBjb2w7XHJcblxyXG4gICAgY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICBpZHhBcnJheSA9IGdldFdvcmRCbG9jayhjZWxsLCAnZG93bicpO1xyXG4gICAgLy8gZ2V0IHRoZSBudW1iZXIgb2YgdGhlIGNsdWUgbnVtYmVyXHJcbiAgICBjdXJyZW50Q2x1ZSA9IGdhbWUucHV6emxlLmdyaWRbaWR4QXJyYXlbMF1dLmNsdWVOdW07XHJcbiAgICBmb3IgKGNvbnN0IGNsdWUgb2YgZG93bkNsdWVzLmNoaWxkcmVuKSB7XHJcbiAgICAgIGNvbnN0IGNsdWVOdW1TdHIgPSBjbHVlLmNoaWxkcmVuWzBdLnRleHRDb250ZW50LnNwbGl0KCcuJylbMF07XHJcbiAgICAgIGlmIChjbHVlTnVtU3RyID09PSBjdXJyZW50Q2x1ZS50b1N0cmluZygpKSB7XHJcbiAgICAgICAgY2x1ZS5jbGFzc0xpc3QuYWRkKCdyYW5nZUhpZ2hsaWdodCcsICdjbHVlUG9wJyk7XHJcbiAgICAgICAgZG93bkNsdWVzLnNjcm9sbEJ5KHtcclxuICAgICAgICAgIHRvcDogY2x1ZS5vZmZzZXRUb3AgLSAxMDAgLSBkb3duQ2x1ZXMuc2Nyb2xsVG9wLFxyXG4gICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICAgICAgICB9KTtcclxuICAgICAgICBzaW5nbGVDbHVlLmlubmVyVGV4dCA9IGNsdWUuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBjdXJyZW50Um93ID0gTWF0aC5mbG9vcihpbmRleCAvIGNvbHVtbnMpO1xyXG4gICAgbGV0IGN1cnJlbnRDZWxsID0gcHV6VGFibGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bY3VycmVudFJvd10uY2hpbGRyZW5bY29sXTtcclxuICAgIHB1elRhYmxlLmNoaWxkcmVuWzBdLmNoaWxkcmVuW01hdGguZmxvb3IoaWR4QXJyYXlbMF0gLyBjb2x1bW5zKV0uY2hpbGRyZW5bXHJcbiAgICAgICAgY29sXHJcbiAgICBdLmNsYXNzTGlzdC5hZGQoJ2JvcmRlcjJweFRvcCcpO1xyXG4gICAgZm9yIChjb25zdCBpZHggb2YgaWR4QXJyYXkpIHtcclxuICAgICAgY3VycmVudFJvdyA9IE1hdGguZmxvb3IoaWR4IC8gY29sdW1ucyk7XHJcbiAgICAgIGN1cnJlbnRDZWxsID0gcHV6VGFibGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bY3VycmVudFJvd10uY2hpbGRyZW5bY29sXTtcclxuICAgICAgY3VycmVudENlbGwuY2xhc3NMaXN0LmFkZCgnYm9yZGVyMnB4TGVmdCcsICdib3JkZXIycHhSaWdodCcpO1xyXG4gICAgICBjdXJyZW50Q2VsbC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgIGN1cnJlbnRSb3cgPT09IHJvdyA/ICdjdXJyQ2VsbEhpZ2hsaWdodCcgOiAncmFuZ2VIaWdobGlnaHQnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBwdXpUYWJsZS5jaGlsZHJlblswXS5jaGlsZHJlbltcclxuICAgICAgICBNYXRoLmZsb29yKGlkeEFycmF5W2lkeEFycmF5Lmxlbmd0aCAtIDFdIC8gY29sdW1ucylcclxuICAgIF0uY2hpbGRyZW5bY29sXS5jbGFzc0xpc3QuYWRkKCdib3JkZXIycHhCb3R0b20nKTtcclxuICB9XHJcblxyXG4gIC8qKiBSZW1vdmVzIGNsdWUgY2VsbCBoaWdobGlnaHRpbmcgZnJvbSBhbGwgY2VsbHMgKi9cclxuICBmdW5jdGlvbiBjbGVhckhpZ2hsaWdodHMoKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhwdXpUYWJsZS5jaGlsZHJlblswXSk7XHJcbiAgICBjb25zdCByb3dBcnJheSA9IHB1elRhYmxlLmNoaWxkcmVuWzBdLmNoaWxkcmVuO1xyXG5cclxuICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd0FycmF5KSB7XHJcbiAgICAgIGZvciAoY29uc3QgY2VsbCBvZiByb3cuY2hpbGRyZW4pIHtcclxuICAgICAgICBpZiAoY2VsbC5jbGFzc05hbWUgIT09ICdibGFjaycpIHtcclxuICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgICAgICAgICAncmFuZ2VIaWdobGlnaHQnLFxyXG4gICAgICAgICAgICAgICdjdXJyQ2VsbEhpZ2hsaWdodCcsXHJcbiAgICAgICAgICAgICAgJ2JvcmRlcjJweEJvdHRvbScsXHJcbiAgICAgICAgICAgICAgJ2JvcmRlcjJweFJpZ2h0JyxcclxuICAgICAgICAgICAgICAnYm9yZGVyMnB4TGVmdCcsXHJcbiAgICAgICAgICAgICAgJ2JvcmRlcjJweFRvcCdcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGNsdWUgb2YgYWNyb3NzQ2x1ZXMuY2hpbGRyZW4pIHtcclxuICAgICAgY2x1ZS5jbGFzc0xpc3QucmVtb3ZlKCdyYW5nZUhpZ2hsaWdodCcsICdjbHVlUG9wJyk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGNsdWUgb2YgZG93bkNsdWVzLmNoaWxkcmVuKSB7XHJcbiAgICAgIGNsdWUuY2xhc3NMaXN0LnJlbW92ZSgncmFuZ2VIaWdobGlnaHQnLCAnY2x1ZVBvcCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBmdW5jdGlvbiBmZXRjaGVzIGEgcHV6emxlIGJhc2VkIG9uIHRoZSB1c2VyJ3Mgc2VsZWN0aW9uIGFuZCB0aGVuXHJcbiAgICogY2FsbHMgZnVuY3Rpb25zIHRvIGZvcm1hdCBhbmQgZGlzcGxheSB0aGUgcHV6emxlXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtT2JqZWN0IE9iamVjdCB3aXRoIGNvbXBldGl0b3JzIGFuZCBwdXp6bGUgZGlmZmljdWx0eVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGxvYWRQdXp6bGUocGFyYW1PYmplY3QpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdXpUaXRsZScpLmlubmVyVGV4dCA9ICdGZXRjaGluZyBkYXRhLi4uJztcclxuXHJcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gcGFyYW1PYmplY3QuZGlmZmljdWx0eTtcclxuXHJcbiAgICBsZXQgZGlyZWN0b3J5ID0gJ3B1ekRpck1lZC5qc29uJztcclxuICAgIGxldCB5ZWFyID0gJzE5NzYnO1xyXG4gICAgbGV0IG1vbnRoID0gJzAxJztcclxuICAgIGxldCBkYXkgPSAnMDEnO1xyXG5cclxuICAgIC8vIFN0b3AgbGlzdGVuaW5nIGZvciBwcmV2aW91cyBwdXp6bGUgY2hhbmdlc1xyXG4gICAgaWYgKHB1enpsZUlkKSB7XHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oJ2dhbWVzJylcclxuICAgICAgICAgIC5kb2MocHV6emxlSWQpXHJcbiAgICAgICAgICAub25TbmFwc2hvdCgoKSA9PiB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRpZmZpY3VsdHkgPT09ICdoYXJkJykge1xyXG4gICAgICBkaXJlY3RvcnkgPSAncHV6RGlySGFyZC5qc29uJztcclxuICAgIH0gZWxzZSBpZiAoZGlmZmljdWx0eSA9PT0gJ2Vhc3knKSB7XHJcbiAgICAgIGRpcmVjdG9yeSA9ICdwdXpEaXJFYXN5Lmpzb24nO1xyXG4gICAgfVxyXG5cclxuICAgIGZldGNoKGRpcmVjdG9yeSlcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoZGlyKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB5ZWFycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRpcik7XHJcbiAgICAgICAgICB5ZWFyID0geWVhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogeWVhcnMubGVuZ3RoKV07XHJcbiAgICAgICAgICBjb25zdCBtb250aHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhkaXJbeWVhcl0pO1xyXG4gICAgICAgICAgbW9udGggPSBtb250aHNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbW9udGhzLmxlbmd0aCldO1xyXG4gICAgICAgICAgY29uc3QgZGF5cyA9IGRpclt5ZWFyXVttb250aF07XHJcbiAgICAgICAgICBkYXkgPSBkYXlzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGRheXMubGVuZ3RoKV07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBiYXNlVXJsID1cclxuICAgICAgICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kb3NoZWEvbnl0X2Nyb3Nzd29yZHMvbWFzdGVyJztcclxuICAgICAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9LyR7eWVhcn0vJHttb250aH0vJHtkYXl9YDtcclxuICAgICAgICAgIGZldGNoKHVybClcclxuICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAudGhlbigob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZVB1enpsZShvYmopO1xyXG4gICAgICAgICAgICAgICAgc2F2ZU5ld1B1enpsZShwYXJhbU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBzaG93UHV6emxlKCk7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyNwdXp6bGUnO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHV6emxlOiAnLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwdXp6bGUgZGF0ZTogJywgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBmdW5jdGlvbiBmZXRjaGVzIGFuIGFjdGl2ZSBwdXp6bGUgYmFzZWQgb24gdGhlIHVzZXIncyBzZWxlY3Rpb25cclxuICAgKiBhbmQgdGhlbiBjYWxscyBmdW5jdGlvbnMgdG8gZm9ybWF0IGFuZCBkaXNwbGF5IHRoZSBwdXp6bGVcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3UHV6emxlSWQgRmlyZXN0b3JlIGdhbWUgKHB1enpsZSkgaWRcclxuICAgKi9cclxuICBmdW5jdGlvbiBmZXRjaFB1enpsZShuZXdQdXp6bGVJZCkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1elRpdGxlJykuaW5uZXJUZXh0ID0gJ0ZldGNoaW5nIGRhdGEuLi4nO1xyXG5cclxuICAgIGNvbnN0IGRiID0gd2luZG93LmZpcmViYXNlLmZpcmVzdG9yZSgpO1xyXG4gICAgY29uc3QgZG9jUmVmID0gZGIuY29sbGVjdGlvbignZ2FtZXMnKS5kb2MobmV3UHV6emxlSWQpO1xyXG5cclxuICAgIC8vIFN0b3AgbGlzdGVuaW5nIGZvciBwcmV2aW91cyBwdXp6bGUgY2hhbmdlc1xyXG4gICAgaWYgKHB1enpsZUlkKSB7XHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oJ2dhbWVzJylcclxuICAgICAgICAgIC5kb2MocHV6emxlSWQpXHJcbiAgICAgICAgICAub25TbmFwc2hvdCgoKSA9PiB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgZG9jUmVmLm9uU25hcHNob3QoXHJcbiAgICAgICAgKGRvYykgPT4ge1xyXG4gICAgICAgICAgZ2FtZSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgICBpZiAoZ2FtZS5zdGF0dXMgPT09ICdzdGFydGVkJykge1xyXG4gICAgICAgICAgICBteU9wcG9uZW50VWlkID1cclxuICAgICAgICAgICAgZ2FtZS5pbml0aWF0b3IudWlkID09PSBjdXJyZW50VXNlci51aWQgP1xyXG4gICAgICAgICAgICBnYW1lLm9wcG9uZW50LnVpZCA6XHJcbiAgICAgICAgICAgIGdhbWUuaW5pdGlhdG9yLnVpZDtcclxuICAgICAgICAgICAgY29sdW1ucyA9IGdhbWUucHV6emxlLmNvbHM7XHJcbiAgICAgICAgICAgIG15VHVybiA9IGdhbWUubmV4dFR1cm4gIT09IG15T3Bwb25lbnRVaWQ7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNjb3JlSGlnaGxpZ2h0aW5nKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwdXp6bGVJZCA9IG5ld1B1enpsZUlkO1xyXG4gICAgICAgICAgc2hvd1B1enpsZSgpO1xyXG4gICAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjcHV6emxlJztcclxuICAgICAgICB9LFxyXG4gICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBwdXp6bGU6ICcsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqIFV0aWxpdHkgZnVuY3Rpb24gdG8gdXBkYXRlIHNjb3JlIGRpc3BsYXkgKi9cclxuICBmdW5jdGlvbiB1cGRhdGVTY29yZUhpZ2hsaWdodGluZygpIHtcclxuICAgIHNjb3Jlcy5jaGlsZHJlblswXS5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICBteVR1cm4gPyAnYmdDb2xvclRyYW5zV2hpdGUnIDogJ2JnQ29sb3JUcmFuc0dvbGQnXHJcbiAgICApO1xyXG4gICAgc2NvcmVzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIG15VHVybiA/ICdiZ0NvbG9yVHJhbnNHb2xkJyA6ICdiZ0NvbG9yVHJhbnNXaGl0ZSdcclxuICAgICk7XHJcbiAgICBzY29yZXMuY2hpbGRyZW5bMl0uY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgbXlUdXJuID8gJ2JnQ29sb3JUcmFuc0dvbGQnIDogJ2JnQ29sb3JUcmFuc1doaXRlJ1xyXG4gICAgKTtcclxuICAgIHNjb3Jlcy5jaGlsZHJlblsyXS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICBteVR1cm4gPyAnYmdDb2xvclRyYW5zV2hpdGUnIDogJ2JnQ29sb3JUcmFuc0dvbGQnXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUGFyc2UgdGhlIGZldGNoZWQgcHV6emxlIGludG8gYSBtb3JlIGNvbXBhY3QgZm9ybVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwdXp6bGUgUHV6emxlIG9iamVjdCByZXR1cm5lZCBmcm9tIGZldGNoXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gcGFyc2VQdXp6bGUocHV6emxlKSB7XHJcbiAgICBjb25zdCByb3dzID0gcHV6emxlLnNpemUucm93cztcclxuICAgIGNvbnN0IGNvbHMgPSBwdXp6bGUuc2l6ZS5jb2xzO1xyXG4gICAgZ2FtZSA9IHt9O1xyXG4gICAgZ2FtZS5lbXB0eVNxdWFyZXMgPSByb3dzICogY29scztcclxuICAgIGdhbWUucHV6emxlID0ge307XHJcbiAgICBnYW1lLnB1enpsZS5jb2xzID0gY29scztcclxuICAgIGdhbWUucHV6emxlLnJvd3MgPSByb3dzO1xyXG4gICAgZ2FtZS5wdXp6bGUuYXV0aG9yID0gcHV6emxlLmF1dGhvcjtcclxuICAgIGdhbWUucHV6emxlLmNsdWVzID0gcHV6emxlLmNsdWVzO1xyXG4gICAgZ2FtZS5wdXp6bGUuY29weXJpZ2h0ID0gcHV6emxlLmNvcHlyaWdodDtcclxuICAgIGdhbWUucHV6emxlLmRhdGUgPSBwdXp6bGUuZGF0ZTtcclxuICAgIGdhbWUucHV6emxlLmRvdyA9IHB1enpsZS5kb3c7XHJcbiAgICBnYW1lLnB1enpsZS5lZGl0b3IgPSBwdXp6bGUuZWRpdG9yO1xyXG4gICAgZ2FtZS5wdXp6bGUubm90ZXBhZCA9IHB1enpsZS5ub3RlcGFkO1xyXG4gICAgZ2FtZS5wdXp6bGUudGl0bGUgPSBwdXp6bGUudGl0bGU7XHJcbiAgICBnYW1lLnB1enpsZS5jb21wbGV0ZWRDbHVlcyA9IHt9O1xyXG4gICAgZ2FtZS5wdXp6bGUuY29tcGxldGVkQ2x1ZXMuYWNyb3NzID0gW107XHJcbiAgICBnYW1lLnB1enpsZS5jb21wbGV0ZWRDbHVlcy5kb3duID0gW107XHJcbiAgICBnYW1lLnB1enpsZS5ncmlkID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB1enpsZS5ncmlkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGdhbWUucHV6emxlLmdyaWRbaV0gPSB7fTtcclxuICAgICAgaWYgKHB1enpsZS5ncmlkW2ldID09PSAnLicpIHtcclxuICAgICAgICBnYW1lLnB1enpsZS5ncmlkW2ldLmJsYWNrID0gdHJ1ZTtcclxuICAgICAgICBnYW1lLmVtcHR5U3F1YXJlcy0tO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdhbWUucHV6emxlLmdyaWRbaV0uYmxhY2sgPSBmYWxzZTtcclxuICAgICAgICBnYW1lLnB1enpsZS5ncmlkW2ldLnZhbHVlID0gcHV6emxlLmdyaWRbaV07XHJcbiAgICAgICAgZ2FtZS5wdXp6bGUuZ3JpZFtpXS5jbHVlTnVtID1cclxuICAgICAgICAgIHB1enpsZS5ncmlkbnVtc1tpXSA9PT0gMCA/ICcnIDogcHV6emxlLmdyaWRudW1zW2ldO1xyXG4gICAgICAgIGdhbWUucHV6emxlLmdyaWRbaV0uc3RhdHVzID0gJ2ZyZWUnO1xyXG4gICAgICAgIGdhbWUucHV6emxlLmdyaWRbaV0uY2lyY2xlID0gcHV6emxlLmNpcmNsZXMgJiYgcHV6emxlLmNpcmNsZXNbaV0gPT09IDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbHVtbnMgPSBjb2xzO1xyXG4gICAgY29uc29sZS5sb2coZ2FtZS5wdXp6bGUpO1xyXG4gIH1cclxuXHJcbiAgLyoqIFNhdmVzIG5ldyBwdXp6bGUgdG8gZmlyZWJhc2VcclxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1PYmplY3QgSWQgYW5kIGRpZmZpY3VsdHkgb2JqZWN0IHBhc3NlZCB0byBsb2FkUHV6emxlXHJcbiAgICogZnJvbSBnYW1lcy5qc1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNhdmVOZXdQdXp6bGUocGFyYW1PYmplY3QpIHtcclxuICAgIGNvbnN0IGluaXRpYXRvclVpZCA9IHBhcmFtT2JqZWN0LmluaXRpYXRvci51aWQ7XHJcbiAgICBjb25zdCBpRGlzcGxheU5hbWUgPSBwYXJhbU9iamVjdC5pbml0aWF0b3IuZGlzcGxheU5hbWU7XHJcbiAgICBteU9wcG9uZW50VWlkID0gcGFyYW1PYmplY3Qub3Bwb25lbnQudWlkO1xyXG4gICAgY29uc3Qgb0Rpc3BsYXlOYW1lID0gcGFyYW1PYmplY3Qub3Bwb25lbnQuZGlzcGxheU5hbWU7XHJcblxyXG4gICAgbXlUdXJuID0gdHJ1ZTtcclxuICAgIGdhbWUuaW5pdGlhdG9yID0ge307XHJcbiAgICBnYW1lLmluaXRpYXRvci51aWQgPSBpbml0aWF0b3JVaWQ7XHJcbiAgICBnYW1lLmluaXRpYXRvci5kaXNwbGF5TmFtZSA9IGlEaXNwbGF5TmFtZTtcclxuICAgIGdhbWUuaW5pdGlhdG9yLmJnQ29sb3IgPSAnYmdUcmFuc1JlZCc7XHJcbiAgICBnYW1lLmluaXRpYXRvci5zY29yZSA9IDA7XHJcbiAgICBnYW1lLmluaXRpYXRvci5zcXVhcmVzV29uID0gW107XHJcbiAgICBnYW1lLmluaXRpYXRvci5lcnJvcnMgPSAwO1xyXG4gICAgZ2FtZS5vcHBvbmVudCA9IHt9O1xyXG4gICAgZ2FtZS5vcHBvbmVudC51aWQgPSBteU9wcG9uZW50VWlkO1xyXG4gICAgZ2FtZS5vcHBvbmVudC5kaXNwbGF5TmFtZSA9IG9EaXNwbGF5TmFtZTtcclxuICAgIGdhbWUub3Bwb25lbnQuYmdDb2xvciA9ICdiZ1RyYW5zQmx1ZSc7XHJcbiAgICBnYW1lLm9wcG9uZW50LnNjb3JlID0gMDtcclxuICAgIGdhbWUub3Bwb25lbnQuc3F1YXJlc1dvbiA9IFtdO1xyXG4gICAgZ2FtZS5vcHBvbmVudC5lcnJvcnMgPSAwO1xyXG4gICAgZ2FtZS5kaWZmaWN1bHR5ID0gcGFyYW1PYmplY3QuZGlmZmljdWx0eTtcclxuICAgIGdhbWUuc3RhcnQgPSBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKTtcclxuICAgIGdhbWUuc3RhdHVzID0gJ3N0YXJ0ZWQnO1xyXG4gICAgZ2FtZS53aW5uZXIgPSBudWxsO1xyXG4gICAgZ2FtZS5uZXh0VHVybiA9IGluaXRpYXRvclVpZDtcclxuICAgIGRiLmNvbGxlY3Rpb24oJ2dhbWVzJylcclxuICAgICAgICAuYWRkKGdhbWUpXHJcbiAgICAgICAgLnRoZW4oKGRvY1JlZikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ2dhbWUgd3JpdHRlbiB0byBmaXJlc3RvcmUgd2l0aCBkb2NSZWY6ICcsIGRvY1JlZik7XHJcbiAgICAgICAgICBwdXp6bGVJZCA9IGRvY1JlZi5pZDtcclxuICAgICAgICAgIGRiLmNvbGxlY3Rpb24oJ2dhbWVzJylcclxuICAgICAgICAgICAgICAuZG9jKHB1enpsZUlkKVxyXG4gICAgICAgICAgICAgIC5vblNuYXBzaG90KFxyXG4gICAgICAgICAgICAgICAgICAoZG9jKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbXlUdXJuID0gZ2FtZS5uZXh0VHVybiAhPT0gbXlPcHBvbmVudFVpZDtcclxuICAgICAgICAgICAgICAgICAgICBzaG93UHV6emxlKCk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcHV6emxlOiAnLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyBmaWxlIHRvIGZpcmVzdG9yZTogJywgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIFNhdmVzIHB1enpsZSB0byBmaXJlYmFzZSAqL1xyXG4gIGZ1bmN0aW9uIHNhdmVQdXp6bGUoKSB7XHJcbiAgICBkYi5jb2xsZWN0aW9uKCdnYW1lcycpXHJcbiAgICAgICAgLmRvYyhwdXp6bGVJZClcclxuICAgICAgICAuc2V0KGdhbWUsIHttZXJnZTogdHJ1ZX0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHRvIGZpcmViYXNlOiAnLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogUmVtb3ZlcyBwdXp6bGUgZnJvbSBET00gKi9cclxuICBmdW5jdGlvbiBjbGVhclB1enpsZSgpIHtcclxuICAgIHB1elRpdGxlLmlubmVyVGV4dCA9ICdQdXp6bGUgaW5mbyB3aWxsIGFwcGVhciBoZXJlJztcclxuICAgIC8vIGNsZWFyIG91dCBvbGQgcHV6emxlIGFuZCBjbHVlc1xyXG4gICAgcHV6VGFibGUuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBwdXpBdXRob3IuaW5uZXJUZXh0ID0gJyc7XHJcbiAgICBwdXpOb3RlcGFkLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICBwdXpDb3B5LmlubmVySFRNTCA9ICcnO1xyXG4gICAgY2x1ZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgc3BsYXNoLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICBhY3Jvc3NDbHVlcy5pbm5lckhUTUwgPSAnJztcclxuICAgIGRvd25DbHVlcy5pbm5lckhUTUwgPSAnJztcclxuICAgIHNpbmdsZUNsdWUuaW5uZXJUZXh0ID0gJ1NlbGVjdCBpbiB0aGUgcHV6emxlIHRvIHJldmVhbCBjbHVlJztcclxuICB9XHJcblxyXG4gIC8qKiBSZXNpemVzIHB1enpsZSBiYXNlZCBvbiBhdmFpbGFibGUgc3BhY2UgKi9cclxuICBmdW5jdGlvbiByZXNpemVQdXp6bGUoKSB7XHJcbiAgICBpZiAocHV6VGFibGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAvLyBjb25zb2xlLmxvZyhwdXpUYWJsZS5jaGlsZHJlblswXSk7XHJcbiAgICBjb25zdCBjZWxsRGltID0gZ2V0Q2VsbERpbSgpO1xyXG4gICAgY29uc3QgdGFibGVEaW0gPSBjZWxsRGltICogZ2FtZS5wdXp6bGUucm93cztcclxuICAgIGNvbnN0IHJvd0FycmF5ID0gcHV6VGFibGUuY2hpbGRyZW5bMF0uY2hpbGRyZW47XHJcblxyXG4gICAgZm9yIChjb25zdCByb3cgb2Ygcm93QXJyYXkpIHtcclxuICAgICAgcm93LnN0eWxlLndpZHRoID0gdGFibGVEaW0gKyAncHgnO1xyXG4gICAgICBjb25zdCBjZWxsQXJyYXkgPSByb3cuY2hpbGRyZW47XHJcbiAgICAgIGZvciAoY29uc3QgY2VsbCBvZiBjZWxsQXJyYXkpIHtcclxuICAgICAgICBjZWxsLnN0eWxlLndpZHRoID0gY2VsbERpbSArICdweCc7XHJcbiAgICAgICAgY2VsbC5zdHlsZS5oZWlnaHQgPSBjZWxsRGltICsgJ3B4JztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGN1cnJlbnRDZWxsKSB7XHJcbiAgICAgIGlmIChhY3Jvc3NXb3JkKSB7XHJcbiAgICAgICAgc2VsZWN0QWNyb3NzKGN1cnJlbnRDZWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZWxlY3REb3duKGN1cnJlbnRDZWxsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIEhlbHBlciBmdW5jdGlvbiBmb3IgdG9nZ2xpbmcgZHJhd2VyICovXHJcbiAgZnVuY3Rpb24gdG9nZ2xlRHJhd2VyKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1kbC1sYXlvdXQnKS5NYXRlcmlhbExheW91dC50b2dnbGVEcmF3ZXIoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFBsYXkgY3VycmVudFVzZXIncyB0dXJuLiBFeGVjdXRlZCB3aGVuIHRoZSBwbGF5ZXIgY2xpY2tzIHRoZSBlbnRlclxyXG4gICAqIGJ1dHRvblxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHBsYXlXb3JkKCkge1xyXG4gICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09ICcjcHV6emxlJyAmJiAhbXlUdXJuKSB7XHJcbiAgICAgIGFsZXJ0KCdZb3VyIG9wcG9uZW50IGhhc25cXCd0IHBsYXllZCB0aGVpciB0dXJuIHlldCEnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGluY29tcGxldGUoKSkgcmV0dXJuO1xyXG4gICAgaWYgKGNvcnJlY3RBbnN3ZXIoKSkge1xyXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBhY3Jvc3NXb3JkID8gJ2Fjcm9zcycgOiAnZG93bic7XHJcbiAgICAgIGNvbnN0IGNsdWVOdW1iZXIgPSBnYW1lLnB1enpsZS5ncmlkW2lkeEFycmF5WzBdXS5jbHVlTnVtO1xyXG4gICAgICBnYW1lLnB1enpsZS5jb21wbGV0ZWRDbHVlc1tkaXJlY3Rpb25dLnB1c2goY2x1ZU51bWJlcik7XHJcbiAgICAgIGRvY3VtZW50XHJcbiAgICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoZGlyZWN0aW9uICsgY2x1ZU51bWJlcilcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKCdjb2xvckxpZ2h0R3JheScpO1xyXG4gICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGlkeEFycmF5KSB7XHJcbiAgICAgICAgY29uc3QgZ3JpZEVsZW1lbnQgPSBnYW1lLnB1enpsZS5ncmlkW2luZGV4XTtcclxuICAgICAgICBnYW1lLnB1enpsZS5ncmlkW2luZGV4XSA9IHNldENlbGxTdGF0dXMoaW5kZXgsIGdyaWRFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2FtZS5uZXh0VHVybiA9IG15T3Bwb25lbnRVaWQ7XHJcbiAgICBteVR1cm4gPSAhbXlUdXJuO1xyXG4gICAgc2F2ZVB1enpsZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIGFycmF5IG9mIGNlbGxzIGhhcyBhIGxldHRlciBpbiBlYWNoIHNxdWFyZVxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgd29yZCBpcyBpbmNvbXBsZXRlLCBmYWxzZSBvdGhlcndpc2VcclxuICAgKi9cclxuICBmdW5jdGlvbiBpbmNvbXBsZXRlKCkge1xyXG4gICAgZm9yIChjb25zdCBpIG9mIGlkeEFycmF5KSB7XHJcbiAgICAgIGlmICghZ2FtZS5wdXp6bGUuZ3JpZFtpXS5ndWVzcyB8fCBnYW1lLnB1enpsZS5ncmlkW2ldLmd1ZXNzID09PSAnJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVja3MgaWYgYXJyYXkgb2YgY2VsbHMgaXMgZmlsbGVkIGluIGNvcnJlY3RseVxyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgY29ycmVjdCwgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gY29ycmVjdEFuc3dlcigpIHtcclxuICAgIGZvciAoY29uc3QgaW5kZXggb2YgaWR4QXJyYXkpIHtcclxuICAgICAgY29uc3QgZ3JpZEVsZW1lbnQgPSBnYW1lLnB1enpsZS5ncmlkW2luZGV4XTtcclxuICAgICAgaWYgKGdyaWRFbGVtZW50Lmd1ZXNzICE9PSBncmlkRWxlbWVudC52YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHZhbHVlcyBmb3IgZ3JpZEVsZW1lbnQgYmFzZWQgb24gY3VycmVudFVzZXIgcGxheVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBpbmRleCBvZiBjZWxsXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGdyaWRFbGVtZW50IGdhbWUucHV6emxlIGdyaWQgYXJyYXkgb2JqZWN0XHJcbiAgICogQHJldHVybiB7T2JqZWN0fSBVcGRhdGVkIGdyaWQgZWxlbWVudCBvYmplY3RcclxuICAgKi9cclxuICBmdW5jdGlvbiBzZXRDZWxsU3RhdHVzKGluZGV4LCBncmlkRWxlbWVudCkge1xyXG4gICAgY29uc3QgcGxheWVyID1cclxuICAgICAgZ2FtZS5pbml0aWF0b3IudWlkID09PSBjdXJyZW50VXNlci51aWQgPyAnaW5pdGlhdG9yJyA6ICdvcHBvbmVudCc7XHJcbiAgICBpZiAoZ3JpZEVsZW1lbnQuc3RhdHVzID09PSAnbG9ja2VkJykge1xyXG4gICAgICBnYW1lW3BsYXllcl0uc2NvcmUgKz0gc2NvcmVWYWx1ZXNbZ3JpZEVsZW1lbnQudmFsdWVdO1xyXG4gICAgICByZXR1cm4gZ3JpZEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBnYW1lW3BsYXllcl0uc2NvcmUgKz0gc2NvcmVDZWxsKGluZGV4KTtcclxuICAgIGdhbWVbcGxheWVyXS5zcXVhcmVzV29uLnB1c2goaW5kZXgpO1xyXG4gICAgZ2FtZS5lbXB0eVNxdWFyZXMtLTtcclxuICAgIGdyaWRFbGVtZW50LmJnQ29sb3IgPSBnYW1lW3BsYXllcl0uYmdDb2xvcjtcclxuICAgIGdyaWRFbGVtZW50LnN0YXR1cyA9ICdsb2NrZWQnO1xyXG4gICAgcmV0dXJuIGdyaWRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyB0byBzY29yZSBpZiBvcnRob2dvbmFsIHdvcmQgaXMgY29tcGxldGVkIGJ5IHRoaXMgcGxheVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBpbmRleCBvZiBjZWxsXHJcbiAgICogQHJldHVybiB7bnVtYmVyfSBhZGRpdGlvbmFsIHNjb3JlIGR1ZSB0byBjb21wbGV0aW9uIG9mIG9ydGhvZ29uYWwgd29yZFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNjb3JlQ2VsbChpbmRleCkge1xyXG4gICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIGNvbHVtbnMpO1xyXG4gICAgY29uc3QgY29sID0gaW5kZXggLSByb3cgKiBjb2x1bW5zO1xyXG4gICAgY29uc3QgY2VsbCA9IHB1elRhYmxlLmNoaWxkcmVuWzBdLmNoaWxkcmVuW3Jvd10uY2hpbGRyZW5bY29sXTtcclxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGFjcm9zc1dvcmQgPyAnZG93bicgOiAnYWNyb3NzJztcclxuICAgIGNvbnN0IHdvcmRCbG9jayA9IGdldFdvcmRCbG9jayhjZWxsLCBkaXJlY3Rpb24pO1xyXG4gICAgbGV0IGFkZGVkU2NvcmUgPSAwO1xyXG5cclxuICAgIGZvciAoY29uc3QgaWR4IG9mIHdvcmRCbG9jaykge1xyXG4gICAgICBpZiAoaWR4ID09PSBpbmRleCkge1xyXG4gICAgICAgIGFkZGVkU2NvcmUgKz0gMiAqIHNjb3JlVmFsdWVzW2dhbWUucHV6emxlLmdyaWRbaWR4XS52YWx1ZV07XHJcbiAgICAgIH0gZWxzZSBpZiAoZ2FtZS5wdXp6bGUuZ3JpZFtpZHhdLnN0YXR1cyA9PT0gJ2xvY2tlZCcpIHtcclxuICAgICAgICBhZGRlZFNjb3JlICs9IHNjb3JlVmFsdWVzW2dhbWUucHV6emxlLmdyaWRbaWR4XS52YWx1ZV07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNjb3JlVmFsdWVzW2dhbWUucHV6emxlLmdyaWRbaW5kZXhdLnZhbHVlXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY2x1ZU51bWJlciA9IGdhbWUucHV6emxlLmdyaWRbd29yZEJsb2NrWzBdXS5jbHVlTnVtO1xyXG4gICAgZ2FtZS5wdXp6bGUuY29tcGxldGVkQ2x1ZXNbZGlyZWN0aW9uXS5wdXNoKGNsdWVOdW1iZXIpO1xyXG4gICAgcmV0dXJuIGFkZGVkU2NvcmU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgbGV0dGVyIHRvIHRoZSBwdXp6bGUgZnJvbSBwaHlzaWNhbCBvciB2aXJ0dWFsIGtleWJvYXJkIGV2ZW50IGFuZFxyXG4gICAqIG1vdmVzIGZvcndhcmQgb25lIHNwYWNlXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgS2V5Ym9hcmQgb3IgdG91Y2ggZXZlbnQgZnJvbSBwaHlzaWNhbCBvciB2aXJ0dWFsXHJcbiAgICoga2V5Ym9hcmRcclxuICAgKi9cclxuICBmdW5jdGlvbiBlbnRlckxldHRlcihldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgIHBsYXlXb3JkKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBsZXR0ZXI7XHJcbiAgICBpZiAoZXZlbnQua2V5KSB7XHJcbiAgICAgIGxldHRlciA9IGV2ZW50LmtleTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICB3aGlsZSAobm9kZS5jbGFzc0xpc3RbMF0gIT09ICdrYkJ1dHRvbicpIHtcclxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xyXG4gICAgICB9XHJcbiAgICAgIGxldHRlciA9IG5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdLmRhdGE7XHJcbiAgICB9XHJcbiAgICBpZiAobGV0dGVyICYmIGxldHRlci50b0xvd2VyQ2FzZSgpID09PSAnYmFja3NwYWNlJykge1xyXG4gICAgICB1bmRvRW50cnkoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gaWYgKGxldHRlciAmJiBsZXR0ZXIudG9Mb3dlckNhc2UoKSA9PT0gJ2VudGVyJykge1xyXG4gICAgLy8gICBwbGF5V29yZCgpO1xyXG4gICAgLy8gICByZXR1cm47XHJcbiAgICAvLyB9XHJcbiAgICBpZiAoIWxldHRlciB8fCAhbGV0dGVyLm1hdGNoKC9eW2EtekEtWl0kLykpIHJldHVybjtcclxuICAgIGlmIChjdXJyZW50Q2VsbCkge1xyXG4gICAgICBsZXQgcm93ID0gY3VycmVudENlbGwucGFyZW50RWxlbWVudC5yb3dJbmRleDtcclxuICAgICAgbGV0IGNvbCA9IGN1cnJlbnRDZWxsLmNlbGxJbmRleDtcclxuICAgICAgY29uc3QgaW5kZXggPSByb3cgKiBjb2x1bW5zICsgY29sO1xyXG4gICAgICBjb25zdCBuZXh0Q2VsbEluZGV4ID0gaWR4QXJyYXkuaW5kZXhPZihpbmRleCkgKyAxO1xyXG4gICAgICBjb25zdCBsb2NhbElkeEFycmF5ID0gaWR4QXJyYXlcclxuICAgICAgICAgIC5zbGljZShuZXh0Q2VsbEluZGV4KVxyXG4gICAgICAgICAgLmNvbmNhdChpZHhBcnJheS5zbGljZSgwLCBuZXh0Q2VsbEluZGV4KSk7XHJcbiAgICAgIGNvbnN0IGxldHRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhpZHhBcnJheSk7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGxvY2FsSWR4QXJyYXkpO1xyXG5cclxuICAgICAgaWYgKGdhbWUucHV6emxlLmdyaWRbaW5kZXhdLnN0YXR1cyA9PT0gJ2xvY2tlZCcpIHtcclxuICAgICAgICAvLyBhbGVydCgnU29ycnksIHRoYXQgc3F1YXJlIGlzIGxvY2tlZCBieSBhIHByZXZpb3VzIGFuc3dlcicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBnYW1lLnB1enpsZS5ncmlkW2luZGV4XS5ndWVzcyA9IGxldHRlci50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBsZXR0ZXJEaXYuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobGV0dGVyLnRvVXBwZXJDYXNlKCkpKTtcclxuICAgICAgbGV0dGVyRGl2LmNsYXNzTGlzdC5hZGQoJ21hcmdpbkF1dG8nKTtcclxuICAgICAgY3VycmVudENlbGwuY2hpbGRyZW5bMF0ucmVwbGFjZUNoaWxkKFxyXG4gICAgICAgICAgbGV0dGVyRGl2LFxyXG4gICAgICAgICAgY3VycmVudENlbGwuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF1cclxuICAgICAgKTtcclxuICAgICAgY3VycmVudENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnY3VyckNlbGxIaWdobGlnaHQnKTtcclxuICAgICAgY3VycmVudENlbGwuY2xhc3NMaXN0LmFkZCgncmFuZ2VIaWdobGlnaHQnKTtcclxuICAgICAgZm9yIChjb25zdCBpZHggb2YgbG9jYWxJZHhBcnJheSkge1xyXG4gICAgICAgIGlmIChnYW1lLnB1enpsZS5ncmlkW2lkeF0uc3RhdHVzICE9PSAnbG9ja2VkJykge1xyXG4gICAgICAgICAgcm93ID0gTWF0aC5mbG9vcihpZHggLyBjb2x1bW5zKTtcclxuICAgICAgICAgIGNvbCA9IGlkeCAtIHJvdyAqIGNvbHVtbnM7XHJcbiAgICAgICAgICBjdXJyZW50Q2VsbCA9IHB1elRhYmxlLmNoaWxkcmVuWzBdLmNoaWxkcmVuW3Jvd10uY2hpbGRyZW5bY29sXTtcclxuICAgICAgICAgIGN1cnJlbnRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ3JhbmdlSGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICBjdXJyZW50Q2VsbC5jbGFzc0xpc3QuYWRkKCdjdXJyQ2VsbEhpZ2hsaWdodCcpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGxldHRlciAoaWYgcHJlc2VudCkgZnJvbSBjdXJyZW50IGNlbGwgYW5kIG1vdmVzXHJcbiAgICogYmFja3dhcmQgb25lIHNwYWNlXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gdW5kb0VudHJ5KCkge1xyXG4gICAgaWYgKGN1cnJlbnRDZWxsKSB7XHJcbiAgICAgIGxldCByb3cgPSBjdXJyZW50Q2VsbC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xyXG4gICAgICBsZXQgY29sID0gY3VycmVudENlbGwuY2VsbEluZGV4O1xyXG4gICAgICBjb25zdCBpbmRleCA9IHJvdyAqIGNvbHVtbnMgKyBjb2w7XHJcbiAgICAgIC8vIHJldmVyc2UgY29weSBpZHhBcnJheSBzbyB3ZSBnbyBiYWNrd2FyZHMgaW5zdGVhZCBvZiBmb3J3YXJkc1xyXG4gICAgICBsZXQgbG9jYWxJZHhBcnJheSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMCwgaiA9IGlkeEFycmF5Lmxlbmd0aDsgaSA8IGlkeEFycmF5Lmxlbmd0aDsgaSsrLCBqLS0pIHtcclxuICAgICAgICBsb2NhbElkeEFycmF5W2ldID0gaWR4QXJyYXlbaiAtIDFdO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG5leHRDZWxsSW5kZXggPSBsb2NhbElkeEFycmF5LmluZGV4T2YoaW5kZXgpICsgMTtcclxuICAgICAgbG9jYWxJZHhBcnJheSA9IGxvY2FsSWR4QXJyYXlcclxuICAgICAgICAgIC5zbGljZShuZXh0Q2VsbEluZGV4KVxyXG4gICAgICAgICAgLmNvbmNhdChsb2NhbElkeEFycmF5LnNsaWNlKDAsIG5leHRDZWxsSW5kZXgpKTtcclxuICAgICAgY29uc3QgbGV0dGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGlkeEFycmF5KTtcclxuICAgICAgLy8gY29uc29sZS5sb2cobG9jYWxJZHhBcnJheSk7XHJcblxyXG4gICAgICBpZiAoZ2FtZS5wdXp6bGUuZ3JpZFtpbmRleF0uc3RhdHVzID09PSAnbG9ja2VkJykge1xyXG4gICAgICAgIC8vIGFsZXJ0KCdTb3JyeSwgdGhhdCBzcXVhcmUgaXMgbG9ja2VkIGJ5IGEgcHJldmlvdXMgYW5zd2VyJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGxldHRlckRpdi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJykpO1xyXG4gICAgICBsZXR0ZXJEaXYuY2xhc3NMaXN0LmFkZCgnbWFyZ2luQXV0bycpO1xyXG4gICAgICBjdXJyZW50Q2VsbC5jaGlsZHJlblswXS5yZXBsYWNlQ2hpbGQoXHJcbiAgICAgICAgICBsZXR0ZXJEaXYsXHJcbiAgICAgICAgICBjdXJyZW50Q2VsbC5jaGlsZHJlblswXS5jaGlsZHJlblswXVxyXG4gICAgICApO1xyXG4gICAgICBjdXJyZW50Q2VsbC5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyQ2VsbEhpZ2hsaWdodCcpO1xyXG4gICAgICBjdXJyZW50Q2VsbC5jbGFzc0xpc3QuYWRkKCdyYW5nZUhpZ2hsaWdodCcpO1xyXG4gICAgICBmb3IgKGNvbnN0IGlkeCBvZiBsb2NhbElkeEFycmF5KSB7XHJcbiAgICAgICAgaWYgKGdhbWUucHV6emxlLmdyaWRbaWR4XS5zdGF0dXMgIT09ICdsb2NrZWQnKSB7XHJcbiAgICAgICAgICByb3cgPSBNYXRoLmZsb29yKGlkeCAvIGNvbHVtbnMpO1xyXG4gICAgICAgICAgY29sID0gaWR4IC0gcm93ICogY29sdW1ucztcclxuICAgICAgICAgIGN1cnJlbnRDZWxsID0gcHV6VGFibGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bcm93XS5jaGlsZHJlbltjb2xdO1xyXG4gICAgICAgICAgY3VycmVudENlbGwuY2xhc3NMaXN0LnJlbW92ZSgncmFuZ2VIaWdobGlnaHQnKTtcclxuICAgICAgICAgIGN1cnJlbnRDZWxsLmNsYXNzTGlzdC5hZGQoJ2N1cnJDZWxsSGlnaGxpZ2h0Jyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBDb25jZWRlIHRoZSBnYW1lIGltbWVkaWF0ZWx5ICovXHJcbiAgZnVuY3Rpb24gY29uY2VkZSgpIHtcclxuICAgIGNvbnN0IG1lID0gY3VycmVudFVzZXIudWlkID09PSBnYW1lLmluaXRpYXRvci51aWQgP1xyXG4gICAgICAgICdpbml0aWF0b3InIDogJ29wcG9uZW50JztcclxuICAgIGNvbnN0IHRoZXkgPSBtZSA9PT0gJ2luaXRpYXRvcicgPyAnb3Bwb25lbnQnIDogJ2luaXRpYXRvcic7XHJcblxyXG4gICAgZ2FtZS5lbXB0eVNxdWFyZXMgPSAwO1xyXG4gICAgZm9yIChjb25zdCBzcXVhcmUgb2YgZ2FtZS5wdXp6bGUuZ3JpZCkge1xyXG4gICAgICBpZiAoc3F1YXJlLnN0YXR1cyAmJiBzcXVhcmUuc3RhdHVzID09PSAnZnJlZScpIHtcclxuICAgICAgICBzcXVhcmUuc3RhdHVzID0gJ2xvY2tlZCc7XHJcbiAgICAgICAgc3F1YXJlLmd1ZXNzID0gc3F1YXJlLnZhbHVlO1xyXG4gICAgICAgIHNxdWFyZS5iZ0NvbG9yID0gZ2FtZVt0aGV5XS5iZ0NvbG9yO1xyXG4gICAgICAgIGdhbWVbdGhleV0uc2NvcmUgKz0gMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2F2ZVB1enpsZSgpO1xyXG4gIH1cclxuXHJcbiAgY29uY2Vzc2lvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmNlZGUpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZW50ZXJMZXR0ZXIpO1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVQdXp6bGUpO1xyXG4gIGNvbnN0IGtleUxpc3QgPSBrZXlib2FyZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdrYkJ1dHRvbicpO1xyXG4gIGZvciAoY29uc3Qgbm9kZSBvZiBrZXlMaXN0KSB7XHJcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW50ZXJMZXR0ZXIpO1xyXG4gIH1cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFja3NwYWNlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB1bmRvRW50cnkpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcGxheVdvcmQpO1xyXG4gIGRvY3VtZW50XHJcbiAgICAgIC5nZXRFbGVtZW50QnlJZCgnY2xvc2VEcmF3ZXInKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVEcmF3ZXIpO1xyXG4gIHNjcmVlblRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNjcmVlbik7XHJcblxyXG4gIC8qKiBUb2dnbGUgYmV0d2VlbiB3aW5kb3cgYW5kIGZ1bGwgc2NyZWVuICovXHJcbiAgZnVuY3Rpb24gdG9nZ2xlU2NyZWVuKCkge1xyXG4gICAgaWYgKHdpbmRvdy5zY3JlZW5mdWxsLmVuYWJsZWQpIHtcclxuICAgICAgd2luZG93LnNjcmVlbmZ1bGwudG9nZ2xlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAod2luZG93LnNjcmVlbmZ1bGwuZW5hYmxlZCkge1xyXG4gICAgd2luZG93LnNjcmVlbmZ1bGwub24oJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgc2NyZWVuVG9nZ2xlLmlubmVyVGV4dCA9IHdpbmRvdy5zY3JlZW5mdWxsLmlzRnVsbHNjcmVlbiA/XHJcbiAgICAgICAgJ2Z1bGxzY3JlZW5fZXhpdCcgOlxyXG4gICAgICAgICdmdWxsc2NyZWVuJztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIEluaXQgaW4gY2FzZSB3ZSBuZWVkIGl0ICovXHJcbiAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdUaGUgZHVkZSBhYmlkZXMhJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLy8gaW5pdFBpY2tlcjogaW5pdFBpY2tlcixcclxuICAgIGluaXQ6IGluaXQsXHJcbiAgICBsb2FkUHV6emxlOiBsb2FkUHV6emxlLFxyXG4gICAgZmV0Y2hQdXp6bGU6IGZldGNoUHV6emxlLFxyXG4gICAgY2xlYXJQdXp6bGU6IGNsZWFyUHV6emxlLFxyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5wdXp6bGVXb3JrZXIuaW5pdCgpO1xyXG4iXSwiZmlsZSI6Im1haW4uanMifQ==

"use strict"; /* eslint-env es6, browser */
(function () {
  window.addEventListener('load', function () {
    initApp();
  });

  /** Initialize after document loads */
  function initApp() {
    var authButton = document.getElementById('authButton');
    var authContainer = document.getElementById('firebaseuiAuthContainer');
    var profileName = document.getElementById('profileName');
    var avatar = document.getElementById('avatar');
    var puzTable = document.getElementById('puzTable');
    var clueContainer = document.getElementById('clueContainer');
    var kbContainer = document.getElementById('kbContainer');
    var splash = document.getElementById('splash');
    var firebase = window.firebase;
    var firebaseui = window.firebaseui;
    // const db = firebase.firestore;
    // Initialize the FirebaseUI Widget using Firebase.
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
    var uid;
    var userStatusDatabaseRef;
    var userStatusFirestoreRef;

    var uiConfig = {
      signInSuccessUrl: './',
      signInOptions: [
      // Leave the lines as is for the providers you want to offer your users.
      firebase.auth.GoogleAuthProvider.PROVIDER_ID,
      firebase.auth.EmailAuthProvider.PROVIDER_ID
      // firebase.auth.FacebookAuthProvider.PROVIDER_ID,
      // firebase.auth.TwitterAuthProvider.PROVIDER_ID,
      // firebase.auth.GithubAuthProvider.PROVIDER_ID,
      // firebase.auth.PhoneAuthProvider.PROVIDER_ID,
      ],
      // Terms of service url.
      tosUrl: './#tos',
      // Privacy policy url.
      privacyPolicyUrl: './#privacy' };


    // We'll create two constants which we will write to
    // the Realtime database when this device is offline
    // or online.
    var isOfflineForDatabase = {
      state: 'offline',
      lastChanged: firebase.database.ServerValue.TIMESTAMP };

    var isOnlineForDatabase = {
      state: 'online',
      lastChanged: firebase.database.ServerValue.TIMESTAMP };

    // Firestore uses a different server timestamp value, so we'll
    // create two more constants for Firestore state.
    var isOfflineForFirestore = {
      state: 'offline',
      lastChanged: firebase.firestore.FieldValue.serverTimestamp() };

    var isOnlineForFirestore = {
      state: 'online',
      lastChanged: firebase.firestore.FieldValue.serverTimestamp() };


    // The start method will wait until the DOM is loaded.
    ui.start('#firebaseuiAuthContainer', uiConfig);

    firebase.auth().onAuthStateChanged(function (user) {
      if (user) {
        // User is signed in.
        uid = user.uid;
        isOnlineForFirestore.displayName = user.displayName;
        isOnlineForFirestore.photoURL = user.photoURL;
        isOnlineForFirestore.providerId = user.providerData[0].providerId;
        isOnlineForFirestore.uid = uid;
        isOnlineForFirestore.privateData = {
          email: user.email,
          emailVerified: user.emailVerified,
          phoneNumber: user.phoneNumber,
          providerData: user.providerData,
          providerId: user.providerId };


        authButton.textContent = 'sign out';
        profileName.textContent = user.displayName;
        avatar.src =
        user.photoURL ? user.photoURL : 'images/avatar_circle_black.png';

        // Create a reference to this user's specific status node.
        // This is where we will store data about being online/offline.
        userStatusDatabaseRef = firebase.database().ref("/users/".concat(uid));
        userStatusFirestoreRef = firebase.firestore().doc("/users/".concat(uid));

        firebase.database().ref('.info/connected').on('value', function (snapshot) {
          if (snapshot.val() === false) {
            // Instead of simply returning, we'll also set Firestore's state
            // to "offline". This ensures that our Firestore cache is aware
            // of the switch to "offline."
            userStatusFirestoreRef.set(isOfflineForFirestore, { merge: true });
            return;
          }
          userStatusDatabaseRef.onDisconnect().
          set(isOfflineForDatabase).then(function () {
            userStatusDatabaseRef.set(isOnlineForDatabase);
            userStatusFirestoreRef.set(isOnlineForFirestore, { merge: true });
          });
        });
        authContainer.classList.add('displayNone');
      } else {
        // User is signed out.
        authButton.textContent = 'sign in';
        authContainer.classList.remove('displayNone');
        profileName.textContent = 'N. E. Person';
        avatar.src = 'images/avatar_circle_black.png';
      }
    }, function (error) {
      console.log(error);
    });

    authButton.addEventListener('click', function () {
      document.querySelector('.mdl-layout').MaterialLayout.toggleDrawer();
      if (authButton.textContent === 'sign out') {
        window.puzzleGames.clearLists();
        userStatusFirestoreRef.
        set(isOfflineForFirestore, { merge: true }).then(function () {
          firebase.auth().signOut();
        }).then(function () {
          // Sign-out successful.
          uid = undefined;
          userStatusDatabaseRef = undefined;
          userStatusFirestoreRef = undefined;
          puzTable.classList.add('displayNone');
          clueContainer.classList.add('displayNone');
          kbContainer.classList.add('displayNone');
          splash.classList.remove('displayNone');
        })["catch"](function (error) {
          console.log(error);
        });
      } else {
        puzTable.classList.add('displayNone');
        clueContainer.classList.add('displayNone');
        kbContainer.classList.add('displayNone');
        splash.classList.remove('displayNone');
        location.hash = '#signin';
      }
    });
  }
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpZ25pbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdEFwcCIsImF1dGhCdXR0b24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYXV0aENvbnRhaW5lciIsInByb2ZpbGVOYW1lIiwiYXZhdGFyIiwicHV6VGFibGUiLCJjbHVlQ29udGFpbmVyIiwia2JDb250YWluZXIiLCJzcGxhc2giLCJmaXJlYmFzZSIsImZpcmViYXNldWkiLCJ1aSIsImF1dGgiLCJBdXRoVUkiLCJ1aWQiLCJ1c2VyU3RhdHVzRGF0YWJhc2VSZWYiLCJ1c2VyU3RhdHVzRmlyZXN0b3JlUmVmIiwidWlDb25maWciLCJzaWduSW5TdWNjZXNzVXJsIiwic2lnbkluT3B0aW9ucyIsIkdvb2dsZUF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiRW1haWxBdXRoUHJvdmlkZXIiLCJ0b3NVcmwiLCJwcml2YWN5UG9saWN5VXJsIiwiaXNPZmZsaW5lRm9yRGF0YWJhc2UiLCJzdGF0ZSIsImxhc3RDaGFuZ2VkIiwiZGF0YWJhc2UiLCJTZXJ2ZXJWYWx1ZSIsIlRJTUVTVEFNUCIsImlzT25saW5lRm9yRGF0YWJhc2UiLCJpc09mZmxpbmVGb3JGaXJlc3RvcmUiLCJmaXJlc3RvcmUiLCJGaWVsZFZhbHVlIiwic2VydmVyVGltZXN0YW1wIiwiaXNPbmxpbmVGb3JGaXJlc3RvcmUiLCJzdGFydCIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsInVzZXIiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicHJvdmlkZXJJZCIsInByb3ZpZGVyRGF0YSIsInByaXZhdGVEYXRhIiwiZW1haWwiLCJlbWFpbFZlcmlmaWVkIiwicGhvbmVOdW1iZXIiLCJ0ZXh0Q29udGVudCIsInNyYyIsInJlZiIsImRvYyIsIm9uIiwic25hcHNob3QiLCJ2YWwiLCJzZXQiLCJtZXJnZSIsIm9uRGlzY29ubmVjdCIsInRoZW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJxdWVyeVNlbGVjdG9yIiwiTWF0ZXJpYWxMYXlvdXQiLCJ0b2dnbGVEcmF3ZXIiLCJwdXp6bGVHYW1lcyIsImNsZWFyTGlzdHMiLCJzaWduT3V0IiwidW5kZWZpbmVkIiwibG9jYXRpb24iLCJoYXNoIl0sIm1hcHBpbmdzIjoiY0FBQTtBQUNBLENBQUMsWUFBVztBQUNWQSxFQUFBQSxNQUFNLENBQUNDLGdCQUFQLENBQXdCLE1BQXhCLEVBQWdDLFlBQVc7QUFDekNDLElBQUFBLE9BQU87QUFDUixHQUZEOztBQUlBO0FBQ0EsV0FBU0EsT0FBVCxHQUFtQjtBQUNqQixRQUFNQyxVQUFVLEdBQUdDLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixZQUF4QixDQUFuQjtBQUNBLFFBQU1DLGFBQWEsR0FBR0YsUUFBUSxDQUFDQyxjQUFULENBQXdCLHlCQUF4QixDQUF0QjtBQUNBLFFBQU1FLFdBQVcsR0FBR0gsUUFBUSxDQUFDQyxjQUFULENBQXdCLGFBQXhCLENBQXBCO0FBQ0EsUUFBTUcsTUFBTSxHQUFHSixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBZjtBQUNBLFFBQU1JLFFBQVEsR0FBR0wsUUFBUSxDQUFDQyxjQUFULENBQXdCLFVBQXhCLENBQWpCO0FBQ0EsUUFBTUssYUFBYSxHQUFHTixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsZUFBeEIsQ0FBdEI7QUFDQSxRQUFNTSxXQUFXLEdBQUdQLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixhQUF4QixDQUFwQjtBQUNBLFFBQU1PLE1BQU0sR0FBR1IsUUFBUSxDQUFDQyxjQUFULENBQXdCLFFBQXhCLENBQWY7QUFDQSxRQUFNUSxRQUFRLEdBQUdiLE1BQU0sQ0FBQ2EsUUFBeEI7QUFDQSxRQUFNQyxVQUFVLEdBQUdkLE1BQU0sQ0FBQ2MsVUFBMUI7QUFDQTtBQUNBO0FBQ0EsUUFBTUMsRUFBRSxHQUFHLElBQUlELFVBQVUsQ0FBQ0UsSUFBWCxDQUFnQkMsTUFBcEIsQ0FBMkJKLFFBQVEsQ0FBQ0csSUFBVCxFQUEzQixDQUFY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U0FBVCxDQUFtQkMsR0FBbkIsQ0FBdUIsYUFBdkI7QUFDQXRELFFBQUFBLGFBQWEsQ0FBQ3FELFNBQWQsQ0FBd0JDLEdBQXhCLENBQTRCLGFBQTVCO0FBQ0FyRCxRQUFBQSxXQUFXLENBQUNvRCxTQUFaLENBQXNCQyxHQUF0QixDQUEwQixhQUExQjtBQUNBcEQsUUFBQUEsTUFBTSxDQUFDbUQsU0FBUCxDQUFpQkUsTUFBakIsQ0FBd0IsYUFBeEI7QUFDQVcsUUFBQUEsUUFBUSxDQUFDQyxJQUFULEdBQWdCLFNBQWhCO0FBQ0Q7QUFDRixLQTFCRDtBQTJCRDtBQUNGLENBbEpEIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWVudiBlczYsIGJyb3dzZXIgKi9cclxuKGZ1bmN0aW9uKCkge1xyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBpbml0QXBwKCk7XHJcbiAgfSk7XHJcblxyXG4gIC8qKiBJbml0aWFsaXplIGFmdGVyIGRvY3VtZW50IGxvYWRzICovXHJcbiAgZnVuY3Rpb24gaW5pdEFwcCgpIHtcclxuICAgIGNvbnN0IGF1dGhCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aEJ1dHRvbicpO1xyXG4gICAgY29uc3QgYXV0aENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXJlYmFzZXVpQXV0aENvbnRhaW5lcicpO1xyXG4gICAgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZmlsZU5hbWUnKTtcclxuICAgIGNvbnN0IGF2YXRhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXInKTtcclxuICAgIGNvbnN0IHB1elRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1elRhYmxlJyk7XHJcbiAgICBjb25zdCBjbHVlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsdWVDb250YWluZXInKTtcclxuICAgIGNvbnN0IGtiQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2tiQ29udGFpbmVyJyk7XHJcbiAgICBjb25zdCBzcGxhc2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BsYXNoJyk7XHJcbiAgICBjb25zdCBmaXJlYmFzZSA9IHdpbmRvdy5maXJlYmFzZTtcclxuICAgIGNvbnN0IGZpcmViYXNldWkgPSB3aW5kb3cuZmlyZWJhc2V1aTtcclxuICAgIC8vIGNvbnN0IGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlO1xyXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgRmlyZWJhc2VVSSBXaWRnZXQgdXNpbmcgRmlyZWJhc2UuXHJcbiAgICBjb25zdCB1aSA9IG5ldyBmaXJlYmFzZXVpLmF1dGguQXV0aFVJKGZpcmViYXNlLmF1dGgoKSk7XHJcbiAgICBsZXQgdWlkO1xyXG4gICAgbGV0IHVzZXJTdGF0dXNEYXRhYmFzZVJlZjtcclxuICAgIGxldCB1c2VyU3RhdHVzRmlyZXN0b3JlUmVmO1xyXG5cclxuICAgIGNvbnN0IHVpQ29uZmlnID0ge1xyXG4gICAgICBzaWduSW5TdWNjZXNzVXJsOiAnLi8nLFxyXG4gICAgICBzaWduSW5PcHRpb25zOiBbXHJcbiAgICAgICAgLy8gTGVhdmUgdGhlIGxpbmVzIGFzIGlzIGZvciB0aGUgcHJvdmlkZXJzIHlvdSB3YW50IHRvIG9mZmVyIHlvdXIgdXNlcnMuXHJcbiAgICAgICAgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgZmlyZWJhc2UuYXV0aC5FbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAvLyBmaXJlYmFzZS5hdXRoLkZhY2Vib29rQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgIC8vIGZpcmViYXNlLmF1dGguVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAvLyBmaXJlYmFzZS5hdXRoLkdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAvLyBmaXJlYmFzZS5hdXRoLlBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICBdLFxyXG4gICAgICAvLyBUZXJtcyBvZiBzZXJ2aWNlIHVybC5cclxuICAgICAgdG9zVXJsOiAnLi8jdG9zJyxcclxuICAgICAgLy8gUHJpdmFjeSBwb2xpY3kgdXJsLlxyXG4gICAgICBwcml2YWN5UG9saWN5VXJsOiAnLi8jcHJpdmFjeScsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdlJ2xsIGNyZWF0ZSB0d28gY29uc3RhbnRzIHdoaWNoIHdlIHdpbGwgd3JpdGUgdG9cclxuICAgIC8vIHRoZSBSZWFsdGltZSBkYXRhYmFzZSB3aGVuIHRoaXMgZGV2aWNlIGlzIG9mZmxpbmVcclxuICAgIC8vIG9yIG9ubGluZS5cclxuICAgIGNvbnN0IGlzT2ZmbGluZUZvckRhdGFiYXNlID0ge1xyXG4gICAgICBzdGF0ZTogJ29mZmxpbmUnLFxyXG4gICAgICBsYXN0Q2hhbmdlZDogZmlyZWJhc2UuZGF0YWJhc2UuU2VydmVyVmFsdWUuVElNRVNUQU1QLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGlzT25saW5lRm9yRGF0YWJhc2UgPSB7XHJcbiAgICAgIHN0YXRlOiAnb25saW5lJyxcclxuICAgICAgbGFzdENoYW5nZWQ6IGZpcmViYXNlLmRhdGFiYXNlLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcclxuICAgIH07XHJcbiAgICAvLyBGaXJlc3RvcmUgdXNlcyBhIGRpZmZlcmVudCBzZXJ2ZXIgdGltZXN0YW1wIHZhbHVlLCBzbyB3ZSdsbFxyXG4gICAgLy8gY3JlYXRlIHR3byBtb3JlIGNvbnN0YW50cyBmb3IgRmlyZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgaXNPZmZsaW5lRm9yRmlyZXN0b3JlID0ge1xyXG4gICAgICBzdGF0ZTogJ29mZmxpbmUnLFxyXG4gICAgICBsYXN0Q2hhbmdlZDogZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKCksXHJcbiAgICB9O1xyXG4gICAgY29uc3QgaXNPbmxpbmVGb3JGaXJlc3RvcmUgPSB7XHJcbiAgICAgIHN0YXRlOiAnb25saW5lJyxcclxuICAgICAgbGFzdENoYW5nZWQ6IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBUaGUgc3RhcnQgbWV0aG9kIHdpbGwgd2FpdCB1bnRpbCB0aGUgRE9NIGlzIGxvYWRlZC5cclxuICAgIHVpLnN0YXJ0KCcjZmlyZWJhc2V1aUF1dGhDb250YWluZXInLCB1aUNvbmZpZyk7XHJcblxyXG4gICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcikgPT4ge1xyXG4gICAgICBpZiAodXNlcikge1xyXG4gICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluLlxyXG4gICAgICAgIHVpZCA9IHVzZXIudWlkO1xyXG4gICAgICAgIGlzT25saW5lRm9yRmlyZXN0b3JlLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcclxuICAgICAgICBpc09ubGluZUZvckZpcmVzdG9yZS5waG90b1VSTCA9IHVzZXIucGhvdG9VUkw7XHJcbiAgICAgICAgaXNPbmxpbmVGb3JGaXJlc3RvcmUucHJvdmlkZXJJZCA9IHVzZXIucHJvdmlkZXJEYXRhWzBdLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgaXNPbmxpbmVGb3JGaXJlc3RvcmUudWlkID0gdWlkO1xyXG4gICAgICAgIGlzT25saW5lRm9yRmlyZXN0b3JlLnByaXZhdGVEYXRhID0ge1xyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VyLmVtYWlsVmVyaWZpZWQsXHJcbiAgICAgICAgICBwaG9uZU51bWJlcjogdXNlci5waG9uZU51bWJlcixcclxuICAgICAgICAgIHByb3ZpZGVyRGF0YTogdXNlci5wcm92aWRlckRhdGEsXHJcbiAgICAgICAgICBwcm92aWRlcklkOiB1c2VyLnByb3ZpZGVySWQsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYXV0aEJ1dHRvbi50ZXh0Q29udGVudCA9ICdzaWduIG91dCc7XHJcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VyLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIGF2YXRhci5zcmMgPVxyXG4gICAgICAgICAgdXNlci5waG90b1VSTCA/IHVzZXIucGhvdG9VUkwgOiAnaW1hZ2VzL2F2YXRhcl9jaXJjbGVfYmxhY2sucG5nJztcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgcmVmZXJlbmNlIHRvIHRoaXMgdXNlcidzIHNwZWNpZmljIHN0YXR1cyBub2RlLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgd2hlcmUgd2Ugd2lsbCBzdG9yZSBkYXRhIGFib3V0IGJlaW5nIG9ubGluZS9vZmZsaW5lLlxyXG4gICAgICAgIHVzZXJTdGF0dXNEYXRhYmFzZVJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKGAvdXNlcnMvJHt1aWR9YCk7XHJcbiAgICAgICAgdXNlclN0YXR1c0ZpcmVzdG9yZVJlZiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpLmRvYyhgL3VzZXJzLyR7dWlkfWApO1xyXG5cclxuICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignLmluZm8vY29ubmVjdGVkJykub24oJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICBpZiAoc25hcHNob3QudmFsKCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIC8vIEluc3RlYWQgb2Ygc2ltcGx5IHJldHVybmluZywgd2UnbGwgYWxzbyBzZXQgRmlyZXN0b3JlJ3Mgc3RhdGVcclxuICAgICAgICAgICAgLy8gdG8gXCJvZmZsaW5lXCIuIFRoaXMgZW5zdXJlcyB0aGF0IG91ciBGaXJlc3RvcmUgY2FjaGUgaXMgYXdhcmVcclxuICAgICAgICAgICAgLy8gb2YgdGhlIHN3aXRjaCB0byBcIm9mZmxpbmUuXCJcclxuICAgICAgICAgICAgdXNlclN0YXR1c0ZpcmVzdG9yZVJlZi5zZXQoaXNPZmZsaW5lRm9yRmlyZXN0b3JlLCB7bWVyZ2U6IHRydWV9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdXNlclN0YXR1c0RhdGFiYXNlUmVmLm9uRGlzY29ubmVjdCgpXHJcbiAgICAgICAgICAgICAgLnNldChpc09mZmxpbmVGb3JEYXRhYmFzZSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHVzRGF0YWJhc2VSZWYuc2V0KGlzT25saW5lRm9yRGF0YWJhc2UpO1xyXG4gICAgICAgICAgICAgICAgdXNlclN0YXR1c0ZpcmVzdG9yZVJlZi5zZXQoaXNPbmxpbmVGb3JGaXJlc3RvcmUsIHttZXJnZTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF1dGhDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGlzcGxheU5vbmUnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBVc2VyIGlzIHNpZ25lZCBvdXQuXHJcbiAgICAgICAgYXV0aEJ1dHRvbi50ZXh0Q29udGVudCA9ICdzaWduIGluJztcclxuICAgICAgICBhdXRoQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSAnTi4gRS4gUGVyc29uJztcclxuICAgICAgICBhdmF0YXIuc3JjID0gJ2ltYWdlcy9hdmF0YXJfY2lyY2xlX2JsYWNrLnBuZyc7XHJcbiAgICAgIH1cclxuICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF1dGhCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZGwtbGF5b3V0JykuTWF0ZXJpYWxMYXlvdXQudG9nZ2xlRHJhd2VyKCk7XHJcbiAgICAgIGlmIChhdXRoQnV0dG9uLnRleHRDb250ZW50ID09PSAnc2lnbiBvdXQnKSB7XHJcbiAgICAgICAgd2luZG93LnB1enpsZUdhbWVzLmNsZWFyTGlzdHMoKTtcclxuICAgICAgICB1c2VyU3RhdHVzRmlyZXN0b3JlUmVmXHJcbiAgICAgICAgICAgIC5zZXQoaXNPZmZsaW5lRm9yRmlyZXN0b3JlLCB7bWVyZ2U6IHRydWV9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpO1xyXG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAvLyBTaWduLW91dCBzdWNjZXNzZnVsLlxyXG4gICAgICAgICAgICAgIHVpZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICB1c2VyU3RhdHVzRGF0YWJhc2VSZWYgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgdXNlclN0YXR1c0ZpcmVzdG9yZVJlZiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICBwdXpUYWJsZS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICAgICAgICAgIGNsdWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGlzcGxheU5vbmUnKTtcclxuICAgICAgICAgICAgICBrYkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICAgICAgICAgIHNwbGFzaC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHB1elRhYmxlLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgY2x1ZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICAgIGtiQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgc3BsYXNoLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjc2lnbmluJztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59KSgpO1xyXG4iXSwiZmlsZSI6InNpZ25pbi5qcyJ9

"use strict"; /* eslint-env es6, browser */
var puzzleGames = function (document, window) {
  var querySelector = document.querySelector.bind(document);
  var gamesDialog = querySelector('#gamesDialog');
  var startGameButton = querySelector('#startGameButton');
  var headerSignin = querySelector('#headerSignin');
  // const turnIndicator = querySelector('#turnIndicator');
  var gameOverHeading = querySelector('#gameOverHeading');
  var winMessage = querySelector('#winMessage');
  var opponentHeading = querySelector('#opponentHeading');
  var opponentList = querySelector('#opponentList');
  var radioEasy = querySelector('#radioEasy');
  var radioMed = querySelector('#radioMed');
  var radioHard = querySelector('#radioHard');
  var dialogListContainer = querySelector('#dialogList');
  var activeGamesContainer = querySelector('#activeGamesContainer');
  var pastGamesContainer = querySelector('#pastGamesContainer');
  var dialogPolyfill = window.dialogPolyfill || {};
  var firebase = window.firebase;

  var currentUser = firebase.auth().currentUser;
  // let difficulty = 'medium';
  var dialogList = '';
  var activeGamesHtml = '';
  var pastGamesHtml = '';
  var allUsers = {};
  // let pastGames = {};
  // holder variable for function

  firebase.auth().onAuthStateChanged(function (user) {
    currentUser = user;
    // fillLists();
    if (user) {
      headerSignin.classList.add('displayNone');
    } else {
      headerSignin.classList.remove('displayNone');
      // turnIndicator.classList.add('displayNone');
    }
  });

  if (!gamesDialog.showModal) {
    dialogPolyfill.registerDialog(gamesDialog);
  }

  startGameButton.addEventListener('click', initNewGame);
  headerSignin.addEventListener('click', function () {
    location.hash = '#signin';
  });

  gamesDialog.querySelector('.close').addEventListener('click',
  closeGamesDialog);

  /** Reset radio buttons and close dialog */
  function closeGamesDialog() {
    radioMed.removeAttribute('checked');
    radioHard.removeAttribute('checked');
    radioEasy.setAttribute('checked', true);
    gamesDialog.close();
  }

  /** Start a new game or send user to the login page */
  function initNewGame() {
    if (currentUser) {
      // user is logged in
      gameOverHeading.classList.add('displayNone');
      winMessage.classList.add('displayNone');
      gamesDialog.firstChild.classList.add('padding0', 'height100pct');
      opponentHeading.classList.remove('displayNone');
      opponentList.classList.remove('displayNone');
      var replayButton = querySelector('#replayButton');
      if (replayButton) {
        try {
          gamesDialog.firstChild.removeChild(replayButton);
        } catch (err) {
          // do nothing.  replayButton not attached
        }
      }
      gamesDialog.classList.add('height80pct');
      gamesDialog.showModal();
    } else {
      // user is not logged in
      location.hash = '#signin';
    }
  }

  /** Subscribe to firestore listeners */
  function subscribe() {
    firebase.firestore().collection('users').
    onSnapshot(function (snapshot) {return loadUserList(snapshot);}, function (error) {
      console.error('Error getting users: ', error);
    });
    firebase.firestore().collection('games').
    onSnapshot(function (snapshot) {return loadGames(snapshot);}, function (error) {
      console.error('Error getting games: ', error);
    });
  }

  /** Unsubscribe from firestore listeners */
  function unsubscribe() {
    firebase.firestore().collection('users').onSnapshot(function () {});
    firebase.firestore().collection('games').onSnapshot(function () {});
  }

  /**
   * Snapshot of firebase 'user' collection
   * @param {Object} snapshot Collection of users
   */
  function loadUserList(snapshot) {
    if (!currentUser) return;
    dialogListContainer.innerHTML = '';
    dialogListContainer.removeEventListener('click', loadNewGame);
    dialogList = '';
    if (snapshot.empty) {
      console.warn('No users exist yet.');
      return;
    }
    var usersObj = {};
    snapshot.docs.forEach(function (doc) {
      var uid = doc.id;
      var user = doc.data();
      usersObj[uid] = user;
      // doc.data() is never undefined for query doc snapshots
      // console.log(doc.id, ' => ', doc.data());
      if (uid !== currentUser.uid) {
        var avatar = "<i class='material-icons mdl-list__item-avatar'>person</i>";

        if (user.photoURL) {
          avatar = "<span class='picContainer material-icons mdl-list__item-avatar'>\n  <div>\n    <img class='photoCrop' src='".concat(


          user.photoURL, "' alt='profile picture'>\n  </div>\n</span>");


        }
        dialogList += "<li id='".concat(
        uid, "' class='mdl-list__item mdl-list__item--two-line cursorPointer'>\n   <span class='mdl-list__item-primary-content'>\n     ").concat(

        avatar, "\n     <span>").concat(
        user.displayName, "</span>\n     <span class='mdl-list__item-sub-title'>\n       ").concat(

        user.providerId.split('.')[0], "\n     </span>\n   </span>\n   <span class='mdl-list__item-secondary-content'>\n     <span class='mdl-list__item-secondary-info'>Play</span>\n     <i class='material-icons'>grid_on</i>\n   </span>\n </li>");







      }
    });
    allUsers = usersObj;
    // console.log(dialogList);
    dialogListContainer.innerHTML = dialogList;
    dialogListContainer.addEventListener('click', loadNewGame);
  }

  /**
   * Snapshot of firebase 'games' collection
   * @param {Object} snapshot Collection of games
   */
  function loadGames(snapshot) {
    if (!currentUser) return;
    activeGamesContainer.innerHTML = 'No active games yet. Start one!';
    pastGamesContainer.innerHTML = 'No completed games yet';
    activeGamesContainer.removeEventListener('click', loadActiveGame);
    activeGamesHtml = '';
    pastGamesHtml = '';
    if (snapshot.empty) {
      console.warn('No games exist yet.');
      return;
    }
    snapshot.docs.forEach(function (doc) {
      // doc.data() is never undefined for query doc snapshots
      // console.log(doc.id, ' => ', doc.data());
      var game = doc.data();
      var avatar = "<i class='material-icons mdl-list__item-avatar'>person</i>";
      if (game.status === 'started' && (
      game.initiator.uid === currentUser.uid ||
      game.opponent.uid === currentUser.uid)) {
        var myOpponent = game.initiator.uid === currentUser.uid ?
        game.opponent : game.initiator;
        var opponentPhoto = allUsers[myOpponent.uid] &&
        allUsers[myOpponent.uid].photoURL;
        if (opponentPhoto) {
          avatar = "<span class='picContainer material-icons mdl-list__item-avatar'>\n  <div>\n    <img class='photoCrop' src='".concat(


          opponentPhoto, "' alt='profile picture'>\n  </div>\n</span>");


        }
        activeGamesHtml +=
        // eslint-disable-next-line max-len
        "<li id='".concat(doc.id, "' class='mdl-list__item mdl-list__item--two-line cursorPointer'>\n   <span class='mdl-list__item-primary-content'>\n     ").concat(

        avatar, "\n     <span>").concat(
        myOpponent.displayName, "</span>\n     <span class='mdl-list__item-sub-title'>\n       ").concat(

        currentUser.uid === game.nextTurn ? 'Your' : 'Their', " turn\n     </span>\n   </span>\n   <span class='mdl-list__item-secondary-content'>\n     <span class='mdl-list__item-secondary-info'>Play</span>\n     <i class='material-icons'>grid_on</i>\n   </span>\n </li>");







      } else if (game.initiator.uid === currentUser.uid ||
      game.opponent.uid === currentUser.uid) {
        var _myOpponent = game.initiator.uid === currentUser.uid ?
        game.opponent : game.initiator;
        var result = 'Game cancelled';
        if (game.status === 'finished') {
          result = currentUser.uid === game.winner ?
          'You won!!' :
          'They won';
        } else if (game.status === 'abandoned') {
          result = 'Game abandoned';
        }
        // pastGames[doc.id] = {};
        // pastGames[doc.id].difficulty = game.difficulty;
        var _opponentPhoto = allUsers[_myOpponent.uid] &&
        allUsers[_myOpponent.uid].photoURL;
        if (_opponentPhoto) {
          avatar = "<span class='picContainer material-icons mdl-list__item-avatar'>\n  <div>\n    <img class='photoCrop' src='".concat(


          _opponentPhoto, "' alt='profile picture'>\n  </div>\n</span>");


        }
        pastGamesHtml += "<li id='".concat(
        doc.id, "' class='mdl-list__item mdl-list__item--two-line cursorPointer'>\n   <span class='mdl-list__item-primary-content'>\n     ").concat(


        avatar, "\n     <span>").concat(
        _myOpponent.displayName, "</span>\n     <span class='mdl-list__item-sub-title'>").concat(
        result, "</span>\n   </span>\n </li>");


      }
    });
    // console.log(dialogList);
    activeGamesContainer.innerHTML =
    activeGamesHtml === '' ?
    'No active games yet. Start one!' :
    activeGamesHtml;
    pastGamesContainer.innerHTML =
    pastGamesHtml === '' ? 'No completed games yet' : pastGamesHtml;
    activeGamesContainer.addEventListener('click', loadActiveGame);
    pastGamesContainer.addEventListener('click', showPastGame);
  }

  /**
   * Show dialog for user to decide if they want to replay the opponent
   * @param {Object} event Click event from replayButton in dialog
   */
  function showPastGame(event) {
    var eventTarget = event.target;
    while (!eventTarget.id) {
      if (eventTarget.nodeName.toLowerCase() === 'ul') return;
      eventTarget = eventTarget.parentElement;
    }
    window.puzzleWorker.fetchPuzzle(eventTarget.id);
  }

  /**
   * Load game based on user selection
   * @param {Object} event Click event from dialogListContainer
   */
  function loadNewGame(event) {
    var target = event.target.parentElement;
    if (target.id === '') {
      target = target.parentElement;
    }
    var difficulty =
    radioMed.parentElement.classList.contains('is-checked') ?
    'medium' : 'easy';
    difficulty =
    radioHard.parentElement.classList.contains('is-checked') ?
    'hard' : difficulty;
    closeGamesDialog();

    window.puzzleWorker.loadPuzzle({
      initiator: {
        uid: currentUser.uid,
        displayName: currentUser.displayName },

      opponent: {
        uid: target.id,
        displayName: allUsers[target.id].displayName },

      difficulty: difficulty });

    // unsubscribe();
    // location.hash = '#puzzle';
  }

  /**
   * Show dialog for user to decide if they want to replay the opponent
   * @param {Object} game Previous game versus the opponent
   * @param {string} result Message about who won
   */
  function showReplayDialog(game, result) {
    winMessage.innerText = result;
    gameOverHeading.classList.remove('displayNone');
    winMessage.classList.remove('displayNone');
    opponentHeading.classList.add('displayNone');
    opponentList.classList.add('displayNone');
    gamesDialog.classList.remove('height80pct');
    gamesDialog.firstChild.classList.remove('padding0', 'height100pct');
    var replayButton = querySelector('#replayButton');
    if (!replayButton) {
      replayButton = document.createElement('button');
      replayButton.setAttribute('id', 'replayButton');
      replayButton.classList.add('mdl-button', 'mdl-js-button',
      'mdl-button--raised', 'mdl-js-ripple-effect',
      'mdl-button--accent', 'cursorPointer');
      replayButton.innerText = 'Play Again!';
      gamesDialog.firstChild.appendChild(replayButton);
      replayButton.addEventListener('click', replayOpponent);
    }
    if (game.difficulty === 'medium') {
      radioEasy.removeAttribute('checked');
      radioHard.removeAttribute('checked');
      radioMed.setAttribute('checked', true);
    } else if (game.difficulty === 'hard') {
      radioEasy.removeAttribute('checked');
      radioMed.removeAttribute('checked');
      radioHard.setAttribute('checked', true);
    } else {
      radioMed.removeAttribute('checked');
      radioHard.removeAttribute('checked');
      radioEasy.setAttribute('checked', true);
    }
    if (!gamesDialog.open) gamesDialog.showModal();

    /** Load game based on user selection */
    function replayOpponent() {
      var difficulty =
      radioMed.parentElement.classList.contains('is-checked') ?
      'medium' : 'easy';
      difficulty =
      radioHard.parentElement.classList.contains('is-checked') ?
      'hard' : difficulty;
      var they = currentUser.uid === game.initiator.uid ?
      'opponent' : 'initiator';
      closeGamesDialog();

      // load puzzle based on uids of players
      window.puzzleWorker.loadPuzzle({
        initiator: {
          uid: currentUser.uid,
          displayName: currentUser.displayName },

        opponent: {
          uid: game[they].uid,
          displayName: game[they].displayName },

        difficulty: difficulty });

    }
  }

  /**
   * Load game based on user selection
   * @param {Object} event Click event from dialogListContainer
   */
  function loadActiveGame(event) {
    var target = event.target.parentElement;
    if (target.id === '') {
      window.puzzleWorker.fetchPuzzle(target.parentElement.id);
    } else {
      window.puzzleWorker.fetchPuzzle(target.id);
    }
    // if (event.target.nodeName.toLowerCase() !== 'span' ||
    //   event.target.id === '') return;
    // window.puzzleWorker.fetchPuzzle(event.target.parentElement.id);
    // unsubscribe();
    // location.hash = '#puzzle';
  }

  /** Clear lists on games view */
  function clearLists() {
    activeGamesContainer.innerHTML =
    'You must sign in to see your active games';
    pastGamesContainer.innerHTML =
    'You must sign in to see your completed games';
    window.puzzleWorker.clearPuzzle();
  }

  /** Init in case we need it */
  function init() {
    console.log('puzzleWorker here!');
  }

  return {
    // initPicker: initPicker,
    init: init,
    subscribe: subscribe,
    unsubscribe: unsubscribe,
    clearLists: clearLists,
    showReplayDialog: showReplayDialog };

}(document, window);

puzzleGames.subscribe();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWVzLmpzIl0sIm5hbWVzIjpbInB1enpsZUdhbWVzIiwiZG9jdW1lbnQiLCJ3aW5kb3ciLCJxdWVyeVNlbGVjdG9yIiwiYmluZCIsImdhbWVzRGlhbG9nIiwic3RhcnRHYW1lQnV0dG9uIiwiaGVhZGVyU2lnbmluIiwiZ2FtZU92ZXJIZWFkaW5nIiwid2luTWVzc2FnZSIsIm9wcG9uZW50SGVhZGluZyIsIm9wcG9uZW50TGlzdCIsInJhZGlvRWFzeSIsInJhZGlvTWVkIiwicmFkaW9IYXJkIiwiZGlhbG9nTGlzdENvbnRhaW5lciIsImFjdGl2ZUdhbWVzQ29udGFpbmVyIiwicGFzdEdhbWVzQ29udGFpbmVyIiwiZGlhbG9nUG9seWZpbGwiLCJmaXJlYmFzZSIsImN1cnJlbnRVc2VyIiwiYXV0aCIsImRpYWxvZ0xpc3QiLCJhY3RpdmVHYW1lc0h0bWwiLCJwYXN0R2FtZXNIdG1sIiwiYWxsVXNlcnMiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJ1c2VyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic2hvd01vZGFsIiwicmVnaXN0ZXJEaWFsb2ciLCJhZGRFdmVudExpc3RlbmVyIiwiaW5pdE5ld0dhbWUiLCJsb2NhdGlvbiIsImhhc2giLCJjbG9zZUdhbWVzRGlhbG9nIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiY2xvc2UiLCJmaXJzdENoaWxkIiwicmVwbGF5QnV0dG9uIiwicmVtb3ZlQ2hpbGQiLCJlcnIiLCJzdWJzY3JpYmUiLCJmaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwib25TbmFwc2hvdCIsInNuYXBzaG90IiwibG9hZFVzZXJMaXN0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9hZEdhbWVzIiwidW5zdWJzY3JpYmUiLCJpbm5lckhUTUwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibG9hZE5ld0dhbWUiLCJlbXB0eSIsIndhcm4iLCJ1c2Vyc09iaiIsImRvY3MiLCJmb3JFYWNoIiwiZG9jIiwidWlkIiwiaWQiLCJkYXRhIiwiYXZhdGFyIiwicGhvdG9VUkwiLCJkaXNwbGF5TmFtZSIsInByb3ZpZGVySWQiLCJzcGxpdCIsImxvYWRBY3RpdmVHYW1lIiwiZ2FtZSIsInN0YXR1cyIsImluaXRpYXRvciIsIm9wcG9uZW50IiwibXlPcHBvbmVudCIsIm9wcG9uZW50UGhvdG8iLCJuZXh0VHVybiIsInJlc3VsdCIsIndpbm5lciIsInNob3dQYXN0R2FtZSIsImV2ZW50IiwiZXZlbnRUYXJnZXQiLCJ0YXJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50RWxlbWVudCIsInB1enpsZVdvcmtlciIsImZldGNoUHV6emxlIiwiZGlmZmljdWx0eSIsImNvbnRhaW5zIiwibG9hZFB1enpsZSIsInNob3dSZXBsYXlEaWFsb2ciLCJpbm5lclRleHQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJyZXBsYXlPcHBvbmVudCIsIm9wZW4iLCJ0aGV5IiwiY2xlYXJMaXN0cyIsImNsZWFyUHV6emxlIiwiaW5pdCIsImxvZyJdLCJtYXBwaW5ncyI6ImNBQUE7QUFDQSxJQUFNQSxXQUFXLEdBQUksVUFBU0MsUUFBVCxFQUFtQkMsTUFBbkIsRUFBMkI7QUFDOUMsTUFBTUMsYUFBYSxHQUFHRixRQUFRLENBQUNFLGFBQVQsQ0FBdUJDLElBQXZCLENBQTRCSCxRQUE1QixDQUF0QjtBQUNBLE1BQU1JLFdBQVcsR0FBR0YsYUFBYSxDQUFDLGNBQUQsQ0FBakM7QUFDQSxNQUFNRyxlQUFlLEdBQUdILGFBQWEsQ0FBQyxrQkFBRCxDQUFyQztBQUNBLE1BQU1JLFlBQVksR0FBR0osYUFBYSxDQUFDLGVBQUQsQ0FBbEM7QUFDQTtBQUNBLE1BQU1LLGVBQWUsR0FBR0wsYUFBYSxDQUFDLGtCQUFELENBQXJDO0FBQ0EsTUFBTU0sVUFBVSxHQUFHTixhQUFhLENBQUMsYUFBRCxDQUFoQztBQUNBLE1BQU1PLGVBQWUsR0FBR1AsYUFBYSxDQUFDLGtCQUFELENBQXJDO0FBQ0EsTUFBTVEsWUFBWSxHQUFHUixhQUFhLENBQUMsZUFBRCxDQUFs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RjtBQUVBdEMsSUFBQUEsa0JBQWtCLENBQUNzQyxTQUFuQjtBQUNFLGtEQURGO0FBRUFyRCxJQUFBQSxNQUFNLENBQUN1RixZQUFQLENBQW9CYSxXQUFwQjtBQUNEOztBQUVEO0FBQ0EsV0FBU0MsSUFBVCxHQUFnQjtBQUNkbkQsSUFBQUEsT0FBTyxDQUFDb0QsR0FBUixDQUFZLG9CQUFaO0FBQ0Q7O0FBRUQsU0FBTztBQUNMO0FBQ0FELElBQUFBLElBQUksRUFBRUEsSUFGRDtBQUdMMUQsSUFBQUEsU0FBUyxFQUFFQSxTQUhOO0FBSUxTLElBQUFBLFdBQVcsRUFBRUEsV0FKUjtBQUtMK0MsSUFBQUEsVUFBVSxFQUFFQSxVQUxQO0FBTUxQLElBQUFBLGdCQUFnQixFQUFFQSxnQkFOYixFQUFQOztBQVFELENBbFptQixDQWtaakI3RixRQWxaaUIsRUFrWlBDLE1BbFpPLENBQXBCOztBQW9aQUYsV0FBVyxDQUFDNkMsU0FBWiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgZXM2LCBicm93c2VyICovXHJcbmNvbnN0IHB1enpsZUdhbWVzID0gKGZ1bmN0aW9uKGRvY3VtZW50LCB3aW5kb3cpIHtcclxuICBjb25zdCBxdWVyeVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcclxuICBjb25zdCBnYW1lc0RpYWxvZyA9IHF1ZXJ5U2VsZWN0b3IoJyNnYW1lc0RpYWxvZycpO1xyXG4gIGNvbnN0IHN0YXJ0R2FtZUJ1dHRvbiA9IHF1ZXJ5U2VsZWN0b3IoJyNzdGFydEdhbWVCdXR0b24nKTtcclxuICBjb25zdCBoZWFkZXJTaWduaW4gPSBxdWVyeVNlbGVjdG9yKCcjaGVhZGVyU2lnbmluJyk7XHJcbiAgLy8gY29uc3QgdHVybkluZGljYXRvciA9IHF1ZXJ5U2VsZWN0b3IoJyN0dXJuSW5kaWNhdG9yJyk7XHJcbiAgY29uc3QgZ2FtZU92ZXJIZWFkaW5nID0gcXVlcnlTZWxlY3RvcignI2dhbWVPdmVySGVhZGluZycpO1xyXG4gIGNvbnN0IHdpbk1lc3NhZ2UgPSBxdWVyeVNlbGVjdG9yKCcjd2luTWVzc2FnZScpO1xyXG4gIGNvbnN0IG9wcG9uZW50SGVhZGluZyA9IHF1ZXJ5U2VsZWN0b3IoJyNvcHBvbmVudEhlYWRpbmcnKTtcclxuICBjb25zdCBvcHBvbmVudExpc3QgPSBxdWVyeVNlbGVjdG9yKCcjb3Bwb25lbnRMaXN0Jyk7XHJcbiAgY29uc3QgcmFkaW9FYXN5ID0gcXVlcnlTZWxlY3RvcignI3JhZGlvRWFzeScpO1xyXG4gIGNvbnN0IHJhZGlvTWVkID0gcXVlcnlTZWxlY3RvcignI3JhZGlvTWVkJyk7XHJcbiAgY29uc3QgcmFkaW9IYXJkID0gcXVlcnlTZWxlY3RvcignI3JhZGlvSGFyZCcpO1xyXG4gIGNvbnN0IGRpYWxvZ0xpc3RDb250YWluZXIgPSBxdWVyeVNlbGVjdG9yKCcjZGlhbG9nTGlzdCcpO1xyXG4gIGNvbnN0IGFjdGl2ZUdhbWVzQ29udGFpbmVyID0gcXVlcnlTZWxlY3RvcignI2FjdGl2ZUdhbWVzQ29udGFpbmVyJyk7XHJcbiAgY29uc3QgcGFzdEdhbWVzQ29udGFpbmVyID0gcXVlcnlTZWxlY3RvcignI3Bhc3RHYW1lc0NvbnRhaW5lcicpO1xyXG4gIGNvbnN0IGRpYWxvZ1BvbHlmaWxsID0gd2luZG93LmRpYWxvZ1BvbHlmaWxsIHx8IHt9O1xyXG4gIGNvbnN0IGZpcmViYXNlID0gd2luZG93LmZpcmViYXNlO1xyXG5cclxuICBsZXQgY3VycmVudFVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7XHJcbiAgLy8gbGV0IGRpZmZpY3VsdHkgPSAnbWVkaXVtJztcclxuICBsZXQgZGlhbG9nTGlzdCA9ICcnO1xyXG4gIGxldCBhY3RpdmVHYW1lc0h0bWwgPSAnJztcclxuICBsZXQgcGFzdEdhbWVzSHRtbCA9ICcnO1xyXG4gIGxldCBhbGxVc2VycyA9IHt9O1xyXG4gIC8vIGxldCBwYXN0R2FtZXMgPSB7fTtcclxuICAvLyBob2xkZXIgdmFyaWFibGUgZm9yIGZ1bmN0aW9uXHJcblxyXG4gIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoKHVzZXIpID0+IHtcclxuICAgIGN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgIC8vIGZpbGxMaXN0cygpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgaGVhZGVyU2lnbmluLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoZWFkZXJTaWduaW4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKTtcclxuICAgICAgLy8gdHVybkluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpZiAoIWdhbWVzRGlhbG9nLnNob3dNb2RhbCkge1xyXG4gICAgZGlhbG9nUG9seWZpbGwucmVnaXN0ZXJEaWFsb2coZ2FtZXNEaWFsb2cpO1xyXG4gIH1cclxuXHJcbiAgc3RhcnRHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5pdE5ld0dhbWUpO1xyXG4gIGhlYWRlclNpZ25pbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGxvY2F0aW9uLmhhc2ggPSAnI3NpZ25pbic7XHJcbiAgfSk7XHJcblxyXG4gIGdhbWVzRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcclxuICAgICAgY2xvc2VHYW1lc0RpYWxvZyk7XHJcblxyXG4gIC8qKiBSZXNldCByYWRpbyBidXR0b25zIGFuZCBjbG9zZSBkaWFsb2cgKi9cclxuICBmdW5jdGlvbiBjbG9zZUdhbWVzRGlhbG9nKCkge1xyXG4gICAgcmFkaW9NZWQucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICByYWRpb0hhcmQucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICByYWRpb0Vhc3kuc2V0QXR0cmlidXRlKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICBnYW1lc0RpYWxvZy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqIFN0YXJ0IGEgbmV3IGdhbWUgb3Igc2VuZCB1c2VyIHRvIHRoZSBsb2dpbiBwYWdlICovXHJcbiAgZnVuY3Rpb24gaW5pdE5ld0dhbWUoKSB7XHJcbiAgICBpZiAoY3VycmVudFVzZXIpIHtcclxuICAgICAgLy8gdXNlciBpcyBsb2dnZWQgaW5cclxuICAgICAgZ2FtZU92ZXJIZWFkaW5nLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgIHdpbk1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnZGlzcGxheU5vbmUnKTtcclxuICAgICAgZ2FtZXNEaWFsb2cuZmlyc3RDaGlsZC5jbGFzc0xpc3QuYWRkKCdwYWRkaW5nMCcsICdoZWlnaHQxMDBwY3QnKTtcclxuICAgICAgb3Bwb25lbnRIZWFkaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgIG9wcG9uZW50TGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICBjb25zdCByZXBsYXlCdXR0b24gPSBxdWVyeVNlbGVjdG9yKCcjcmVwbGF5QnV0dG9uJyk7XHJcbiAgICAgIGlmIChyZXBsYXlCdXR0b24pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZ2FtZXNEaWFsb2cuZmlyc3RDaGlsZC5yZW1vdmVDaGlsZChyZXBsYXlCdXR0b24pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgLy8gZG8gbm90aGluZy4gIHJlcGxheUJ1dHRvbiBub3QgYXR0YWNoZWRcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZ2FtZXNEaWFsb2cuY2xhc3NMaXN0LmFkZCgnaGVpZ2h0ODBwY3QnKTtcclxuICAgICAgZ2FtZXNEaWFsb2cuc2hvd01vZGFsKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyB1c2VyIGlzIG5vdCBsb2dnZWQgaW5cclxuICAgICAgbG9jYXRpb24uaGFzaCA9ICcjc2lnbmluJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBTdWJzY3JpYmUgdG8gZmlyZXN0b3JlIGxpc3RlbmVycyAqL1xyXG4gIGZ1bmN0aW9uIHN1YnNjcmliZSgpIHtcclxuICAgIGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oJ3VzZXJzJylcclxuICAgICAgICAub25TbmFwc2hvdCgoc25hcHNob3QpID0+IGxvYWRVc2VyTGlzdChzbmFwc2hvdCksIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyczogJywgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbignZ2FtZXMnKVxyXG4gICAgICAgIC5vblNuYXBzaG90KChzbmFwc2hvdCkgPT4gbG9hZEdhbWVzKHNuYXBzaG90KSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGdhbWVzOiAnLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogVW5zdWJzY3JpYmUgZnJvbSBmaXJlc3RvcmUgbGlzdGVuZXJzICovXHJcbiAgZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XHJcbiAgICBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCd1c2VycycpLm9uU25hcHNob3QoKCkgPT4ge30pO1xyXG4gICAgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbignZ2FtZXMnKS5vblNuYXBzaG90KCgpID0+IHt9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNuYXBzaG90IG9mIGZpcmViYXNlICd1c2VyJyBjb2xsZWN0aW9uXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNuYXBzaG90IENvbGxlY3Rpb24gb2YgdXNlcnNcclxuICAgKi9cclxuICBmdW5jdGlvbiBsb2FkVXNlckxpc3Qoc25hcHNob3QpIHtcclxuICAgIGlmICghY3VycmVudFVzZXIpIHJldHVybjtcclxuICAgIGRpYWxvZ0xpc3RDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBkaWFsb2dMaXN0Q29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbG9hZE5ld0dhbWUpO1xyXG4gICAgZGlhbG9nTGlzdCA9ICcnO1xyXG4gICAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gdXNlcnMgZXhpc3QgeWV0LicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2Vyc09iaiA9IHt9O1xyXG4gICAgc25hcHNob3QuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcclxuICAgICAgY29uc3QgdWlkID0gZG9jLmlkO1xyXG4gICAgICBjb25zdCB1c2VyID0gZG9jLmRhdGEoKTtcclxuICAgICAgdXNlcnNPYmpbdWlkXSA9IHVzZXI7XHJcbiAgICAgIC8vIGRvYy5kYXRhKCkgaXMgbmV2ZXIgdW5kZWZpbmVkIGZvciBxdWVyeSBkb2Mgc25hcHNob3RzXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGRvYy5pZCwgJyA9PiAnLCBkb2MuZGF0YSgpKTtcclxuICAgICAgaWYgKHVpZCAhPT0gY3VycmVudFVzZXIudWlkKSB7XHJcbiAgICAgICAgbGV0IGF2YXRhciA9XHJcbiAgICAgICAgICBgPGkgY2xhc3M9J21hdGVyaWFsLWljb25zIG1kbC1saXN0X19pdGVtLWF2YXRhcic+cGVyc29uPC9pPmA7XHJcbiAgICAgICAgaWYgKHVzZXIucGhvdG9VUkwpIHtcclxuICAgICAgICAgIGF2YXRhciA9XHJcbmA8c3BhbiBjbGFzcz0ncGljQ29udGFpbmVyIG1hdGVyaWFsLWljb25zIG1kbC1saXN0X19pdGVtLWF2YXRhcic+XHJcbiAgPGRpdj5cclxuICAgIDxpbWcgY2xhc3M9J3Bob3RvQ3JvcCcgc3JjPScke3VzZXIucGhvdG9VUkx9JyBhbHQ9J3Byb2ZpbGUgcGljdHVyZSc+XHJcbiAgPC9kaXY+XHJcbjwvc3Bhbj5gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkaWFsb2dMaXN0ICs9XHJcbmA8bGkgaWQ9JyR7dWlkfScgY2xhc3M9J21kbC1saXN0X19pdGVtIG1kbC1saXN0X19pdGVtLS10d28tbGluZSBjdXJzb3JQb2ludGVyJz5cclxuICAgPHNwYW4gY2xhc3M9J21kbC1saXN0X19pdGVtLXByaW1hcnktY29udGVudCc+XHJcbiAgICAgJHthdmF0YXJ9XHJcbiAgICAgPHNwYW4+JHt1c2VyLmRpc3BsYXlOYW1lfTwvc3Bhbj5cclxuICAgICA8c3BhbiBjbGFzcz0nbWRsLWxpc3RfX2l0ZW0tc3ViLXRpdGxlJz5cclxuICAgICAgICR7dXNlci5wcm92aWRlcklkLnNwbGl0KCcuJylbMF19XHJcbiAgICAgPC9zcGFuPlxyXG4gICA8L3NwYW4+XHJcbiAgIDxzcGFuIGNsYXNzPSdtZGwtbGlzdF9faXRlbS1zZWNvbmRhcnktY29udGVudCc+XHJcbiAgICAgPHNwYW4gY2xhc3M9J21kbC1saXN0X19pdGVtLXNlY29uZGFyeS1pbmZvJz5QbGF5PC9zcGFuPlxyXG4gICAgIDxpIGNsYXNzPSdtYXRlcmlhbC1pY29ucyc+Z3JpZF9vbjwvaT5cclxuICAgPC9zcGFuPlxyXG4gPC9saT5gO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGFsbFVzZXJzID0gdXNlcnNPYmo7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhkaWFsb2dMaXN0KTtcclxuICAgIGRpYWxvZ0xpc3RDb250YWluZXIuaW5uZXJIVE1MID0gZGlhbG9nTGlzdDtcclxuICAgIGRpYWxvZ0xpc3RDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2FkTmV3R2FtZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTbmFwc2hvdCBvZiBmaXJlYmFzZSAnZ2FtZXMnIGNvbGxlY3Rpb25cclxuICAgKiBAcGFyYW0ge09iamVjdH0gc25hcHNob3QgQ29sbGVjdGlvbiBvZiBnYW1lc1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGxvYWRHYW1lcyhzbmFwc2hvdCkge1xyXG4gICAgaWYgKCFjdXJyZW50VXNlcikgcmV0dXJuO1xyXG4gICAgYWN0aXZlR2FtZXNDb250YWluZXIuaW5uZXJIVE1MID0gJ05vIGFjdGl2ZSBnYW1lcyB5ZXQuIFN0YXJ0IG9uZSEnO1xyXG4gICAgcGFzdEdhbWVzQ29udGFpbmVyLmlubmVySFRNTCA9ICdObyBjb21wbGV0ZWQgZ2FtZXMgeWV0JztcclxuICAgIGFjdGl2ZUdhbWVzQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbG9hZEFjdGl2ZUdhbWUpO1xyXG4gICAgYWN0aXZlR2FtZXNIdG1sID0gJyc7XHJcbiAgICBwYXN0R2FtZXNIdG1sID0gJyc7XHJcbiAgICBpZiAoc25hcHNob3QuZW1wdHkpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdObyBnYW1lcyBleGlzdCB5ZXQuJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHNuYXBzaG90LmRvY3MuZm9yRWFjaCgoZG9jKSA9PiB7XHJcbiAgICAgIC8vIGRvYy5kYXRhKCkgaXMgbmV2ZXIgdW5kZWZpbmVkIGZvciBxdWVyeSBkb2Mgc25hcHNob3RzXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGRvYy5pZCwgJyA9PiAnLCBkb2MuZGF0YSgpKTtcclxuICAgICAgY29uc3QgZ2FtZSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgIGxldCBhdmF0YXIgPSBgPGkgY2xhc3M9J21hdGVyaWFsLWljb25zIG1kbC1saXN0X19pdGVtLWF2YXRhcic+cGVyc29uPC9pPmA7XHJcbiAgICAgIGlmIChnYW1lLnN0YXR1cyA9PT0gJ3N0YXJ0ZWQnICYmXHJcbiAgICAgICAgKGdhbWUuaW5pdGlhdG9yLnVpZCA9PT0gY3VycmVudFVzZXIudWlkIHx8XHJcbiAgICAgICAgICBnYW1lLm9wcG9uZW50LnVpZCA9PT0gY3VycmVudFVzZXIudWlkKSkge1xyXG4gICAgICAgIGNvbnN0IG15T3Bwb25lbnQgPSBnYW1lLmluaXRpYXRvci51aWQgPT09IGN1cnJlbnRVc2VyLnVpZCA/XHJcbiAgICAgICAgICBnYW1lLm9wcG9uZW50IDogZ2FtZS5pbml0aWF0b3I7XHJcbiAgICAgICAgY29uc3Qgb3Bwb25lbnRQaG90byA9IGFsbFVzZXJzW215T3Bwb25lbnQudWlkXSAmJlxyXG4gICAgICAgICAgYWxsVXNlcnNbbXlPcHBvbmVudC51aWRdLnBob3RvVVJMO1xyXG4gICAgICAgIGlmIChvcHBvbmVudFBob3RvKSB7XHJcbiAgICAgICAgICBhdmF0YXIgPVxyXG5gPHNwYW4gY2xhc3M9J3BpY0NvbnRhaW5lciBtYXRlcmlhbC1pY29ucyBtZGwtbGlzdF9faXRlbS1hdmF0YXInPlxyXG4gIDxkaXY+XHJcbiAgICA8aW1nIGNsYXNzPSdwaG90b0Nyb3AnIHNyYz0nJHtvcHBvbmVudFBob3RvfScgYWx0PSdwcm9maWxlIHBpY3R1cmUnPlxyXG4gIDwvZGl2PlxyXG48L3NwYW4+YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZlR2FtZXNIdG1sICs9XHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXHJcbmA8bGkgaWQ9JyR7ZG9jLmlkfScgY2xhc3M9J21kbC1saXN0X19pdGVtIG1kbC1saXN0X19pdGVtLS10d28tbGluZSBjdXJzb3JQb2ludGVyJz5cclxuICAgPHNwYW4gY2xhc3M9J21kbC1saXN0X19pdGVtLXByaW1hcnktY29udGVudCc+XHJcbiAgICAgJHthdmF0YXJ9XHJcbiAgICAgPHNwYW4+JHtteU9wcG9uZW50LmRpc3BsYXlOYW1lfTwvc3Bhbj5cclxuICAgICA8c3BhbiBjbGFzcz0nbWRsLWxpc3RfX2l0ZW0tc3ViLXRpdGxlJz5cclxuICAgICAgICR7Y3VycmVudFVzZXIudWlkID09PSBnYW1lLm5leHRUdXJuID8gJ1lvdXInIDogJ1RoZWlyJ30gdHVyblxyXG4gICAgIDwvc3Bhbj5cclxuICAgPC9zcGFuPlxyXG4gICA8c3BhbiBjbGFzcz0nbWRsLWxpc3RfX2l0ZW0tc2Vjb25kYXJ5LWNvbnRlbnQnPlxyXG4gICAgIDxzcGFuIGNsYXNzPSdtZGwtbGlzdF9faXRlbS1zZWNvbmRhcnktaW5mbyc+UGxheTwvc3Bhbj5cclxuICAgICA8aSBjbGFzcz0nbWF0ZXJpYWwtaWNvbnMnPmdyaWRfb248L2k+XHJcbiAgIDwvc3Bhbj5cclxuIDwvbGk+YDtcclxuICAgICAgfSBlbHNlIGlmIChnYW1lLmluaXRpYXRvci51aWQgPT09IGN1cnJlbnRVc2VyLnVpZCB8fFxyXG4gICAgICAgIGdhbWUub3Bwb25lbnQudWlkID09PSBjdXJyZW50VXNlci51aWQpIHtcclxuICAgICAgICBjb25zdCBteU9wcG9uZW50ID0gZ2FtZS5pbml0aWF0b3IudWlkID09PSBjdXJyZW50VXNlci51aWQgP1xyXG4gICAgICAgICAgZ2FtZS5vcHBvbmVudCA6IGdhbWUuaW5pdGlhdG9yO1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAnR2FtZSBjYW5jZWxsZWQnO1xyXG4gICAgICAgIGlmIChnYW1lLnN0YXR1cyA9PT0gJ2ZpbmlzaGVkJykge1xyXG4gICAgICAgICAgcmVzdWx0ID0gY3VycmVudFVzZXIudWlkID09PSBnYW1lLndpbm5lciA/XHJcbiAgICAgICAgICAgICdZb3Ugd29uISEnIDpcclxuICAgICAgICAgICAgJ1RoZXkgd29uJztcclxuICAgICAgICB9IGVsc2UgaWYgKGdhbWUuc3RhdHVzID09PSAnYWJhbmRvbmVkJykge1xyXG4gICAgICAgICAgcmVzdWx0ID0gJ0dhbWUgYWJhbmRvbmVkJztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcGFzdEdhbWVzW2RvYy5pZF0gPSB7fTtcclxuICAgICAgICAvLyBwYXN0R2FtZXNbZG9jLmlkXS5kaWZmaWN1bHR5ID0gZ2FtZS5kaWZmaWN1bHR5O1xyXG4gICAgICAgIGNvbnN0IG9wcG9uZW50UGhvdG8gPSBhbGxVc2Vyc1tteU9wcG9uZW50LnVpZF0gJiZcclxuICAgICAgICAgIGFsbFVzZXJzW215T3Bwb25lbnQudWlkXS5waG90b1VSTDtcclxuICAgICAgICBpZiAob3Bwb25lbnRQaG90bykge1xyXG4gICAgICAgICAgYXZhdGFyID1cclxuYDxzcGFuIGNsYXNzPSdwaWNDb250YWluZXIgbWF0ZXJpYWwtaWNvbnMgbWRsLWxpc3RfX2l0ZW0tYXZhdGFyJz5cclxuICA8ZGl2PlxyXG4gICAgPGltZyBjbGFzcz0ncGhvdG9Dcm9wJyBzcmM9JyR7b3Bwb25lbnRQaG90b30nIGFsdD0ncHJvZmlsZSBwaWN0dXJlJz5cclxuICA8L2Rpdj5cclxuPC9zcGFuPmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhc3RHYW1lc0h0bWwgKz1cclxuYDxsaSBpZD0nJHtkb2MuaWR9JyBjbGFzcz0nbWRsLWxpc3RfX2l0ZW0gbWRsLWxpc3RfX2l0ZW0tLXR3by1saW5lXFxcclxuIGN1cnNvclBvaW50ZXInPlxyXG4gICA8c3BhbiBjbGFzcz0nbWRsLWxpc3RfX2l0ZW0tcHJpbWFyeS1jb250ZW50Jz5cclxuICAgICAke2F2YXRhcn1cclxuICAgICA8c3Bhbj4ke215T3Bwb25lbnQuZGlzcGxheU5hbWV9PC9zcGFuPlxyXG4gICAgIDxzcGFuIGNsYXNzPSdtZGwtbGlzdF9faXRlbS1zdWItdGl0bGUnPiR7cmVzdWx0fTwvc3Bhbj5cclxuICAgPC9zcGFuPlxyXG4gPC9saT5gO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKGRpYWxvZ0xpc3QpO1xyXG4gICAgYWN0aXZlR2FtZXNDb250YWluZXIuaW5uZXJIVE1MID1cclxuICAgICAgYWN0aXZlR2FtZXNIdG1sID09PSAnJyA/XHJcbiAgICAgICAgJ05vIGFjdGl2ZSBnYW1lcyB5ZXQuIFN0YXJ0IG9uZSEnIDpcclxuICAgICAgICBhY3RpdmVHYW1lc0h0bWw7XHJcbiAgICBwYXN0R2FtZXNDb250YWluZXIuaW5uZXJIVE1MID1cclxuICAgICAgcGFzdEdhbWVzSHRtbCA9PT0gJycgPyAnTm8gY29tcGxldGVkIGdhbWVzIHlldCcgOiBwYXN0R2FtZXNIdG1sO1xyXG4gICAgYWN0aXZlR2FtZXNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2FkQWN0aXZlR2FtZSk7XHJcbiAgICBwYXN0R2FtZXNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93UGFzdEdhbWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2hvdyBkaWFsb2cgZm9yIHVzZXIgdG8gZGVjaWRlIGlmIHRoZXkgd2FudCB0byByZXBsYXkgdGhlIG9wcG9uZW50XHJcbiAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IENsaWNrIGV2ZW50IGZyb20gcmVwbGF5QnV0dG9uIGluIGRpYWxvZ1xyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNob3dQYXN0R2FtZShldmVudCkge1xyXG4gICAgbGV0IGV2ZW50VGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgd2hpbGUgKCFldmVudFRhcmdldC5pZCkge1xyXG4gICAgICBpZiAoZXZlbnRUYXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3VsJykgcmV0dXJuO1xyXG4gICAgICBldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICB3aW5kb3cucHV6emxlV29ya2VyLmZldGNoUHV6emxlKGV2ZW50VGFyZ2V0LmlkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgZ2FtZSBiYXNlZCBvbiB1c2VyIHNlbGVjdGlvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBDbGljayBldmVudCBmcm9tIGRpYWxvZ0xpc3RDb250YWluZXJcclxuICAgKi9cclxuICBmdW5jdGlvbiBsb2FkTmV3R2FtZShldmVudCkge1xyXG4gICAgbGV0IHRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG4gICAgaWYgKHRhcmdldC5pZCA9PT0gJycpIHtcclxuICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBsZXQgZGlmZmljdWx0eSA9XHJcbiAgICAgIHJhZGlvTWVkLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jaGVja2VkJykgP1xyXG4gICAgICAgICdtZWRpdW0nIDogJ2Vhc3knO1xyXG4gICAgZGlmZmljdWx0eSA9XHJcbiAgICAgIHJhZGlvSGFyZC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaXMtY2hlY2tlZCcpID9cclxuICAgICAgICAnaGFyZCcgOiBkaWZmaWN1bHR5O1xyXG4gICAgY2xvc2VHYW1lc0RpYWxvZygpO1xyXG5cclxuICAgIHdpbmRvdy5wdXp6bGVXb3JrZXIubG9hZFB1enpsZSh7XHJcbiAgICAgIGluaXRpYXRvcjoge1xyXG4gICAgICAgIHVpZDogY3VycmVudFVzZXIudWlkLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBjdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgfSxcclxuICAgICAgb3Bwb25lbnQ6IHtcclxuICAgICAgICB1aWQ6IHRhcmdldC5pZCxcclxuICAgICAgICBkaXNwbGF5TmFtZTogYWxsVXNlcnNbdGFyZ2V0LmlkXS5kaXNwbGF5TmFtZSxcclxuICAgICAgfSxcclxuICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcclxuICAgIH0pO1xyXG4gICAgLy8gdW5zdWJzY3JpYmUoKTtcclxuICAgIC8vIGxvY2F0aW9uLmhhc2ggPSAnI3B1enpsZSc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaG93IGRpYWxvZyBmb3IgdXNlciB0byBkZWNpZGUgaWYgdGhleSB3YW50IHRvIHJlcGxheSB0aGUgb3Bwb25lbnRcclxuICAgKiBAcGFyYW0ge09iamVjdH0gZ2FtZSBQcmV2aW91cyBnYW1lIHZlcnN1cyB0aGUgb3Bwb25lbnRcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdWx0IE1lc3NhZ2UgYWJvdXQgd2hvIHdvblxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNob3dSZXBsYXlEaWFsb2coZ2FtZSwgcmVzdWx0KSB7XHJcbiAgICB3aW5NZXNzYWdlLmlubmVyVGV4dCA9IHJlc3VsdDtcclxuICAgIGdhbWVPdmVySGVhZGluZy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgd2luTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgb3Bwb25lbnRIZWFkaW5nLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICBvcHBvbmVudExpc3QuY2xhc3NMaXN0LmFkZCgnZGlzcGxheU5vbmUnKTtcclxuICAgIGdhbWVzRGlhbG9nLmNsYXNzTGlzdC5yZW1vdmUoJ2hlaWdodDgwcGN0Jyk7XHJcbiAgICBnYW1lc0RpYWxvZy5maXJzdENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZGRpbmcwJywgJ2hlaWdodDEwMHBjdCcpO1xyXG4gICAgbGV0IHJlcGxheUJ1dHRvbiA9IHF1ZXJ5U2VsZWN0b3IoJyNyZXBsYXlCdXR0b24nKTtcclxuICAgIGlmICghcmVwbGF5QnV0dG9uKSB7XHJcbiAgICAgIHJlcGxheUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICByZXBsYXlCdXR0b24uc2V0QXR0cmlidXRlKCdpZCcsICdyZXBsYXlCdXR0b24nKTtcclxuICAgICAgcmVwbGF5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ21kbC1idXR0b24nLCAnbWRsLWpzLWJ1dHRvbicsXHJcbiAgICAgICAgICAnbWRsLWJ1dHRvbi0tcmFpc2VkJywgJ21kbC1qcy1yaXBwbGUtZWZmZWN0JyxcclxuICAgICAgICAgICdtZGwtYnV0dG9uLS1hY2NlbnQnLCAnY3Vyc29yUG9pbnRlcicpO1xyXG4gICAgICByZXBsYXlCdXR0b24uaW5uZXJUZXh0ID0gJ1BsYXkgQWdhaW4hJztcclxuICAgICAgZ2FtZXNEaWFsb2cuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChyZXBsYXlCdXR0b24pO1xyXG4gICAgICByZXBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXBsYXlPcHBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBpZiAoZ2FtZS5kaWZmaWN1bHR5ID09PSAnbWVkaXVtJykge1xyXG4gICAgICByYWRpb0Vhc3kucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICAgIHJhZGlvSGFyZC5yZW1vdmVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcclxuICAgICAgcmFkaW9NZWQuc2V0QXR0cmlidXRlKCdjaGVja2VkJywgdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGdhbWUuZGlmZmljdWx0eSA9PT0gJ2hhcmQnKSB7XHJcbiAgICAgIHJhZGlvRWFzeS5yZW1vdmVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTtcclxuICAgICAgcmFkaW9NZWQucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICAgIHJhZGlvSGFyZC5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJhZGlvTWVkLnJlbW92ZUF0dHJpYnV0ZSgnY2hlY2tlZCcpO1xyXG4gICAgICByYWRpb0hhcmQucmVtb3ZlQXR0cmlidXRlKCdjaGVja2VkJyk7XHJcbiAgICAgIHJhZGlvRWFzeS5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGlmICghZ2FtZXNEaWFsb2cub3BlbikgZ2FtZXNEaWFsb2cuc2hvd01vZGFsKCk7XHJcblxyXG4gICAgLyoqIExvYWQgZ2FtZSBiYXNlZCBvbiB1c2VyIHNlbGVjdGlvbiAqL1xyXG4gICAgZnVuY3Rpb24gcmVwbGF5T3Bwb25lbnQoKSB7XHJcbiAgICAgIGxldCBkaWZmaWN1bHR5ID1cclxuICAgICAgICByYWRpb01lZC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaXMtY2hlY2tlZCcpID9cclxuICAgICAgICAgICdtZWRpdW0nIDogJ2Vhc3knO1xyXG4gICAgICBkaWZmaWN1bHR5ID1cclxuICAgICAgICByYWRpb0hhcmQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWNoZWNrZWQnKSA/XHJcbiAgICAgICAgICAnaGFyZCcgOiBkaWZmaWN1bHR5O1xyXG4gICAgICBjb25zdCB0aGV5ID0gY3VycmVudFVzZXIudWlkID09PSBnYW1lLmluaXRpYXRvci51aWQgP1xyXG4gICAgICAgICdvcHBvbmVudCcgOiAnaW5pdGlhdG9yJztcclxuICAgICAgY2xvc2VHYW1lc0RpYWxvZygpO1xyXG5cclxuICAgICAgLy8gbG9hZCBwdXp6bGUgYmFzZWQgb24gdWlkcyBvZiBwbGF5ZXJzXHJcbiAgICAgIHdpbmRvdy5wdXp6bGVXb3JrZXIubG9hZFB1enpsZSh7XHJcbiAgICAgICAgaW5pdGlhdG9yOiB7XHJcbiAgICAgICAgICB1aWQ6IGN1cnJlbnRVc2VyLnVpZCxcclxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBjdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wcG9uZW50OiB7XHJcbiAgICAgICAgICB1aWQ6IGdhbWVbdGhleV0udWlkLFxyXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGdhbWVbdGhleV0uZGlzcGxheU5hbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIExvYWQgZ2FtZSBiYXNlZCBvbiB1c2VyIHNlbGVjdGlvblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBDbGljayBldmVudCBmcm9tIGRpYWxvZ0xpc3RDb250YWluZXJcclxuICAgKi9cclxuICBmdW5jdGlvbiBsb2FkQWN0aXZlR2FtZShldmVudCkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICBpZiAodGFyZ2V0LmlkID09PSAnJykge1xyXG4gICAgICB3aW5kb3cucHV6emxlV29ya2VyLmZldGNoUHV6emxlKHRhcmdldC5wYXJlbnRFbGVtZW50LmlkKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdpbmRvdy5wdXp6bGVXb3JrZXIuZmV0Y2hQdXp6bGUodGFyZ2V0LmlkKTtcclxuICAgIH1cclxuICAgIC8vIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3NwYW4nIHx8XHJcbiAgICAvLyAgIGV2ZW50LnRhcmdldC5pZCA9PT0gJycpIHJldHVybjtcclxuICAgIC8vIHdpbmRvdy5wdXp6bGVXb3JrZXIuZmV0Y2hQdXp6bGUoZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuaWQpO1xyXG4gICAgLy8gdW5zdWJzY3JpYmUoKTtcclxuICAgIC8vIGxvY2F0aW9uLmhhc2ggPSAnI3B1enpsZSc7XHJcbiAgfVxyXG5cclxuICAvKiogQ2xlYXIgbGlzdHMgb24gZ2FtZXMgdmlldyAqL1xyXG4gIGZ1bmN0aW9uIGNsZWFyTGlzdHMoKSB7XHJcbiAgICBhY3RpdmVHYW1lc0NvbnRhaW5lci5pbm5lckhUTUwgPVxyXG4gICAgICAnWW91IG11c3Qgc2lnbiBpbiB0byBzZWUgeW91ciBhY3RpdmUgZ2FtZXMnO1xyXG4gICAgcGFzdEdhbWVzQ29udGFpbmVyLmlubmVySFRNTCA9XHJcbiAgICAgICdZb3UgbXVzdCBzaWduIGluIHRvIHNlZSB5b3VyIGNvbXBsZXRlZCBnYW1lcyc7XHJcbiAgICB3aW5kb3cucHV6emxlV29ya2VyLmNsZWFyUHV6emxlKCk7XHJcbiAgfVxyXG5cclxuICAvKiogSW5pdCBpbiBjYXNlIHdlIG5lZWQgaXQgKi9cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgY29uc29sZS5sb2coJ3B1enpsZVdvcmtlciBoZXJlIScpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8vIGluaXRQaWNrZXI6IGluaXRQaWNrZXIsXHJcbiAgICBpbml0OiBpbml0LFxyXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXHJcbiAgICB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmUsXHJcbiAgICBjbGVhckxpc3RzOiBjbGVhckxpc3RzLFxyXG4gICAgc2hvd1JlcGxheURpYWxvZzogc2hvd1JlcGxheURpYWxvZyxcclxuICB9O1xyXG59KShkb2N1bWVudCwgd2luZG93KTtcclxuXHJcbnB1enpsZUdhbWVzLnN1YnNjcmliZSgpO1xyXG4iXSwiZmlsZSI6ImdhbWVzLmpzIn0=

"use strict"; /* eslint-env es6, browser */
(function (document, window) {
  window.addEventListener('load', function () {
    initApp();
  });

  /** Initialize after document loads */
  function initApp() {
    var querySelector = document.querySelector.bind(document);
    var appContainer = querySelector('#appContainer');
    var gamesPanel = querySelector('#gamesPanel');
    var gamesDialog = querySelector('#gamesDialog');
    var scores = querySelector('#scores');
    var concessionBtnContainer = querySelector('#concessionBtnContainer');
    var puzAuthor = querySelector('#puzAuthor');
    var puzCopy = querySelector('#puzCopy');

    window.addEventListener('hashchange', navigate);

    /**
     * Navigate based on hash change
     */
    function navigate() {
      if (location.hash === '#puzzle') {
        try {
          var replayButton = querySelector('#replayButton');
          if (!replayButton) {
            gamesDialog.close();
          }
        } catch (err) {
          // do nothing, error OK
        }
        window.puzzleGames.unsubscribe();
        gamesPanel.classList.add('slideOut');
        appContainer.classList.add('slideIn');
        concessionBtnContainer.classList.remove('displayNone');
        puzAuthor.classList.remove('displayNone');
        puzCopy.classList.remove('displayNone');
      } else if (location.hash === '#signin') {
        window.puzzleGames.unsubscribe();
        gamesPanel.classList.add('slideOut');
        appContainer.classList.add('slideIn');
        scores.classList.remove('displayFlex');
        scores.classList.add('displayNone');
        concessionBtnContainer.classList.remove('displayNone');
        puzAuthor.classList.add('displayNone');
        puzCopy.classList.add('displayNone');
      } else if (location.hash === '#games') {
        try {
          gamesDialog.close();
        } catch (err) {
          // do nothing, error OK
        }
        window.puzzleGames.subscribe();
        gamesPanel.classList.remove('slideOut');
        appContainer.classList.remove('slideIn');
        scores.classList.remove('displayFlex');
        scores.classList.add('displayNone');
        puzAuthor.classList.add('displayNone');
        puzCopy.classList.add('displayNone');
      }
    }

    if (location.hash !== '#games') {
      location.hash = '#games';
    }
  }
})(document, window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdXRlci5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0QXBwIiwicXVlcnlTZWxlY3RvciIsImJpbmQiLCJhcHBDb250YWluZXIiLCJnYW1lc1BhbmVsIiwiZ2FtZXNEaWFsb2ciLCJzY29yZXMiLCJjb25jZXNzaW9uQnRuQ29udGFpbmVyIiwicHV6QXV0aG9yIiwicHV6Q29weSIsIm5hdmlnYXRlIiwibG9jYXRpb24iLCJoYXNoIiwicmVwbGF5QnV0dG9uIiwiY2xvc2UiLCJlcnIiLCJwdXp6bGVHYW1lcyIsInVuc3Vic2NyaWJlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3Vic2NyaWJlIl0sIm1hcHBpbmdzIjoiY0FBQTtBQUNBLENBQUMsVUFBU0EsUUFBVCxFQUFtQkMsTUFBbkIsRUFBMkI7QUFDMUJBLEVBQUFBLE1BQU0sQ0FBQ0MsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsWUFBVztBQUN6Q0MsSUFBQUEsT0FBTztBQUNSLEdBRkQ7O0FBSUE7QUFDQSxXQUFTQSxPQUFULEdBQW1CO0FBQ2pCLFFBQU1DLGFBQWEsR0FBR0osUUFBUSxDQUFDSSxhQUFULENBQXVCQyxJQUF2QixDQUE0QkwsUUFBNUIsQ0FBdEI7QUFDQSxRQUFNTSxZQUFZLEdBQUdGLGFBQWEsQ0FBQyxlQUFELENBQWxDO0FBQ0EsUUFBTUcsVUFBVSxHQUFHSCxhQUFhLENBQUMsYUFBRCxDQUFoQztBQUNBLFFBQU1JLFdBQVcsR0FBR0osYUFBYSxDQUFDLGNBQUQsQ0FBakM7QUFDQSxRQUFNSyxNQUFNLEdBQUdMLGFBQWEsQ0FBQyxTQUFELENBQTVCO0FBQ0EsUUFBTU0sc0JBQXNCLEdBQUdOLGFBQWEsQ0FBQyx5QkFBRCxDQUE1QztBQUNBLFFBQU1PLFNBQVMsR0FBR1AsYUFBYSxDQUFDLFlBQUQsQ0FBL0I7QUFDQSxRQUFNUSxPQUFPLEdBQUdSLGFBQWEsQ0FBQyxVQUFELENBQTdCOztBQUVBSCxJQUFBQSxNQUFNLENBQUNDLGdCQUFQLENBQXdCLFlBQXhCLEVBQXNDVyxRQUF0Qzs7QUFFQTtBQUNKO0FBQ0E7QUFDSSxhQUFTQSxRQUFULEdBQW9CO0FBQ2xCLFVBQUlDLFFBQVEsQ0FBQ0MsSUFBVCxLQUFrQixTQUF0QixFQUFpQztBQUMvQixZQUFJO0FBQ0YsY0FBTUMsWUFBWSxHQUFHWixhQUFhLENBQUMsZUFBRCxDQUFsQztBQUNBLGNBQUksQ0FBQ1ksWUFBTCxFQUFtQjtBQUNqQlIsWUFBQUEsV0FBVyxDQUFDUyxLQUFaO0FBQ0Q7QUFDRixTQUxELENBS0UsT0FBT0MsR0FBUCxFQUFZO0FBQ1o7QUFDRDtBQUNEakIsUUFBQUEsTUFBTSxDQUFDa0IsV0FBUCxDQUFtQkMsV0FBbkI7QUFDQWIsUUFBQUEsVUFBVSxDQUFDYyxTQUFYLENBQXFCQyxHQUFyQixDQUF5QixVQUF6QjtBQUNBaEIsUUFBQUEsWUFBWSxDQUFDZSxTQUFiLENBQXVCQyxHQUF2QixDQUEyQixTQUEzQjtBQUNBWixRQUFBQSxzQkFBc0IsQ0FBQ1csU0FBdkIsQ0FBaUNFLE1BQWpDLENBQXdDLGFBQXhDO0FBQ0FaLFFBQUFBLFNBQVMsQ0FBQ1UsU0FBVixDQUFvQkUsTUFBcEIsQ0FBMkIsYUFBM0I7QUFDQVgsUUFBQUEsT0FBTyxDQUFDUyxTQUFSLENBQWtCRSxNQUFsQixDQUF5QixhQUF6QjtBQUNELE9BZkQsTUFlTyxJQUFJVCxRQUFRLENBQUNDLElBQVQsS0FBa0IsU0FBdEIsRUFBaUM7QUFDdENkLFFBQUFBLE1BQU0sQ0FBQ2tCLFdBQVAsQ0FBbUJDLFdBQW5CO0FBQ0FiLFFBQUFBLFVBQVUsQ0FBQ2MsU0FBWCxDQUFxQkMsR0FBckIsQ0FBeUIsVUFBekI7QUFDQWhCLFFBQUFBLFlBQVksQ0FBQ2UsU0FBYixDQUF1QkMsR0FBdkIsQ0FBMkIsU0FBM0I7QUFDQWIsUUFBQUEsTUFBTSxDQUFDWSxTQUFQLENBQWlCRSxNQUFqQixDQUF3QixhQUF4QjtBQUNBZCxRQUFBQSxNQUFNLENBQUNZLFNBQVAsQ0FBaUJDLEdBQWpCLENBQXFCLGFBQXJCO0FBQ0FaLFFBQUFBLHNCQUFzQixDQUFDVyxTQUF2QixDQUFpQ0UsTUFBakMsQ0FBd0MsYUFBeEM7QUFDQVosUUFBQUEsU0FBUyxDQUFDVSxTQUFWLENBQW9CQyxHQUFwQixDQUF3QixhQUF4QjtBQUNBVixRQUFBQSxPQUFPLENBQUNTLFNBQVIsQ0FBa0JDLEdBQWxCLENBQXNCLGFBQXRCO0FBQ0QsT0FUTSxNQVNBLElBQUlSLFFBQVEsQ0FBQ0MsSUFBVCxLQUFrQixRQUF0QixFQUFnQztBQUNyQyxZQUFJO0FBQ0ZQLFVBQUFBLFdBQVcsQ0FBQ1MsS0FBWjtBQUNELFNBRkQsQ0FFRSxPQUFPQyxHQUFQLEVBQVk7QUFDWjtBQUNEO0FBQ0RqQixRQUFBQSxNQUFNLENBQUNrQixXQUFQLENBQW1CSyxTQUFuQjtBQUNBakIsUUFBQUEsVUFBVSxDQUFDYyxTQUFYLENBQXFCRSxNQUFyQixDQUE0QixVQUE1QjtBQUNBakIsUUFBQUEsWUFBWSxDQUFDZSxTQUFiLENBQXVCRSxNQUF2QixDQUE4QixTQUE5QjtBQUNBZCxRQUFBQSxNQUFNLENBQUNZLFNBQVAsQ0FBaUJFLE1BQWpCLENBQXdCLGFBQXhCO0FBQ0FkLFFBQUFBLE1BQU0sQ0FBQ1ksU0FBUCxDQUFpQkMsR0FBakIsQ0FBcUIsYUFBckI7QUFDQVgsUUFBQUEsU0FBUyxDQUFDVSxTQUFWLENBQW9CQyxHQUFwQixDQUF3QixhQUF4QjtBQUNBVixRQUFBQSxPQUFPLENBQUNTLFNBQVIsQ0FBa0JDLEdBQWxCLENBQXNCLGFBQXRCO0FBQ0Q7QUFDRjs7QUFFRCxRQUFJUixRQUFRLENBQUNDLElBQVQsS0FBa0IsUUFBdEIsRUFBZ0M7QUFDOUJELE1BQUFBLFFBQVEsQ0FBQ0MsSUFBVCxHQUFnQixRQUFoQjtBQUNEO0FBQ0Y7QUFDRixDQWxFRCxFQWtFR2YsUUFsRUgsRUFrRWFDLE1BbEViIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWVudiBlczYsIGJyb3dzZXIgKi9cclxuKGZ1bmN0aW9uKGRvY3VtZW50LCB3aW5kb3cpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgaW5pdEFwcCgpO1xyXG4gIH0pO1xyXG5cclxuICAvKiogSW5pdGlhbGl6ZSBhZnRlciBkb2N1bWVudCBsb2FkcyAqL1xyXG4gIGZ1bmN0aW9uIGluaXRBcHAoKSB7XHJcbiAgICBjb25zdCBxdWVyeVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KTtcclxuICAgIGNvbnN0IGFwcENvbnRhaW5lciA9IHF1ZXJ5U2VsZWN0b3IoJyNhcHBDb250YWluZXInKTtcclxuICAgIGNvbnN0IGdhbWVzUGFuZWwgPSBxdWVyeVNlbGVjdG9yKCcjZ2FtZXNQYW5lbCcpO1xyXG4gICAgY29uc3QgZ2FtZXNEaWFsb2cgPSBxdWVyeVNlbGVjdG9yKCcjZ2FtZXNEaWFsb2cnKTtcclxuICAgIGNvbnN0IHNjb3JlcyA9IHF1ZXJ5U2VsZWN0b3IoJyNzY29yZXMnKTtcclxuICAgIGNvbnN0IGNvbmNlc3Npb25CdG5Db250YWluZXIgPSBxdWVyeVNlbGVjdG9yKCcjY29uY2Vzc2lvbkJ0bkNvbnRhaW5lcicpO1xyXG4gICAgY29uc3QgcHV6QXV0aG9yID0gcXVlcnlTZWxlY3RvcignI3B1ekF1dGhvcicpO1xyXG4gICAgY29uc3QgcHV6Q29weSA9IHF1ZXJ5U2VsZWN0b3IoJyNwdXpDb3B5Jyk7XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBuYXZpZ2F0ZSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOYXZpZ2F0ZSBiYXNlZCBvbiBoYXNoIGNoYW5nZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBuYXZpZ2F0ZSgpIHtcclxuICAgICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09ICcjcHV6emxlJykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCByZXBsYXlCdXR0b24gPSBxdWVyeVNlbGVjdG9yKCcjcmVwbGF5QnV0dG9uJyk7XHJcbiAgICAgICAgICBpZiAoIXJlcGxheUJ1dHRvbikge1xyXG4gICAgICAgICAgICBnYW1lc0RpYWxvZy5jbG9zZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgLy8gZG8gbm90aGluZywgZXJyb3IgT0tcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnB1enpsZUdhbWVzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgZ2FtZXNQYW5lbC5jbGFzc0xpc3QuYWRkKCdzbGlkZU91dCcpO1xyXG4gICAgICAgIGFwcENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzbGlkZUluJyk7XHJcbiAgICAgICAgY29uY2Vzc2lvbkJ0bkNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICAgIHB1ekF1dGhvci5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICAgIHB1ekNvcHkuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheU5vbmUnKTtcclxuICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbi5oYXNoID09PSAnI3NpZ25pbicpIHtcclxuICAgICAgICB3aW5kb3cucHV6emxlR2FtZXMudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICBnYW1lc1BhbmVsLmNsYXNzTGlzdC5hZGQoJ3NsaWRlT3V0Jyk7XHJcbiAgICAgICAgYXBwQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3NsaWRlSW4nKTtcclxuICAgICAgICBzY29yZXMuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheUZsZXgnKTtcclxuICAgICAgICBzY29yZXMuY2xhc3NMaXN0LmFkZCgnZGlzcGxheU5vbmUnKTtcclxuICAgICAgICBjb25jZXNzaW9uQnRuQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgcHV6QXV0aG9yLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgcHV6Q29weS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICB9IGVsc2UgaWYgKGxvY2F0aW9uLmhhc2ggPT09ICcjZ2FtZXMnKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGdhbWVzRGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAvLyBkbyBub3RoaW5nLCBlcnJvciBPS1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aW5kb3cucHV6emxlR2FtZXMuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgZ2FtZXNQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZU91dCcpO1xyXG4gICAgICAgIGFwcENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZUluJyk7XHJcbiAgICAgICAgc2NvcmVzLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXlGbGV4Jyk7XHJcbiAgICAgICAgc2NvcmVzLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgcHV6QXV0aG9yLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXlOb25lJyk7XHJcbiAgICAgICAgcHV6Q29weS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5Tm9uZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxvY2F0aW9uLmhhc2ggIT09ICcjZ2FtZXMnKSB7XHJcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSAnI2dhbWVzJztcclxuICAgIH1cclxuICB9XHJcbn0pKGRvY3VtZW50LCB3aW5kb3cpO1xyXG4iXSwiZmlsZSI6InJvdXRlci5qcyJ9

//# sourceMappingURL=main.min.js.map
